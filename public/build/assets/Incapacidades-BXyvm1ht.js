import{e as L,x as U,r as v,o as I,a as W,w as R,b as e,g as X,t as w,k as m,j as F,u as d,v as S,h as O,i as E,d as A,G as V,F as ee,y as ae,z as te,C as z,D as K,f as oe,A as Q}from"./app-D3MqHhzN.js";import"./buttons.print-C_oaZFPC.js";import{S as P}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{_ as ie}from"./Mensaje-Cha3XSBK.js";import{_ as se}from"./RHLayout-BLuE-ZcG.js";import{_ as Y}from"./Modal-BmD9hl4o.js";/* empty css                   */import{E as de}from"./jspdf.plugin.autotable-BhKR-0jB.js";import{u as G,w as ne}from"./xlsx-DjuO7_Ju.js";/* empty css                                                */const re={class:"mt-2 bg-white p-4 shadow rounded-lg"},le={class:"border-b border-gray-900/10 pb-12"},ce={class:"text-2xl font-semibold leading-7 text-gray-900"},pe={class:"flex flex-wrap -mx-4"},me={class:"md:col-span-2"},ue={class:"sm:col-span-2",hidden:""},ge={class:"mt-1"},fe=["id"],be={class:"sm:col-span-2 px-2"},xe={class:"mt-2"},he={key:0,class:"text-red-500 text-xs mt-1"},ye={class:"sm:col-span-2 px-2"},ve={class:"mt-2"},Ie={key:0,class:"text-red-500 text-xs mt-1"},we={class:"sm:col-span-2 px-2"},De={class:"mt-2"},_e={key:0,class:"text-red-500 text-xs mt-1"},ke={class:"sm:col-span-2 px-2"},$e={class:"mt-2"},Fe={key:0,class:"text-red-500 text-xs mt-1"},Oe={class:"sm:col-span-2 w-full px-4"},Se={class:"mt-2"},Ee={key:0,class:"text-red-500 text-xs mt-1"},je={class:"mt-6 flex items-center justify-end gap-x-6"},Ce=["id"],Te=["disabled"],Ne={__name:"FormularioIncapacidad",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresAlta:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(l,{emit:u}){const c=l,C=u,a=L({idIncapacidad:c.incapacidad.idIncapacidad,motivo:c.incapacidad.motivo,numeroDias:c.incapacidad.numeroDias,fechaInicio:c.incapacidad.fechaInicio,fechaFin:c.incapacidad.fechaFin,chofer:c.incapacidad.idOperador});U(()=>c.operador,async t=>{a.idOperador=t.idOperador,a.motivo=t.motivo,a.numeroDias=t.numeroDias,a.fechaInicio=t.fechaInicio,a.fechaFin=t.fechaFin,a.chofer=t.idOperador},{deep:!0}),U([()=>a.numeroDias,()=>a.fechaInicio],([t,o])=>{if(t&&o){const i=new Date(o),s=new Date(i);s.setDate(i.getDate()+parseInt(t,10)-1),a.fechaFin=s.toISOString().split("T")[0]}});const g=v(""),f=v(""),b=v(""),x=v(""),h=v(""),n=async()=>{C("close"),a.reset()},D=t=>typeof t=="string"&&t.trim()!=="",T=t=>t!=null,B=t=>t==null?!1:Number.isInteger(t)&&t>=0,N=t=>!(t==null||((typeof t=="string"||t instanceof String)&&(t=new Date(t)),!(t instanceof Date))||isNaN(t.getTime())),r=async()=>{g.value=D(a.motivo)?"":"Ingrese el motivo de la incapacidad",f.value=B(a.numeroDias)?"":"Ingrese el número de días de incapacidad",b.value=N(a.fechaInicio)?"":"Ingrese la fecha de inicio de incapacidad",x.value=N(a.fechaFin)?"":"Ingrese la fecha de fin de incapacidad",h.value=T(a.chofer)?"":"Seleccione a un operador",!(g.value||f.value||b.value||x.value||h.value)&&a.post(route("rh.addIncapacidad"),{onSuccess:()=>{n(),g.value="",f.value="",b.value="",x.value="",h.value=""}})};return(t,o)=>(I(),W(Y,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:n},{default:R(()=>[e("div",re,[e("form",{onSubmit:X(r,["prevent"])},[e("div",le,[e("h1",ce,w(l.title),1),o[12]||(o[12]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},[m("Rellene el formulario para poder registrar una incapacidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1)),e("div",pe,[e("div",me,[e("div",ue,[o[6]||(o[6]=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1)),e("div",ge,[F(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":o[0]||(o[0]=i=>d(a).idIncapacidad=i),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+l.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,fe),[[S,d(a).idIncapacidad]])])])]),e("div",be,[o[7]||(o[7]=e("label",{for:"motivo",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Motivo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",xe,[F(e("input",{type:"text",name:"motivo","onUpdate:modelValue":o[1]||(o[1]=i=>d(a).motivo=i),placeholder:"Ingrese el motivo de la incapacidad",class:"block w-64 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).motivo]])]),g.value!=""?(I(),O("div",he,w(g.value),1)):E("",!0)]),e("div",ye,[o[8]||(o[8]=e("label",{for:"numeroDias",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Número de Días "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ve,[F(e("input",{type:"number",name:"numeroDias","onUpdate:modelValue":o[2]||(o[2]=i=>d(a).numeroDias=i),placeholder:"Ingrese el número de días",class:"block w-32 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).numeroDias]])]),f.value!=""?(I(),O("div",Ie,w(f.value),1)):E("",!0)]),e("div",we,[o[9]||(o[9]=e("label",{for:"fechaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",De,[F(e("input",{type:"date",name:"fechaInicio","onUpdate:modelValue":o[3]||(o[3]=i=>d(a).fechaInicio=i),placeholder:"Ingrese la fecha de inicio",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaInicio]])]),b.value!=""?(I(),O("div",_e,w(b.value),1)):E("",!0)]),e("div",ke,[o[10]||(o[10]=e("label",{for:"fechaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",$e,[F(e("input",{type:"date",name:"fechaFin","onUpdate:modelValue":o[4]||(o[4]=i=>d(a).fechaFin=i),placeholder:"Ingrese la fecha de fin",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaFin]])]),x.value!=""?(I(),O("div",Fe,w(x.value),1)):E("",!0)]),e("div",Oe,[o[11]||(o[11]=e("label",{for:"chofer",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Operador "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Se,[A(d(V),{modelValue:d(a).chofer,"onUpdate:modelValue":o[5]||(o[5]=i=>d(a).chofer=i),options:l.operador.map(i=>({label:i.nombre_completo,value:i.idOperador})),placeholder:"Seleccione al operador",reduce:i=>i.value,class:"w-full",searchable:!0},null,8,["modelValue","options","reduce"])]),h.value!=""?(I(),O("div",Ee,w(h.value),1)):E("",!0)])])]),e("div",je,[e("button",{type:"button",id:"cerrar"+l.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:n},o[13]||(o[13]=[e("i",{class:"fa-solid fa-ban"},null,-1),m(" Cancelar")]),8,Ce),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:d(a).processing},o[14]||(o[14]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),m("Guardar")]),8,Te)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Ae={class:"mt-2 bg-white p-4 shadow rounded-lg"},Be={class:"border-b border-gray-900/10 pb-12"},Me={class:"text-2xl font-semibold leading-7 text-gray-900"},Ue={class:"flex flex-wrap -mx-4"},Re={class:"md:col-span-2"},Le={class:"sm:col-span-2",hidden:""},We={class:"mt-1"},ze=["id"],Pe={class:"sm:col-span-2 px-2"},Ge={class:"mt-2"},qe={key:0,class:"text-red-500 text-xs mt-1"},He={class:"sm:col-span-2 px-2"},Xe={class:"mt-2"},Ye={key:0,class:"text-red-500 text-xs mt-1"},Je={class:"sm:col-span-2 px-2"},Ke={class:"mt-2"},Qe={key:0,class:"text-red-500 text-xs mt-1"},Ze={class:"sm:col-span-2 px-2"},Ve={class:"mt-2"},ea={key:0,class:"text-red-500 text-xs mt-1"},aa={class:"sm:col-span-2 px-4"},ta={class:"mt-2"},oa={class:"block rounded-md py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6"},ia={class:"mt-6 flex items-center justify-end gap-x-6"},sa=["id"],da=["disabled"],na={__name:"FormularioActualizarIncapacidad",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresAlta:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(l,{emit:u}){const c=l,C=u;v({motivo:"",numeroDias:"",fechaInicio:"",fechaFin:""});const a=L({_method:"PUT",idIncapacidad:c.incapacidad.idIncapacidad,motivo:c.incapacidad.motivo,numeroDias:c.incapacidad.numeroDias,fechaInicio:c.incapacidad.fechaInicio,fechaFin:c.incapacidad.fechaFin,operador:c.incapacidad.idOperador});U(()=>c.incapacidad,async r=>{a.idIncapacidad=r.idIncapacidad,a.motivo=r.motivo,a.numeroDias=r.numeroDias,a.fechaInicio=r.fechaInicio,a.fechaFin=r.fechaFin,a.operador=r.idOperador},{deep:!0}),U([()=>a.numeroDias,()=>a.fechaInicio],([r,t])=>{if(r&&t){const o=new Date(t),i=new Date(o);i.setDate(o.getDate()+parseInt(r,10)-1),a.fechaFin=i.toISOString().split("T")[0]}});const g=v(""),f=v(""),b=v(""),x=v("");v("");const h=async()=>{C("close"),a.reset()},n=r=>typeof r=="string"&&r.trim()!=="",D=r=>r==null?!1:Number.isInteger(r)&&r>=0,T=r=>!(r==null||((typeof r=="string"||r instanceof String)&&(r=new Date(r)),!(r instanceof Date))||isNaN(r.getTime())),B=async()=>{g.value=n(a.motivo)?"":"Ingrese el motivo de la incapacidad",f.value=D(a.numeroDias)?"":"Ingrese el número de días de incapacidad",b.value=T(a.fechaInicio)?"":"Ingrese la fecha de inicio de incapacidad",x.value=T(a.fechaFin)?"":"Ingrese la fecha de fin de incapacidad",!(g.value||f.value||b.value||x.value)&&a.post(route("rh.actualizarIncapacidad",a.idIncapacidad),{onSuccess:()=>{h(),g.value="",f.value="",b.value="",x.value=""}})},N=r=>{const t=c.operador.find(o=>o.idOperador===r);return t?t.nombre_completo:"Operador no encontrado"};return(r,t)=>(I(),W(Y,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:h},{default:R(()=>[e("div",Ae,[e("form",{onSubmit:X(B,["prevent"])},[e("div",Be,[e("h1",Me,w(l.title),1),t[11]||(t[11]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},[m("Rellene el formulario para poder registrar una incapacidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1)),e("div",Ue,[e("div",Re,[e("div",Le,[t[5]||(t[5]=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1)),e("div",We,[F(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":t[0]||(t[0]=o=>d(a).idIncapacidad=o),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+l.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ze),[[S,d(a).idIncapacidad]])])])]),e("div",Pe,[t[6]||(t[6]=e("label",{for:"motivo",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Motivo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ge,[F(e("input",{type:"text",name:"motivo","onUpdate:modelValue":t[1]||(t[1]=o=>d(a).motivo=o),placeholder:"Ingrese el motivo de la incapacidad",class:"block w-64 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).motivo]])]),g.value!=""?(I(),O("div",qe,w(g.value),1)):E("",!0)]),e("div",He,[t[7]||(t[7]=e("label",{for:"numeroDias",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Número de Días "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Xe,[F(e("input",{type:"number",name:"numeroDias","onUpdate:modelValue":t[2]||(t[2]=o=>d(a).numeroDias=o),placeholder:"Ingrese el número de días",class:"block w-32 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).numeroDias]])]),f.value!=""?(I(),O("div",Ye,w(f.value),1)):E("",!0)]),e("div",Je,[t[8]||(t[8]=e("label",{for:"fechaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ke,[F(e("input",{type:"date",name:"fechaInicio","onUpdate:modelValue":t[3]||(t[3]=o=>d(a).fechaInicio=o),placeholder:"Ingrese la fecha de inicio",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaInicio]])]),b.value!=""?(I(),O("div",Qe,w(b.value),1)):E("",!0)]),e("div",Ze,[t[9]||(t[9]=e("label",{for:"fechaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ve,[F(e("input",{type:"date",name:"fechaFin","onUpdate:modelValue":t[4]||(t[4]=o=>d(a).fechaFin=o),placeholder:"Ingrese la fecha de fin",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaFin]])]),x.value!=""?(I(),O("div",ea,w(x.value),1)):E("",!0)]),e("div",aa,[t[10]||(t[10]=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},"Operador",-1)),e("div",ta,[e("p",oa,w(N(d(a).operador)),1)])])])]),e("div",ia,[e("button",{type:"button",id:"cerrar"+l.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:h},t[12]||(t[12]=[e("i",{class:"fa-solid fa-ban"},null,-1),m(" Cancelar")]),8,sa),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:d(a).processing},t[13]||(t[13]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),m("Guardar")]),8,da)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ra={class:"mt-2 bg-white p-4 shadow rounded-lg"},la={class:"border-b border-gray-900/10 pb-12"},ca={class:"text-2xl font-semibold leading-7 text-gray-900"},pa={class:"flex flex-wrap -mx-4"},ma={class:"md:col-span-2"},ua={class:"sm:col-span-2",hidden:""},ga={class:"mt-1"},fa=["id"],ba={class:"sm:col-span-2 px-4"},xa={class:"mt-2"},ha=["id"],ya=["value"],va={key:0,class:"text-red-500 text-xs mt-1"},Ia={class:"mt-6 flex items-center justify-end gap-x-6"},wa=["id"],Da=["disabled"],_a={__name:"FormularioReincorporar",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresIncapacidad:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(l,{emit:u}){const c=l,C=u,a=L({_method:"PUT",idIncapacidad:c.incapacidad.idIncapacidad,chofer:c.incapacidad.idOperador,idOperador:c.operador.idOperador});U(()=>c.operador,async h=>{a.idOperador=h.idOperador,a.chofer=h.idOperador},{deep:!0});const g=v(""),f=async()=>{C("close"),a.reset()},b=h=>h!=null,x=async()=>{g.value=b(a.chofer)?"":"Seleccione a un operador",!g.value&&a.post(route("rh.reincorporar"),{onSuccess:()=>{f(),g.value=""}})};return(h,n)=>(I(),W(Y,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:f},{default:R(()=>[e("div",ra,[e("form",{onSubmit:X(x,["prevent"])},[e("div",la,[e("h1",ca,w(l.title),1),n[5]||(n[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},"Seleccione al operador que haya termiando sus días de incapacidad y que vuelve a reincorporarse. ",-1)),e("div",pa,[e("div",ma,[e("div",ua,[n[2]||(n[2]=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1)),e("div",ga,[F(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":n[0]||(n[0]=D=>d(a).idIncapacidad=D),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+l.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,fa),[[S,d(a).idIncapacidad]])])])]),e("div",ba,[n[4]||(n[4]=e("label",{for:"chofer",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Operador "),e("span",{class:"text-red-500"},"*")],-1)),e("div",xa,[F(e("select",{name:"chofer",id:"chofer"+l.op,"onUpdate:modelValue":n[1]||(n[1]=D=>d(a).chofer=D),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[n[3]||(n[3]=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador",-1)),(I(!0),O(ee,null,ae(l.operadoresIncapacidad,D=>(I(),O("option",{key:D.idOperador,value:D.idOperador},w(D.nombre_completo),9,ya))),128))],8,ha),[[te,d(a).chofer]])]),g.value!=""?(I(),O("div",va,w(g.value),1)):E("",!0)])])]),e("div",Ia,[e("button",{type:"button",id:"cerrar"+l.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:f},n[6]||(n[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),m(" Cancelar")]),8,wa),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:d(a).processing},n[7]||(n[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),m("Guardar")]),8,Da)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ka={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},$a={class:"py-3 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0"},q="xl",H=!0,Ma={__name:"Incapacidades",props:{message:{String,default:""},color:{String,default:""},operador:{type:Object},incapacidad:{type:Object},directivo:{type:Object},usuario:{type:Object},operadoresAlta:{type:Object},operadoresIncapacidad:{type:Object}},setup(l){z.use(K),z.use(K);const u=l,c=(i="Documento")=>{const s=new de("landscape");s.setFontSize(12),s.text(i,14,22);const p=new Date().toLocaleDateString();s.setFontSize(8),s.text(`Fecha: ${p}`,260,22);const y=["ID","Operador","Motivo de Incapacidad","Número de Días","Fecha de Inicio","Fecha de Fin"],_=[];Q(()=>{$("#incapacidadesTablaId").DataTable().rows({search:"applied"}).data().each(j=>{var J;_.push([j.idIncapacidad,((J=u.operador.find(Z=>Z.idOperador===j.idOperador))==null?void 0:J.nombre_completo)||"",j.motivo,j.numeroDias,j.fechaInicio,j.fechaFin])}),s.autoTable({head:[y],body:_,startY:24}),s.save(`${i}.pdf`)})},C=()=>{Q(()=>{const p=$("#incapacidadesTablaId").DataTable().rows({search:"applied"}).data().toArray().map(k=>{var M;return{ID:k.idIncapacidad,Operador:((M=u.operador.find(j=>j.idOperador===k.idOperador))==null?void 0:M.nombre_completo)||"","Motivo de Incapacidad":k.motivo,"Número de Días":k.numeroDias,"Fecha de Inicio":k.fechaInicio,"Fecha de Fin":k.fechaFin}}),y=G.json_to_sheet(p),_=G.book_new();G.book_append_sheet(_,y,"Incapacidades Registrados"),ne(_,"Incapacidades Registrados.xlsx")})},a=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Directivos registrados",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>C()},{title:"Directivos registrados",text:'<i class="fa-solid fa-file-pdf"></i> PDF',className:"bg-red-500 hover:bg-red-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>c(u.title||"Incapacidades Registradas")},{title:"Directivos registrados",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[2,3,4,5,6]}}],g=[{data:null,render:function(i,s,p,y){return`<input type="checkbox" class="incapacidades-checkboxes" data-id="${p.idIncapacidad}" ">`}},{data:null,render:function(i,s,p,y){return y.row+1}},{data:"idOperador",render:function(i,s,p,y){const _=u.operador.find(k=>k.idOperador===i);return _?_.nombre_completo:""}},{data:"motivo"},{data:"numeroDias"},{data:"fechaInicio"},{data:"fechaFin"},{data:null,render:function(i,s,p,y){return`<button class="editar-button" data-id="${p.idIncapacidad}" style="display: flex; justify-content: center;"><i class="fa fa-pencil"></i></button>`}}],f=v(!1),b=v(!1),x=v(!1),h=L({_method:"DELETE"}),n=v([]);var D={};const T=i=>{D=i,b.value=!0},B=()=>{x.value=!1},N=()=>{f.value=!1},r=()=>{b.value=!1},t=i=>{n.value.includes(i)?n.value=n.value.filter(p=>p!==i):n.value.push(i);const s=document.getElementById("eliminarABtn");n.value.length>0?s.removeAttribute("disabled"):s.setAttribute("disabled","")};oe(()=>{document.getElementById("incapacidadesTablaId").addEventListener("click",i=>{const s=i.target;if(s.classList.contains("incapacidades-checkboxes")){const p=parseInt(s.getAttribute("data-id"));if(u.incapacidad){const y=u.incapacidad.find(_=>_.idIncapacidad===p);y?t(y):console.log("No se tiene incapacidad")}}}),$("#incapacidadesTablaId").on("click",".editar-button",function(){const i=$(this).data("id"),s=u.incapacidad.find(p=>p.idIncapacidad===i);T(s)})});const o=()=>{const i=P.mixin({buttonsStyling:!0}),s=n.value.map(p=>{const y=u.operador.find(_=>_.idOperador===p.idOperador);return y?y.nombre_completo:""}).filter(p=>p!=="").join(", ");i.fire({title:"¿Esta seguro que desea eliminar la(s) incapacidad(es) del(los) operador(es) seleccionado(s)?",html:`Operador(es) seleccionado(s): ${s}`,showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Confirmar',cancelButtonText:'<i class="fa-solid fa-ban"></i> Cancelar'}).then(async p=>{if(p.isConfirmed)try{const _=n.value.map(M=>M.idIncapacidad).join(",");await h.post(route("rh.eliminarIncapacidad",_)),n.value=[];const k=document.getElementById("eliminarABtn");n.value.length>0?k.removeAttribute("disabled"):k.setAttribute("disabled",""),P.fire({title:"Incapacidad eliminado correctamente",icon:"success"}),window.flash={message:"Incapacidad eliminado correctamente",color:"green"}}catch(y){console.log("Error al eliminar varias incapacidades: "+y),P.fire({title:"Error",text:"Hubo un error al eliminar la incapacidad. Por favor, inténtalo de nuevo más tarde.",icon:"error"})}})};return(i,s)=>(I(),W(se,{title:"Incapacidades",usuario:u.usuario},{default:R(()=>[e("div",ka,[s[6]||(s[6]=e("h2",{class:"font-bold text-center text-xl pt-0"},"Incapacidades",-1)),s[7]||(s[7]=e("div",{class:"my-1"},null,-1)),s[8]||(s[8]=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-6"},null,-1)),A(ie),e("div",$a,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:s[0]||(s[0]=p=>f.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},s[2]||(s[2]=[e("i",{class:"fa fa-plus mr-2"},null,-1),m("Agregar Incapacidad ")])),e("button",{id:"eliminarABtn",disabled:"",class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:o},s[3]||(s[3]=[e("i",{class:"fa fa-trash mr-2"},null,-1),m("Borrar Incapacidad ")])),e("button",{class:"bg-sky-500 hover:bg-sky-500 text-white font-semibold py-2 px-4 rounded",onClick:s[1]||(s[1]=p=>x.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},s[4]||(s[4]=[e("i",{class:"fa fa-refresh","aria-hidden":"true"},null,-1),m(" Reincorporar Operador ")]))]),e("div",null,[A(d(z),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"incapacidadesTablaId",name:"incapacidadesTablaId",columns:g,data:l.incapacidad,options:{responsive:!0,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"Ultimo"}},buttons:[a]}},{default:R(()=>s[5]||(s[5]=[e("thead",null,[e("tr",{class:"text-sm leading-normal"},[e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," ID "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Operador "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Motivo de incapacidad "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Número de Días "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Fecha de Inicio "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Fecha de Fin ")])],-1)])),_:1},8,["data","options"])])]),A(Ne,{show:f.value,"max-width":q,closeable:H,onClose:N,title:"Añadir incapacidad",op:"1",modal:"modalCreate",operador:u.operador,operadoresAlta:u.operadoresAlta},null,8,["show","operador","operadoresAlta"]),A(na,{show:b.value,"max-width":q,closeable:H,onClose:r,title:"Editar Incapacidad",modal:"modalEdit",operador:u.operador,incapacidad:d(D)},null,8,["show","operador","incapacidad"]),A(_a,{show:x.value,"max-width":q,closeable:H,onClose:B,title:"Reincorporar Operador",modal:"modalEdit",operador:u.operador,operadoresIncapacidad:u.operadoresIncapacidad},null,8,["show","operador","operadoresIncapacidad"])]),_:1},8,["usuario"]))}};export{Ma as default};
