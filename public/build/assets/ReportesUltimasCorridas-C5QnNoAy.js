import{r as I,J,o as i,h as l,y as f,b as r,t as b,j as x,z as h,F as v,u,K as D,i as q,n as j,k as Q,G as W}from"./app-DPkFMts4.js";import{S as w}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{u as F,w as X}from"./xlsx-DjuO7_Ju.js";import{E as Z}from"./jspdf.plugin.autotable-BKRtLqQB.js";/* empty css                                                               */const de={class:"text-lg font-bold"},ce={class:"flex flex-wrap gap-4 mb-3"},ue=["value"],me={class:"flex flex-wrap gap-4 mb-3"},ge={class:"flex flex-wrap space-x-3 mb-2"},pe=["onUpdate:modelValue"],fe=["value"],be=["value"],ve=["value"],xe={class:"flex flex-wrap space-x-3"},he=["onClick"],oe=2024,qo={__name:"ReportesEntrada",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},entrada:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(s,e)=>{let t="";e.tipo==="semana"?t=route("reportes.entradasSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?t=route("reportes.entradasMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(t=route("reportes.entradasAnio",{idUnidad:s,anio:e.valor}));try{const o=await W.get(t);A.value=o.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(s,e,t,o)=>{if(!t||!o.tipo||!o.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?a.valor=m:s.periodoSeleccionado==="mes"?a.valor=g:s.periodoSeleccionado==="anio"&&(a.valor=p);try{await z(t,a),s.titulo==="Entradas"?e==="pdf"?P(s.titulo,a):e==="excel"?B(s.titulo,a):e==="imprimir"&&imprimirReporte(s.titulo,a):w.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(s,e)=>{const t=e.tipo==="semana"?`Semana ${e.valor}`:e.tipo==="mes"?N[e.valor-1]:e.valor,o=`${s}-${t}.pdf`,a=new Z("landscape");a.setFontSize(12),a.text(`Reporte de ${s} - Período: ${t}`,14,20);const c=[{header:"Ruta",dataKey:"ruta"},{header:"Fecha",dataKey:"fecha"},{header:"Numero Unidad",dataKey:"numeroUnidad"},{header:"Socio/Prestador",dataKey:"socioPrestador"},{header:"Hora Entrada",dataKey:"horaEntrada"},{header:"Tipo Entrada",dataKey:"tipoEntrada"},{header:"Extremo",dataKey:"extremo"},{header:"Operador",dataKey:"operador"}],_=A.value.map(d=>{var y,S;return{ruta:((y=d.ruta)==null?void 0:y.nombreRuta)||"N/A",fecha:d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",numeroUnidad:((S=d.unidad)==null?void 0:S.numeroUnidad)||"N/A",socioPrestador:d.directivo?`${d.directivo.nombre_completo}`:"N/A",horaEntrada:d.horaEntrada?d.horaEntrada.substring(0,5):"N/A",tipoEntrada:d.tipoEntrada||"Tarde",extremo:d.extremo||"N/A",operador:d.operador?`${d.operador.nombre_completo}`:"N/A"}});a.autoTable({head:[c.map(d=>d.header)],body:_.map(d=>c.map(y=>d[y.dataKey])),startY:24,styles:{fontSize:10,cellPadding:4,halign:"center"}});const n=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});a.setFontSize(10),a.text(`Fecha de creación: ${n}`,14,a.internal.pageSize.height-10),a.save(o)},B=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=`${s}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"]];A.value.forEach(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaEntrada?n.horaEntrada.substring(0,5):"N/A",E=n.tipoEntrada,R=n.extremo||"N/A",T=n.operador?`${n.operador.nombre_completo}`:"N/A";a.push([d,y,S,C,U,E,R,T])});const c=F.book_new(),_=F.aoa_to_sheet(a);F.book_append_sheet(c,_,"Reporte_Entradas"),X(c,o)},M=[{titulo:"Entradas",periodo:"semana",periodoSeleccionado:"semana"}],Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(s,e)=>e+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-oe+1},(s,e)=>oe+e);let m=1,g=1,p=O;return(s,e)=>(i(),l(v,null,f(M,t=>r("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",de,b(t.titulo),1),e[9]||(e[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",ce,[e[6]||(e[6]=r("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>k.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=r("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=r("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(V.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,ue))),128))],512),[[h,k.unidad]])])])]),r("div",me,[r("div",ge,[e[8]||(e[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":o=>t.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,pe),[[h,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>D(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(o,a)=>(i(),l("option",{key:a,value:o},"Semana "+b(o),9,fe))),128))],512)),[[h,u(m)]]):t.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>D(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(o,a)=>r("option",{key:a,value:a+1},b(o),9,be)),64))],512)),[[h,u(g)]]):t.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>D(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),o=>(i(),l("option",{key:o,value:o},b(o),9,ve))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",xe,[(i(),l(v,null,f(Y,o=>r("button",{key:o.tipo,class:j(o.clase),onClick:a=>K(t,o.tipo,k.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(o.icono+" mr-2 jump-icon")},null,2),Q(" "+b(o.texto),1)],10,he)),64))])])),64))}},ye={class:"text-lg font-bold"},_e={class:"flex flex-wrap gap-4 mb-3"},$e=["value"],Se={class:"flex flex-wrap gap-4 mb-3"},we={class:"flex flex-wrap space-x-3 mb-2"},Ae=["onUpdate:modelValue"],ke=["value"],Ne=["value"],Ue=["value"],Ce={class:"flex flex-wrap space-x-3"},Ee=["onClick"],te=2024,Qo={__name:"ReportesCortes",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(s,e)=>{let t="";e.tipo==="semana"?t=route("reportes.cortesSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?t=route("reportes.cortesMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(t=route("reportes.cortesAnio",{idUnidad:s,anio:e.valor}));try{const o=await W.get(t);A.value=o.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(s,e,t,o)=>{if(!t||!o.tipo||!o.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?a.valor=m:s.periodoSeleccionado==="mes"?a.valor=g:s.periodoSeleccionado==="anio"&&(a.valor=p);try{await z(t,a),s.titulo==="Cortes"?e==="pdf"?P(s.titulo,a):e==="excel"?B(s.titulo,a):e==="imprimir"&&imprimirReporte(s.titulo,a):w.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=new Z("landscape");o.setFontSize(12),o.text(`Reporte de ${s} - Período: ${t}`,14,20);const a=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),c=A.value.map(d=>{var H;const y=d.ruta?d.ruta.nombreRuta:"N/A",S=d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",C=((H=d.unidad)==null?void 0:H.numeroUnidad)||"N/A",U=d.directivo?`${d.directivo.nombre_completo}`:"N/A",E=d.horaCorte?d.horaCorte.substring(0,5):"N/A",R=d.causa||"N/A",T=d.horaRegreso?d.horaRegreso.substring(0,5):"Sin Regreso",$=d.operador?`${d.operador.nombre_completo}`:"N/A";return[y,S,C,U,E,R,T,$]}),_=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];o.autoTable({head:_,body:c,startY:24});const n=o.internal.getNumberOfPages();o.setFontSize(10);for(let d=1;d<=n;d++)o.setPage(d),o.text(`Fecha de creación: ${a}`,14,o.internal.pageSize.height-10);o.save(`${s}-${t}.pdf`)},B=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=`${s}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];A.value.forEach(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaCorte?n.horaCorte.substring(0,5):"N/A",E=n.causa||"N/A",R=n.horaRegreso?n.horaRegreso.substring(0,5):"Sin Regreso",T=n.operador?`${n.operador.nombre_completo}`:"N/A";a.push([d,y,S,C,U,E,R,T])});const c=F.book_new(),_=F.aoa_to_sheet(a);F.book_append_sheet(c,_,"Reporte_Cortes"),X(c,o)},M=[{titulo:"Cortes",periodo:"semana",periodoSeleccionado:"semana"}],Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(s,e)=>e+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-te+1},(s,e)=>te+e);let m=1,g=1,p=O;return(s,e)=>(i(),l(v,null,f(M,t=>r("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",ye,b(t.titulo),1),e[9]||(e[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",_e,[e[6]||(e[6]=r("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>k.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=r("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=r("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(V.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,$e))),128))],512),[[h,k.unidad]])])])]),r("div",Se,[r("div",we,[e[8]||(e[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":o=>t.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,Ae),[[h,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>D(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(o,a)=>(i(),l("option",{key:a,value:o},"Semana "+b(o),9,ke))),128))],512)),[[h,u(m)]]):t.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>D(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(o,a)=>r("option",{key:a,value:a+1},b(o),9,Ne)),64))],512)),[[h,u(g)]]):t.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>D(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),o=>(i(),l("option",{key:o,value:o},b(o),9,Ue))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",Ce,[(i(),l(v,null,f(Y,o=>r("button",{key:o.tipo,class:j(o.clase),onClick:a=>K(t,o.tipo,k.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(o.icono+" mr-2 jump-icon")},null,2),Q(" "+b(o.texto),1)],10,Ee)),64))])])),64))}},Re={class:"text-lg font-bold"},Te={class:"flex flex-wrap gap-4 mb-3"},De=["value"],Fe={class:"flex flex-wrap gap-4 mb-3"},Oe={class:"flex flex-wrap space-x-3 mb-2"},Pe=["onUpdate:modelValue"],je=["value"],Ve=["value"],ze=["value"],Ke={class:"flex flex-wrap space-x-3"},Be=["onClick"],ae=2024,Wo={__name:"ReportesCortesConRegreso",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(s,e)=>{let t="";e.tipo==="semana"?t=route("reportes.cortesCRSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?t=route("reportes.cortesCRMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(t=route("reportes.cortesCRAnio",{idUnidad:s,anio:e.valor}));try{const o=await W.get(t);A.value=o.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(s,e,t,o)=>{if(!t||!o.tipo||!o.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?a.valor=m:s.periodoSeleccionado==="mes"?a.valor=g:s.periodoSeleccionado==="anio"&&(a.valor=p);try{await z(t,a),s.titulo==="Cortes Con Regreso"?e==="pdf"?P(s.titulo,a):e==="excel"?B(s.titulo,a):e==="imprimir"&&imprimirReporte(s.titulo,a):w.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=new Z("landscape");o.setFontSize(12),o.text(`Reporte de ${s} - Período: ${t}`,14,20);const a=A.value.map(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaCorte?n.horaCorte.substring(0,5):"N/A",E=n.causa||"N/A",R=n.horaRegreso?n.horaRegreso.substring(0,5):"Sin Regreso",T=n.operador?`${n.operador.nombre_completo}`:"N/A";return[d,y,S,C,U,E,R,T]});o.autoTable({head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]],body:a,startY:24,styles:{fontSize:10}});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});o.setFontSize(10),o.text(`Fecha de creación: ${c}`,14,o.internal.pageSize.height-10);const _=`${s}-${t}.pdf`;o.save(_)},B=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=`${s}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];A.value.forEach(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaCorte?n.horaCorte.substring(0,5):"N/A",E=n.causa||"N/A",R=n.horaRegreso?n.horaRegreso.substring(0,5):"Sin Regreso",T=n.operador?`${n.operador.nombre_completo}`:"N/A";a.push([d,y,S,C,U,E,R,T])});const c=F.book_new(),_=F.aoa_to_sheet(a);F.book_append_sheet(c,_,"Reporte_Cortes_CR"),X(c,o)},M=[{titulo:"Cortes Con Regreso",periodo:"semana",periodoSeleccionado:"semana"}],Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(s,e)=>e+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-ae+1},(s,e)=>ae+e);let m=1,g=1,p=O;return(s,e)=>(i(),l(v,null,f(M,t=>r("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",Re,b(t.titulo),1),e[9]||(e[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",Te,[e[6]||(e[6]=r("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>k.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=r("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=r("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(V.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,De))),128))],512),[[h,k.unidad]])])])]),r("div",Fe,[r("div",Oe,[e[8]||(e[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":o=>t.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,Pe),[[h,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>D(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(o,a)=>(i(),l("option",{key:a,value:o},"Semana "+b(o),9,je))),128))],512)),[[h,u(m)]]):t.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>D(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(o,a)=>r("option",{key:a,value:a+1},b(o),9,Ve)),64))],512)),[[h,u(g)]]):t.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>D(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),o=>(i(),l("option",{key:o,value:o},b(o),9,ze))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",Ke,[(i(),l(v,null,f(Y,o=>r("button",{key:o.tipo,class:j(o.clase),onClick:a=>K(t,o.tipo,k.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(o.icono+" mr-2 jump-icon")},null,2),Q(" "+b(o.texto),1)],10,Be)),64))])])),64))}},Me={class:"text-lg font-bold"},Ye={class:"flex flex-wrap gap-4 mb-3"},Le=["value"],Ge={class:"flex flex-wrap gap-4 mb-3"},He={class:"flex flex-wrap space-x-3 mb-2"},Ie=["onUpdate:modelValue"],Je=["value"],qe=["value"],Qe=["value"],We={class:"flex flex-wrap space-x-3"},Xe=["onClick"],re=2024,Xo={__name:"ReportesCortesSinRegreso",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(s,e)=>{let t="";e.tipo==="semana"?t=route("reportes.cortesSRSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?t=route("reportes.cortesSRMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(t=route("reportes.cortesSRAnio",{idUnidad:s,anio:e.valor}));try{const o=await W.get(t);A.value=o.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(s,e,t,o)=>{if(!t||!o.tipo||!o.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?a.valor=m:s.periodoSeleccionado==="mes"?a.valor=g:s.periodoSeleccionado==="anio"&&(a.valor=p);try{await z(t,a),s.titulo==="Cortes Sin Regreso"?e==="pdf"?P(s.titulo,a):e==="excel"?B(s.titulo,a):e==="imprimir"&&imprimirReporte(s.titulo,a):w.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=A.value.map(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaCorte?n.horaCorte.substring(0,5):"N/A",E=n.causa||"N/A",R=n.horaRegreso?n.horaRegreso.substring(0,5):"Sin Regreso",T=n.operador?`${n.operador.nombre_completo}`:"N/A";return[d,y,S,C,U,E,R,T]}),a=new Z("landscape");a.setFontSize(12),a.text(`Reporte de ${s} - Período: ${t}`,14,20),a.autoTable({head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]],body:o,startY:24,styles:{fontSize:10,halign:"center"}});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});a.setFontSize(10),a.text(`Fecha de creación: ${c}`,14,a.internal.pageSize.height-10);const _=`${s}-${t}.pdf`;a.save(_)},B=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=`${s}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];A.value.forEach(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaCorte?n.horaCorte.substring(0,5):"N/A",E=n.causa||"N/A",R=n.horaRegreso?n.horaRegreso.substring(0,5):"Sin Regreso",T=n.operador?`${n.operador.nombre_completo}`:"N/A";a.push([d,y,S,C,U,E,R,T])});const c=F.book_new(),_=F.aoa_to_sheet(a);F.book_append_sheet(c,_,"Reporte_Cortes_SR"),X(c,o)},M=[{titulo:"Cortes Sin Regreso",periodo:"semana",periodoSeleccionado:"semana"}],Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(s,e)=>e+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-re+1},(s,e)=>re+e);let m=1,g=1,p=O;return(s,e)=>(i(),l(v,null,f(M,t=>r("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",Me,b(t.titulo),1),e[9]||(e[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",Ye,[e[6]||(e[6]=r("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>k.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=r("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=r("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(V.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,Le))),128))],512),[[h,k.unidad]])])])]),r("div",Ge,[r("div",He,[e[8]||(e[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":o=>t.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,Ie),[[h,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>D(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(o,a)=>(i(),l("option",{key:a,value:o},"Semana "+b(o),9,Je))),128))],512)),[[h,u(m)]]):t.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>D(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(o,a)=>r("option",{key:a,value:a+1},b(o),9,qe)),64))],512)),[[h,u(g)]]):t.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>D(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),o=>(i(),l("option",{key:o,value:o},b(o),9,Qe))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",We,[(i(),l(v,null,f(Y,o=>r("button",{key:o.tipo,class:j(o.clase),onClick:a=>K(t,o.tipo,k.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(o.icono+" mr-2 jump-icon")},null,2),Q(" "+b(o.texto),1)],10,Xe)),64))])])),64))}},Ze={class:"text-lg font-bold"},eo={class:"flex flex-wrap gap-4 mb-3"},oo=["value"],to={class:"flex flex-wrap gap-4 mb-3"},ao={class:"flex flex-wrap space-x-3 mb-2"},ro=["onUpdate:modelValue"],no=["value"],so=["value"],io=["value"],lo={class:"flex flex-wrap space-x-3"},co=["onClick"],ne=2024,Zo={__name:"ReportesEntradasTardes",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},entrada:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(s,e)=>{let t="";e.tipo==="semana"?t=route("reportes.entradasTardesSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?t=route("reportes.entradasTardesMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(t=route("reportes.entradasTardesAnio",{idUnidad:s,anio:e.valor}));try{const o=await W.get(t);A.value=o.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(s,e,t,o)=>{if(!t||!o.tipo||!o.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?a.valor=m:s.periodoSeleccionado==="mes"?a.valor=g:s.periodoSeleccionado==="anio"&&(a.valor=p);try{await z(t,a),s.titulo==="Entradas Tardes"?e==="pdf"?P(s.titulo,a):e==="excel"&&B(s.titulo,a):w.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(s,e)=>{const t=new Z("landscape");let o;e.tipo==="semana"?o=`Semana ${e.valor}`:e.tipo==="mes"?o=N[e.valor-1]:(e.tipo,o=e.valor),t.setFontSize(12),t.text(`Reporte de ${s} - Período: ${o}`,14,20);const a=A.value.map(d=>{var H;const y=d.ruta?d.ruta.nombreRuta:"N/A",S=d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",C=((H=d.unidad)==null?void 0:H.numeroUnidad)||"N/A",U=d.directivo?`${d.directivo.nombre_completo}`:"N/A",E=d.horaEntrada?d.horaEntrada.substring(0,5):"N/A",R=d.tipoEntrada||"Tarde",T=d.extremo||"N/A",$=d.operador?`${d.operador.nombre_completo}`:"N/A";return[y,S,C,U,E,R,T,$]}),c=["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"];t.autoTable({head:[c],body:a,startY:24,styles:{fontSize:10,cellPadding:4}});const _=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});t.setFontSize(10),t.text(`Fecha de creación: ${_}`,14,t.internal.pageSize.height-10);const n=`${s}-${o}.pdf`;t.save(n)},B=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=`${s}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"]];A.value.forEach(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaEntrada?n.horaEntrada.substring(0,5):"N/A",E=n.tipoEntrada,R=n.extremo||"N/A",T=n.operador?`${n.operador.nombre_completo}`:"N/A";a.push([d,y,S,C,U,E,R,T])});const c=F.book_new(),_=F.aoa_to_sheet(a);F.book_append_sheet(c,_,"Reporte_Entradas_Tardes"),X(c,o)},M=[{titulo:"Entradas Tardes",periodo:"semana",periodoSeleccionado:"semana"}],Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(s,e)=>e+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-ne+1},(s,e)=>ne+e);let m=1,g=1,p=O;return(s,e)=>(i(),l(v,null,f(M,t=>r("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",Ze,b(t.titulo),1),e[9]||(e[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",eo,[e[6]||(e[6]=r("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>k.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=r("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=r("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(V.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,oo))),128))],512),[[h,k.unidad]])])])]),r("div",to,[r("div",ao,[e[8]||(e[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":o=>t.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,ro),[[h,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>D(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(o,a)=>(i(),l("option",{key:a,value:o},"Semana "+b(o),9,no))),128))],512)),[[h,u(m)]]):t.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>D(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(o,a)=>r("option",{key:a,value:a+1},b(o),9,so)),64))],512)),[[h,u(g)]]):t.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>D(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),o=>(i(),l("option",{key:o,value:o},b(o),9,io))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",lo,[(i(),l(v,null,f(Y,o=>r("button",{key:o.tipo,class:j(o.clase),onClick:a=>K(t,o.tipo,k.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(o.icono+" mr-2 jump-icon")},null,2),Q(" "+b(o.texto),1)],10,co)),64))])])),64))}},uo={class:"text-lg font-bold"},mo={class:"flex flex-wrap gap-4 mb-3"},go=["value"],po={class:"flex flex-wrap gap-4 mb-3"},fo={class:"flex flex-wrap space-x-3 mb-2"},bo=["onUpdate:modelValue"],vo=["value"],xo=["value"],ho=["value"],yo={class:"flex flex-wrap space-x-3"},_o=["onClick"],se=2024,et={__name:"ReportesDiasTrabajados",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(e,t)=>{let o="";t.tipo==="semana"?o=route("reportes.diasTrabajadosSemana",{idOperador:e,semana:t.valor}):t.tipo==="mes"?o=route("reportes.diasTrabajadosMes",{idOperador:e,mes:t.valor}):t.tipo==="anio"&&(o=route("reportes.diasTrabajadosAnio",{idOperador:e,anio:t.valor}));try{const a=await W.get(o);A.value=a.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(e,t,o,a)=>{if(!o||!a.tipo||!a.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let c={tipo:e.periodoSeleccionado,valor:""};e.periodoSeleccionado==="semana"?c.valor=m:e.periodoSeleccionado==="mes"?c.valor=g:e.periodoSeleccionado==="anio"&&(c.valor=p);try{await z(o,c),e.titulo==="Días Trabajados"?t==="pdf"?B(e.titulo,c):t==="excel"?M(e.titulo,c):t==="imprimir"&&imprimirReporte(e.titulo,c):w.fire({title:`Generar el reporte "${e.titulo}" en ${t}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(_){console.error(_),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(e,t)=>{switch(e){case"semana":return 7;case"mes":const o=parseInt(t,10),a=new Date().getFullYear();return new Date(a,o,0).getDate();case"anio":return 365;default:return 0}},B=(e,t)=>{let o;t.tipo==="semana"?o=`Semana ${t.valor}`:t.tipo==="mes"?o=N[t.valor-1]:(t.tipo,o=t.valor);const a=P(t.tipo,t.valor),c=new Z("landscape");c.setFontSize(12),c.text(`Reporte de ${e} - Período: ${o}`,14,20);const _=[{header:"Nombre del operador",dataKey:"nombre"},{header:"Días trabajados",dataKey:"diasTrabajados"},{header:"Días no trabajados",dataKey:"diasNoTrabajados"},{header:"Total de días",dataKey:"totalDias"},{header:"Productividad (%)",dataKey:"productividad"}],n=A.value.map(S=>{const C=S.nombre_completo||"N/A",U=S.diasTrabajados||0,E=a-U,R=(U/a*100).toFixed(2);return{nombre:C,diasTrabajados:U,diasNoTrabajados:E,totalDias:a,productividad:`${R}%`}});c.autoTable({columns:_,body:n,startY:24,styles:{fontSize:10}});const d=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});c.setFontSize(10),c.text(`Fecha de creación: ${d}`,14,c.internal.pageSize.height-10);const y=`${e}-${o}.pdf`;c.save(y)},M=(e,t)=>{let o;t.tipo==="semana"?o=`Semana ${t.valor}`:t.tipo==="mes"?o=N[t.valor-1]:(t.tipo,o=t.valor);const a=`${e}-${o}.xlsx`,c=P(t.tipo,t.valor),_=[["Nombre del Operador","Días Trabajados","Días no Trabajados","Total de Días","Productividad (%)"]];A.value.forEach(y=>{const S=y.nombre_completo||"N/A",C=y.diasTrabajados||"N/A",U=c-(y.diasTrabajados||0),E=P(t.tipo,t.valor),R=(C/c*100).toFixed(2);_.push([S,C,U,E,R])});const n=F.book_new(),d=F.aoa_to_sheet(_);F.book_append_sheet(n,d,"Reporte_Dias_Trabajados"),X(n,a)},Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(e,t)=>t+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-se+1},(e,t)=>se+t);let m=1,g=1,p=O;const s=[{titulo:"Días Trabajados",periodo:"semana",periodoSeleccionado:"semana"}];return(e,t)=>(i(),l(v,null,f(s,o=>r("div",{key:o.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",uo,b(o.titulo),1),t[9]||(t[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",mo,[t[6]||(t[6]=r("h2",{class:"font-semibold text-l pt-0"},"Operador: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"operador",id:"operador","onUpdate:modelValue":t[0]||(t[0]=a=>k.operador=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[t[4]||(t[4]=r("option",{value:"",disabled:"",selected:""},"----------- Operador -----------",-1)),t[5]||(t[5]=r("option",{value:"todas"},"Todos los operadores",-1)),(i(!0),l(v,null,f(V.operador,a=>(i(),l("option",{key:a.idOperador,value:a.idOperador},b(a.nombre_completo),9,go))),128))],512),[[h,k.operador]])])])]),r("div",po,[r("div",fo,[t[8]||(t[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":a=>o.periodoSeleccionado=a,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},t[7]||(t[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,bo),[[h,o.periodoSeleccionado]]),o.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":t[1]||(t[1]=a=>D(m)?m.value=a:m=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(a,c)=>(i(),l("option",{key:c,value:a},"Semana "+b(a),9,vo))),128))],512)),[[h,u(m)]]):o.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":t[2]||(t[2]=a=>D(g)?g.value=a:g=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(a,c)=>r("option",{key:c,value:c+1},b(a),9,xo)),64))],512)),[[h,u(g)]]):o.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":t[3]||(t[3]=a=>D(p)?p.value=a:p=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),a=>(i(),l("option",{key:a,value:a},b(a),9,ho))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",yo,[(i(),l(v,null,f(Y,a=>r("button",{key:a.tipo,class:j(a.clase),onClick:c=>K(o,a.tipo,k.operador,{tipo:o.periodoSeleccionado,valor:o.periodoSeleccionado==="semana"?u(m):o.periodoSeleccionado==="mes"?u(g):o.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(a.icono+" mr-2 jump-icon")},null,2),Q(" "+b(a.texto),1)],10,_o)),64))])])),64))}},$o={class:"text-lg font-bold"},So={class:"flex flex-wrap gap-4 mb-3"},wo=["value"],Ao={class:"flex flex-wrap gap-4 mb-3"},ko={class:"flex flex-wrap space-x-3 mb-2"},No=["onUpdate:modelValue"],Uo=["value"],Co=["value"],Eo=["value"],Ro={class:"flex flex-wrap space-x-3"},To=["onClick"],ie=2024,ot={__name:"ReportesCastigos",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(s,e)=>{let t="";e.tipo==="semana"?t=route("reportes.castigosSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?t=route("reportes.castigosMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(t=route("reportes.castigosAnio",{idUnidad:s,anio:e.valor}));try{const o=await W.get(t);A.value=o.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(s,e,t,o)=>{if(!t||!o.tipo||!o.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?a.valor=m:s.periodoSeleccionado==="mes"?a.valor=g:s.periodoSeleccionado==="anio"&&(a.valor=p);try{await z(t,a),s.titulo==="Castigos"?e==="pdf"?P(s.titulo,a):e==="excel"?B(s.titulo,a):e==="imprimir"&&imprimirReporte(s.titulo,a):w.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(s,e)=>{const t=new Z({orientation:"landscape"});let o;e.tipo==="semana"?o=`Semana ${e.valor}`:e.tipo==="mes"?o=N[e.valor-1]:(e.tipo,o=e.valor),t.setFontSize(12),t.text(`Reporte de ${s} - Período: ${o}`,14,20);const a=["Ruta","Fecha","Número Unidad","Socio/Prestador","Hora Inicio","Castigo","Hora Fin","Observaciones","Operador"],c=A.value.map(d=>{var ee;const y=d.ruta?d.ruta.nombreRuta:"N/A",S=d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",C=((ee=d.unidad)==null?void 0:ee.numeroUnidad)||"N/A",U=d.directivo?`${d.directivo.nombre_completo}`:"N/A",E=d.horaInicio?d.horaInicio.substring(0,5):"N/A",R=d.castigo||"N/A",T=d.horaFin?d.horaFin.substring(0,5):"Sin Registro",$=d.observaciones,H=d.operador?`${d.operador.nombre_completo}`:"N/A";return[y,S,C,U,E,R,T,$,H]});t.autoTable({head:[a],body:c,startY:24});const _=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});t.setFontSize(10),t.text(`Fecha de creación: ${_}`,14,t.internal.pageSize.height-10);const n=`${s}-${o}.pdf`;t.save(n)},B=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=`${s}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Inicio","Castigo","Hora Fin","Observaciones","Operador"]];A.value.forEach(n=>{var H;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=((H=n.unidad)==null?void 0:H.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.horaInicio?n.horaInicio.substring(0,5):"N/A",E=n.castigo||"N/A",R=n.horaFin?n.horaFin.substring(0,5):"Sin Registro",T=n.observaciones,$=n.operador?`${n.operador.nombre_completo}`:"N/A";a.push([d,y,S,C,U,E,R,T,$])});const c=F.book_new(),_=F.aoa_to_sheet(a);F.book_append_sheet(c,_,"Reporte_Castigos"),X(c,o)},M=[{titulo:"Castigos",periodo:"semana",periodoSeleccionado:"semana"}],Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(s,e)=>e+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-ie+1},(s,e)=>ie+e);let m=1,g=1,p=O;return(s,e)=>(i(),l(v,null,f(M,t=>r("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",$o,b(t.titulo),1),e[9]||(e[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",So,[e[6]||(e[6]=r("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>k.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=r("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=r("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(V.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,wo))),128))],512),[[h,k.unidad]])])])]),r("div",Ao,[r("div",ko,[e[8]||(e[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":o=>t.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,No),[[h,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>D(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(o,a)=>(i(),l("option",{key:a,value:o},"Semana "+b(o),9,Uo))),128))],512)),[[h,u(m)]]):t.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>D(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(o,a)=>r("option",{key:a,value:a+1},b(o),9,Co)),64))],512)),[[h,u(g)]]):t.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>D(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),o=>(i(),l("option",{key:o,value:o},b(o),9,Eo))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",Ro,[(i(),l(v,null,f(Y,o=>r("button",{key:o.tipo,class:j(o.clase),onClick:a=>K(t,o.tipo,k.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(o.icono+" mr-2 jump-icon")},null,2),Q(" "+b(o.texto),1)],10,To)),64))])])),64))}},Do={class:"text-lg font-bold"},Fo={class:"flex flex-wrap gap-4 mb-3"},Oo=["value"],Po={class:"flex flex-wrap gap-4 mb-3"},jo={class:"flex flex-wrap space-x-3 mb-2"},Vo=["onUpdate:modelValue"],zo=["value"],Ko=["value"],Bo=["value"],Mo={class:"flex flex-wrap space-x-3"},Yo=["onClick"],le=2024,tt={__name:"ReportesUltimasCorridas",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},ultimaCorrida:{type:Object,default:()=>({})}},setup(V){const A=I([]),k=J({unidad:null,operador:null}),z=async(s,e)=>{let t="";e.tipo==="semana"?t=route("reportes.UCSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?t=route("reportes.UCMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(t=route("reportes.UCAnio",{idUnidad:s,anio:e.valor}));try{const o=await W.get(t);A.value=o.data}catch{w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},K=async(s,e,t,o)=>{if(!t||!o.tipo||!o.valor){w.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?a.valor=m:s.periodoSeleccionado==="mes"?a.valor=g:s.periodoSeleccionado==="anio"&&(a.valor=p);try{await z(t,a),s.titulo==="Últimas Corridas"?e==="pdf"?P(s.titulo,a):e==="excel"?B(s.titulo,a):e==="imprimir"&&imprimirReporte(s.titulo,a):w.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),w.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},P=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=new Z({orientation:"landscape"});o.setFontSize(12),o.text(`Reporte de ${s} - Período: ${t}`,14,20);const a=A.value.map(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.tipo_ultima_corrida?n.tipo_ultima_corrida.tipoUltimaCorrida:"N/A",E=n.horaInicioUC?n.horaInicioUC.substring(0,5):"N/A",R=n.horaFinUC?n.horaFinUC.substring(0,5):"N/A",T=n.operador?`${n.operador.nombre_completo}`:"N/A";return[d,y,S,C,U,E,R,T]});o.autoTable({startY:24,head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Tipo Última Corrida","Hora Inicio","Hora Fin","Operador"]],body:a});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});o.setFontSize(10),o.text(`Fecha de creación: ${c}`,14,o.internal.pageSize.height-10);const _=`${s}-${t}.pdf`;o.save(_)},B=(s,e)=>{let t;e.tipo==="semana"?t=`Semana ${e.valor}`:e.tipo==="mes"?t=N[e.valor-1]:(e.tipo,t=e.valor);const o=`${s}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Tipo Última Corrida","Hora Inicio","Hora Fin","Operador"]];A.value.forEach(n=>{var $;const d=n.ruta?n.ruta.nombreRuta:"N/A",y=n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",S=(($=n.unidad)==null?void 0:$.numeroUnidad)||"N/A",C=n.directivo?`${n.directivo.nombre_completo}`:"N/A",U=n.tipo_ultima_corrida?n.tipo_ultima_corrida.tipoUltimaCorrida:"N/A",E=n.horaInicioUC?n.horaInicioUC.substring(0,5):"N/A",R=n.horaFinUC?n.horaFinUC.substring(0,5):"N/A",T=n.operador?`${n.operador.nombre_completo}`:"N/A";a.push([d,y,S,C,U,E,R,T])});const c=F.book_new(),_=F.aoa_to_sheet(a);F.book_append_sheet(c,_,"Reporte_Últimas_Corridas"),X(c,o)},M=[{titulo:"Últimas Corridas",periodo:"semana",periodoSeleccionado:"semana"}],Y=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],L=Array.from({length:52},(s,e)=>e+1),N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],O=new Date().getFullYear(),G=Array.from({length:O-le+1},(s,e)=>le+e);let m=1,g=1,p=O;return(s,e)=>(i(),l(v,null,f(M,t=>r("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[r("h3",Do,b(t.titulo),1),e[9]||(e[9]=r("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),r("div",Fo,[e[6]||(e[6]=r("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),r("div",null,[r("div",null,[x(r("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>k.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=r("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=r("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(V.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,Oo))),128))],512),[[h,k.unidad]])])])]),r("div",Po,[r("div",jo,[e[8]||(e[8]=r("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(r("select",{"onUpdate:modelValue":o=>t.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[r("option",{value:"semana"},"Semanal",-1),r("option",{value:"mes"},"Mensual",-1),r("option",{value:"anio"},"Anual",-1)]),8,Vo),[[h,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>D(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(L),(o,a)=>(i(),l("option",{key:a,value:o},"Semana "+b(o),9,zo))),128))],512)),[[h,u(m)]]):t.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>D(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(N,(o,a)=>r("option",{key:a,value:a+1},b(o),9,Ko)),64))],512)),[[h,u(g)]]):t.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>D(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(G),o=>(i(),l("option",{key:o,value:o},b(o),9,Bo))),128))],512)),[[h,u(p)]]):q("",!0)])]),r("div",Mo,[(i(),l(v,null,f(Y,o=>r("button",{key:o.tipo,class:j(o.clase),onClick:a=>K(t,o.tipo,k.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[r("i",{class:j(o.icono+" mr-2 jump-icon")},null,2),Q(" "+b(o.texto),1)],10,Yo)),64))])])),64))}};export{qo as _,Zo as a,Qo as b,Wo as c,Xo as d,tt as e,ot as f,et as g};
