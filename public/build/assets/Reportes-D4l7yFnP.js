import{_ as N,a as U,b as A,c as F,d as M,e as B,f as P,g as z}from"./ReportesUltimasCorridas-n8ssSyq2.js";import{_ as V}from"./ServicioLayout-Dzs-J1ED.js";import{_ as G}from"./ReporteOperadoresSinTrabajar-BiGoT1qB.js";import{S as H}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{u as h,w as I}from"./xlsx-DjuO7_Ju.js";import{r as J,o as x,h as v,y as E,b as i,t as w,F as O,n as T,k as K,I as Y,a as q,w as Q,d as s}from"./app-CP-1U-kK.js";import{E as W}from"./jspdf.plugin.autotable-B8eagL5W.js";/* empty css                                                               */const X={class:"text-lg font-bold"},Z={class:"flex flex-wrap space-x-3"},y=["onClick"],aa={__name:"ReportesMultasDominicales",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},entrada:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})}},setup(L){const a=J([]),$=()=>{const e=new Date,t=e.getDay(),d=t===0?0:t,n=new Date(e);return n.setDate(e.getDate()-d),n.toLocaleDateString()},u=[{titulo:"Multas Dominicales"}],R=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],c=e=>{if(!e)return"Sin registro";const[t,d]=e.split(":");return`${t}:${d}`},C=async(e,t)=>{console.log("Estoy en generar Archivo:");const d=$(),n=`${e.titulo} - ${d}`;try{const o=await Y.get(route("reporte.multasDominicales"));a.value=o.data,console.log("Datos obtenidos de la consulta:",a.value),t==="pdf"?D(n):t==="excel"&&k(n)}catch(o){console.error(o),H.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},l=e=>e?`${e.nombre} ${e.apellidoP} ${e.apellidoM}`:"Sin registro",D=e=>{const t=new W("landscape");t.setFontSize(12),t.text(`Reporte de ${e}`,14,20);const d=a.value.map(o=>{const r=o.numeroUnidad||"N/A",p=o.directivo?`${o.directivo.nombre_completo}`:"N/A",m=o.entradaSabado?c(o.entradaSabado.horaEntrada):"Sin registro",b=o.entradaSabado?l(o.entradaSabado.operador):"Sin registro",f=o.entradaSabado&&o.entradaSabado.ruta?o.entradaSabado.ruta.nombreRuta:"Sin registro",g=o.entradaLunesTemprana?c(o.entradaLunesTemprana.horaEntrada):"Sin registro",S=o.entradaLunesTemprana?l(o.entradaLunesTemprana.operador):"Sin registro",_=o.entradaLunesTemprana&&o.entradaLunesTemprana.ruta?o.entradaLunesTemprana.ruta.nombreRuta:"Sin registro";return[r,p,m,b,f,g,S,_]}),n=[["Numero Unidad","Socio/Prestador","Sábado (horaEntrada)","Operador (Sábado)","Ruta (Sábado)","Lunes (horaEntrada)","Operador (Lunes)","Ruta (Lunes)"]];t.autoTable({head:n,body:d,startY:24}),t.save(`${e}.pdf`)},k=e=>{const t=`${e}.xlsx`,d=[["Numero Unidad","Socio/Prestador","Sábado (horaEntrada)","Operador (Sábado)","Ruta (Sábado)","Lunes (horaEntrada)","Operador (Lunes)","Ruta (Lunes)","Justificado"]];a.value.forEach(r=>{const p=r.numeroUnidad||"N/A",m=r.directivo?`${r.directivo.nombre_completo}`:"N/A",b=r.entradaSabado?c(r.entradaSabado.horaEntrada):"Sin registro",f=r.entradaSabado?l(r.entradaSabado.operador):"Sin registro",g=r.entradaSabado&&r.entradaSabado.ruta?r.entradaSabado.ruta.nombreRuta:"Sin registro",S=r.entradaLunesTemprana?c(r.entradaLunesTemprana.horaEntrada):"Sin registro",_=r.entradaLunesTemprana?l(r.entradaLunesTemprana.operador):"Sin registro",j=r.entradaLunesTemprana&&r.entradaLunesTemprana.ruta?r.entradaLunesTemprana.ruta.nombreRuta:"Sin registro";d.push([p,m,b,f,g,S,_,j,""])});const n=h.book_new(),o=h.aoa_to_sheet(d);h.book_append_sheet(n,o,"Reporte_Multas"),I(n,t)};return(e,t)=>(x(),v(O,null,E(u,d=>i("div",{key:d.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[i("h3",X,w(d.titulo),1),t[0]||(t[0]=i("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),i("div",Z,[(x(),v(O,null,E(R,n=>i("button",{key:n.tipo,class:T(n.clase),onClick:o=>C(d,n.tipo)},[i("i",{class:T(n.icono+" mr-2 jump-icon")},null,2),K(" "+w(n.texto),1)],10,y)),64))])])),64))}},oa={class:"mt-1 bg-white p-4 shadow rounded-lg h-5/6"},ca={__name:"Reportes",props:{message:{String,default:""},color:{String,default:""},usuario:{type:Object},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},entrada:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})},ultimaCorrida:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})}},setup(L){const a=L;return($,u)=>(x(),q(V,{title:"Reportes",usuario:a.usuario},{default:Q(()=>[i("div",oa,[u[0]||(u[0]=i("h2",{class:"font-bold text-center text-xl pt-0 mb-2"},"Reportes",-1)),u[1]||(u[1]=i("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-2"},null,-1)),s(N,{unidad:a.unidad,operador:a.operador,entrada:a.entrada},null,8,["unidad","operador","entrada"]),s(U,{unidad:a.unidad,operador:a.operador,entrada:a.entrada},null,8,["unidad","operador","entrada"]),s(A,{unidad:a.unidad,operador:a.operador,corte:a.corte},null,8,["unidad","operador","corte"]),s(F,{unidad:a.unidad,operador:a.operador,corte:a.corte},null,8,["unidad","operador","corte"]),s(M,{unidad:a.unidad,operador:a.operador,corte:a.corte},null,8,["unidad","operador","corte"]),s(B,{unidad:a.unidad,operador:a.operador,tipoUltimaCorrida:a.tipoUltimaCorrida,ultimaCorrida:a.ultimaCorrida},null,8,["unidad","operador","tipoUltimaCorrida","ultimaCorrida"]),s(P,{unidad:a.unidad,operador:a.operador,castigo:a.castigo},null,8,["unidad","operador","castigo"]),s(z,{unidad:a.unidad,operador:a.operador},null,8,["unidad","operador"]),s(G,{unidad:a.unidad,operador:a.operador},null,8,["unidad","operador"]),s(aa,{unidad:a.unidad,entrada:a.entrada,corte:a.corte},null,8,["unidad","entrada","corte"])])]),_:1},8,["usuario"]))}};export{ca as default};
