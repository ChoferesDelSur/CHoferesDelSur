import{u as T,i as N,r as U,o as r,j as F,e as M,a as e,g as z,t as x,w as D,d as n,k as q,c as m,l as C,F as B,m as I,p as A,f as b,q as H,L as Q,D as V,s as Y,b as R}from"./app-efQr6Bw9.js";import"./buttons.print-C19jCs2s.js";import{S as G}from"./sweetalert2.all-_XGc1PfW.js";import{_ as Z}from"./Mensaje-DIWc4nSq.js";import{_ as ee}from"./ServicioLayout-ZhD6pN6W.js";import{_ as P}from"./Modal-DaiaiGkV.js";/* empty css                                                */import"./jspdf.plugin.autotable-Dt7B0CLS.js";const te={class:"mt-2 bg-white p-4 shadow rounded-lg"},de={class:"border-b border-gray-900/10 pb-12"},oe={class:"text-base font-semibold leading-7 text-gray-900"},ae=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios ")],-1),ie={class:"flex flex-wrap -mx-4"},se={class:"sm:col-span-2"},ne={class:"sm:col-span-1",hidden:""},re=e("label",{for:"idUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idUnidad",-1),le={class:"mt-2"},ce=["id"],ue={class:"sm:col-span-2 px-4"},me=e("label",{for:"numeroUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Número de unidad "),e("span",{class:"text-red-500"},"*")],-1),pe={class:"mt-2"},ge=["id"],be={key:0,class:"text-red-500 text-xs mt-1"},fe={class:"sm:col-span-2 px-4"},he=e("label",{for:"ruta",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Ruta "),e("span",{class:"text-red-500"},"*")],-1),xe={class:"mt-2"},ve=["id"],ye=e("option",{value:"",disabled:"",selected:""},"Seleccione la ruta",-1),_e=["value"],Ue={key:0,class:"text-red-500 text-xs mt-1"},$e={class:"sm:col-span-2 px-4"},we=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},"Operador",-1),Se={class:"mt-2"},ke=["id"],Oe=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador para esta unidad",-1),De=["value"],Ee={class:"sm:col-span-2 px-4"},Ce=e("label",{for:"directivo",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Dueño de la unidad "),e("span",{class:"text-red-500"},"*")],-1),je={class:"mt-2"},Be=["id"],Ie=e("option",{value:"",disabled:"",selected:""},"Seleccione al dueño de la unidad",-1),Ae=["value"],Re={key:0,class:"text-red-500 text-xs mt-1"},Me={class:"mt-6 flex items-center justify-end gap-x-6"},Ne=["id"],Te=e("i",{class:"fa-solid fa-ban"},null,-1),Fe=["disabled"],We=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Le={__name:"FormularioUnidades",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},ruta:{type:Object,default:()=>({})},directivo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:l}){const u=o,E=l,t=T({idUnidad:u.unidad.idUnidad,numeroUnidad:u.unidad.numeroUnidad,ruta:u.unidad.idRuta,operador:u.unidad.idOperador,directivo:u.directivo.idDirectivo});N(()=>u.unidad,async h=>{t.idUnidad=h.idUnidad,t.numeroUnidad=h.numeroUnidad,t.ruta=h.idRuta,t.operador=h.idOperador,t.directivo=h.idDirectivo},{deep:!0});const s=U(""),c=U("");U("");const f=U(""),w=async()=>{E("close"),t.reset()},y=h=>typeof h=="string"&&h.trim()!=="",S=h=>h!=null,_=async()=>{s.value=y(t.numeroUnidad)?"":"Ingrese el número de la unidad",c.value=S(t.ruta)?"":"Selecciones la ruta",f.value=S(t.directivo)?"":"Seleccione el dueño de la unidad",!(s.value||c.value||f.value)&&t.post(route("servicio.addUnidad"),{onSuccess:()=>{w(),s.value="",c.value="",f.value=""}})};return(h,d)=>(r(),F(P,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:w},{default:M(()=>[e("div",te,[e("form",{onSubmit:z(_,["prevent"])},[e("div",de,[e("h2",oe,x(o.title),1),ae,e("div",ie,[e("div",se,[e("div",ne,[re,e("div",le,[D(e("input",{type:"number",name:"idUnidad","onUpdate:modelValue":d[0]||(d[0]=a=>n(t).idUnidad=a),placeholder:"Ingrese id de la unidad",id:"idUnidad"+o.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ce),[[q,n(t).idUnidad]])])])]),e("div",ue,[me,e("div",pe,[D(e("input",{type:"text",name:"numeroUnidad",id:"numeroUnidad"+o.op,"onUpdate:modelValue":d[1]||(d[1]=a=>n(t).numeroUnidad=a),placeholder:"Ingrese el número de la unidad",class:"block w-60 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ge),[[q,n(t).numeroUnidad]])]),s.value!=""?(r(),m("div",be,x(s.value),1)):C("",!0)]),e("div",fe,[he,e("div",xe,[D(e("select",{name:"ruta",id:"ruta"+o.op,"onUpdate:modelValue":d[2]||(d[2]=a=>n(t).ruta=a),placeholder:"Seleccione la ruta",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ye,(r(!0),m(B,null,I(o.ruta,a=>(r(),m("option",{key:a.idRuta,value:a.idRuta},x(a.nombreRuta),9,_e))),128))],8,ve),[[A,n(t).ruta]])]),c.value!=""?(r(),m("div",Ue,x(c.value),1)):C("",!0)]),e("div",$e,[we,e("div",Se,[D(e("select",{name:"operador",id:"operador"+o.op,"onUpdate:modelValue":d[3]||(d[3]=a=>n(t).operador=a),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Oe,(r(!0),m(B,null,I(o.operadoresDisp,a=>(r(),m("option",{key:a.idOperador,value:a.idOperador},x(a.nombre_completo),9,De))),128))],8,ke),[[A,n(t).operador]])])]),e("div",Ee,[Ce,e("div",je,[D(e("select",{name:"directivo",id:"directivo"+o.op,"onUpdate:modelValue":d[4]||(d[4]=a=>n(t).directivo=a),placeholder:"Seleccione al dueño de la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Ie,(r(!0),m(B,null,I(o.directivo,a=>(r(),m("option",{key:a.idDirectivo,value:a.idDirectivo},x(a.nombre_completo),9,Ae))),128))],8,Be),[[A,n(t).directivo]])]),f.value!=""?(r(),m("div",Re,x(f.value),1)):C("",!0)])])]),e("div",Me,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:w},[Te,b(" Cancelar")],8,Ne),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},[We,b("Guardar")],8,Fe)])],32)])]),_:1},8,["show","max-width","closeable"]))}},qe={class:"mt-2 bg-white p-4 shadow rounded-lg"},ze={class:"border-b border-gray-900/10 pb-12"},Pe={class:"text-base font-semibold leading-7 text-gray-900"},Qe=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Modifique los datos según sea necesario y guarde los cambios. ",-1),Ge={class:"flex flex-wrap -mx-4"},He={class:"sm:col-span-2"},Ve={class:"sm:col-span-1",hidden:""},Xe=e("label",{for:"idUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idUnidad",-1),Je={class:"mt-2"},Ke=["id"],Ye={class:"sm:col-span-2 px-4"},Ze=e("label",{for:"numeroUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Número de unidad "),e("span",{class:"text-red-500"},"*")],-1),et={class:"mt-2"},tt=["id"],dt={key:0,class:"text-red-500 text-xs mt-1"},ot={class:"sm:col-span-2 px-4"},at=e("label",{for:"ruta",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Ruta "),e("span",{class:"text-red-500"},"*")],-1),it={class:"mt-2"},st=["id"],nt=e("option",{value:"",disabled:"",selected:""},"Seleccione la ruta",-1),rt=["value"],lt={key:0,class:"text-red-500 text-xs mt-1"},ct={class:"sm:col-span-2 px-4"},ut=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},"Operador",-1),mt={class:"mt-2"},pt={class:"block rounded-md py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6"},gt={class:"sm:col-span-2 px-4"},bt=e("label",{for:"directivo",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Dueño de la unidad "),e("span",{class:"text-red-500"},"*")],-1),ft={class:"mt-2"},ht=["id"],xt=e("option",{value:"",disabled:"",selected:""},"Seleccione al dueño de la unidad",-1),vt=["value"],yt={key:0,class:"text-red-500 text-xs mt-1"},_t={class:"mt-6 flex items-center justify-end gap-x-6"},Ut=["id"],$t=e("i",{class:"fa-solid fa-ban"},null,-1),wt=["disabled"],St=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),kt={__name:"FormularioActualizarUnidades",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},ruta:{type:Object,default:()=>({})},directivo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:l}){const u=o,E=l,t=T({_method:"PUT",idUnidad:u.unidad.idUnidad,numeroUnidad:u.unidad.numeroUnidad,ruta:u.unidad.idRuta,operador:u.unidad.idOperador,directivo:u.unidad.idDirectivo});N(()=>u.unidad,async d=>{t.idUnidad=d.idUnidad,t.numeroUnidad=d.numeroUnidad,t.ruta=d.idRuta,t.operador=d.idOperador,t.directivo=d.idDirectivo},{deep:!0});const s=U(""),c=U("");U("");const f=U(""),w=async()=>{E("close"),t.reset()},y=d=>typeof d=="string"&&d.trim()!=="",S=d=>d!=null,_=async()=>{if(s.value=y(t.numeroUnidad)?"":"Ingrese el número de la unidad",c.value=S(t.ruta)?"":"Selecciones la ruta",f.value=S(t.directivo)?"":"Seleccione el dueño de la unidad",!(s.value||c.value||f.value)){var d=document.getElementById("idUnidad2").value;t.post(route("servicio.actualizarUnidad",d),{onSuccess:()=>{w(),s.value="",c.value="",f.value=""}})}},h=d=>{const a=u.operador.find(i=>i.idOperador===d);return a?a.nombre_completo:"Operador no encontrado"};return(d,a)=>(r(),F(P,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:w},{default:M(()=>[e("div",qe,[e("form",{onSubmit:z(_,["prevent"])},[e("div",ze,[e("h2",Pe,x(o.title),1),Qe,e("div",Ge,[e("div",He,[e("div",Ve,[Xe,e("div",Je,[D(e("input",{type:"number",name:"idUnidad","onUpdate:modelValue":a[0]||(a[0]=i=>n(t).idUnidad=i),placeholder:"Ingrese id de la unidad",id:"idUnidad"+o.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ke),[[q,n(t).idUnidad]])])])]),e("div",Ye,[Ze,e("div",et,[D(e("input",{type:"text",name:"numeroUnidad",id:"numeroUnidad"+o.op,"onUpdate:modelValue":a[1]||(a[1]=i=>n(t).numeroUnidad=i),placeholder:"Ingrese el número de la unidad",class:"block w-60 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,tt),[[q,n(t).numeroUnidad]])]),s.value!=""?(r(),m("div",dt,x(s.value),1)):C("",!0)]),e("div",ot,[at,e("div",it,[D(e("select",{name:"ruta",id:"ruta"+o.op,"onUpdate:modelValue":a[2]||(a[2]=i=>n(t).ruta=i),placeholder:"Seleccione la ruta",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[nt,(r(!0),m(B,null,I(o.ruta,i=>(r(),m("option",{key:i.idRuta,value:i.idRuta},x(i.nombreRuta),9,rt))),128))],8,st),[[A,n(t).ruta]])]),c.value!=""?(r(),m("div",lt,x(c.value),1)):C("",!0)]),e("div",ct,[ut,e("div",mt,[e("p",pt,x(h(n(t).operador)),1)])]),e("div",gt,[bt,e("div",ft,[D(e("select",{name:"directivo",id:"directivo"+o.op,"onUpdate:modelValue":a[3]||(a[3]=i=>n(t).directivo=i),placeholder:"Seleccione al dueño de la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[xt,(r(!0),m(B,null,I(o.directivo,i=>(r(),m("option",{key:i.idDirectivo,value:i.idDirectivo},x(i.nombre_completo),9,vt))),128))],8,ht),[[A,n(t).directivo]])]),f.value!=""?(r(),m("div",yt,x(f.value),1)):C("",!0)])])]),e("div",_t,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:w},[$t,b(" Cancelar")],8,Ut),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},[St,b("Guardar")],8,wt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Ot={class:"mt-2 bg-white p-4 shadow rounded-lg"},Dt={class:"border-b border-gray-900/10 pb-12"},Et={class:"text-base font-semibold leading-7 text-gray-900"},Ct=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder asignar un operador a una unidad. ",-1),jt={class:"flex flex-wrap -mx-4"},Bt={class:"sm:col-span-2 px-4"},It=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1),At={class:"mt-2"},Rt=["id"],Mt=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Nt=["value"],Tt={key:0,class:"text-red-500 text-xs mt-1"},Ft={class:"sm:col-span-2 px-4"},Wt=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Operador "),e("span",{class:"text-red-500"},"*")],-1),Lt={class:"mt-2"},qt=["id"],zt=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador para esta unidad",-1),Pt=["value"],Qt={key:0,class:"text-red-500 text-xs mt-1"},Gt={class:"mt-6 flex items-center justify-end gap-x-6"},Ht=["id"],Vt=e("i",{class:"fa-solid fa-ban"},null,-1),Xt=["disabled"],Jt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Kt={__name:"FormularioAsignarOperador",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},unidadesDisp:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:l}){const u=o,E=l,t=T({idUnidad:u.unidad.idUnidad,unidad:u.unidad.idUnidad,operador:u.unidad.idOperador});N(()=>u.unidad,async d=>{t.idUnidad=d.idUnidad,t.unidad=d.idUnidad,t.operador=d.idOperador},{deep:!0});const s=U(""),c=U(""),f=H(()=>{const d=u.unidadesDisp.find(a=>a.idUnidad===t.unidad);return d?d.idDirectivo:null}),w=H(()=>{const d=f.value;return d?u.operadoresDisp.filter(a=>a.idDirectivo===d).sort((a,i)=>a.nombre_completo.localeCompare(i.nombre_completo)):[]});N(()=>t.unidad,d=>{t.operador="",c.value=""},{deep:!0});const y=async()=>{E("close"),t.reset()},S=d=>d!=null,_=async()=>{s.value=S(t.unidad)?"":"Seleccione la unidad",c.value=S(t.operador)?"":"Seleccione el operador",!(s.value||c.value)&&t.post(route("servicio.asignarOperador"),{onSuccess:()=>{y(),s.value="",c.value=""}})},h=async()=>{if(numeroUnidadError.value=S(t.unidad)?"":"Seleccione la unidad",c.value=S(t.operador)?"":"Seleccione el operador",!(s.value||c.value)){var d=document.getElementById("idUnidad2").value;console.log("idUnidad:"+d),t.put(route("principal.actualizarUnidad",d),{onSuccess:()=>{y(),console.log("idUnidad Editando:"+d),s.value="",c.value=""}})}};return(d,a)=>(r(),F(P,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:y},{default:M(()=>[e("div",Ot,[e("form",{onSubmit:a[2]||(a[2]=z(i=>o.op==="1"?_():h(),["prevent"]))},[e("div",Dt,[e("h2",Et,x(o.title),1),Ct,e("div",jt,[e("div",Bt,[It,e("div",At,[D(e("select",{name:"unidad",id:"unidad"+o.op,"onUpdate:modelValue":a[0]||(a[0]=i=>n(t).unidad=i),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Mt,(r(!0),m(B,null,I(o.unidadesDisp,i=>(r(),m("option",{key:i.idUnidad,value:i.idUnidad},x(i.numeroUnidad),9,Nt))),128))],8,Rt),[[A,n(t).unidad]])]),s.value!=""?(r(),m("div",Tt,x(s.value),1)):C("",!0)]),e("div",Ft,[Wt,e("div",Lt,[D(e("select",{name:"operador",id:"operador"+o.op,"onUpdate:modelValue":a[1]||(a[1]=i=>n(t).operador=i),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[zt,(r(!0),m(B,null,I(w.value,i=>(r(),m("option",{key:i.idOperador,value:i.idOperador},x(i.nombre_completo),9,Pt))),128))],8,qt),[[A,n(t).operador]])]),c.value!=""?(r(),m("div",Qt,x(c.value),1)):C("",!0)])])]),e("div",Gt,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:y},[Vt,b(" Cancelar")],8,Ht),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},[Jt,b("Guardar")],8,Xt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Yt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Zt={class:"border-b border-gray-900/10 pb-12"},ed={class:"text-base font-semibold leading-7 text-gray-900"},td=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Seleccione la unidad a la que le quiere quitar el operador. ",-1),dd={class:"flex flex-wrap -mx-4"},od={class:"sm:col-span-2 px-4"},ad=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1),id={class:"mt-2"},sd=["id"],nd=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),rd=["value"],ld={key:0,class:"text-red-500 text-xs mt-1"},cd={class:"mt-6 flex items-center justify-end gap-x-6"},ud=["id"],md=e("i",{class:"fa-solid fa-ban"},null,-1),pd=["disabled"],gd=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),bd={__name:"FormularioQuitarOperador",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:l}){const u=o,E=l,t=T({idUnidad:u.unidad.idUnidad,unidad:u.unidad.idUnidad,operador:u.unidad.idOperador});N(()=>u.unidad,async _=>{t.idUnidad=_.idUnidad,t.unidad=_.idUnidad,t.operador=_.idOperador},{deep:!0});const s=U(""),c=U(""),f=async()=>{E("close"),t.reset()},w=_=>_!=null,y=async()=>{s.value=w(t.unidad)?"":"Seleccione la unidad",!s.value&&t.post(route("servicio.quitarOperador"),{onSuccess:()=>{f(),s.value=""}})},S=async()=>{if(numeroUnidadError.value=w(t.unidad)?"":"Seleccione la unidad",c.value=w(t.operador)?"":"Seleccione el operador",!(s.value||c.value)){var _=document.getElementById("idUnidad2").value;console.log("idUnidad:"+_),t.put(route("servicio.actualizarUnidad",_),{onSuccess:()=>{f(),console.log("idUnidad Editando:"+_),s.value="",c.value=""}})}};return(_,h)=>(r(),F(P,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:f},{default:M(()=>[e("div",Yt,[e("form",{onSubmit:h[1]||(h[1]=z(d=>o.op==="1"?y():S(),["prevent"]))},[e("div",Zt,[e("h2",ed,x(o.title),1),td,e("div",dd,[e("div",od,[ad,e("div",id,[D(e("select",{name:"unidad",id:"unidad"+o.op,"onUpdate:modelValue":h[0]||(h[0]=d=>n(t).unidad=d),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[nd,(r(!0),m(B,null,I(o.unidadesConOperador,d=>(r(),m("option",{key:d.idUnidad,value:d.idUnidad},x(d.numeroUnidad),9,rd))),128))],8,sd),[[A,n(t).unidad]])]),s.value!=""?(r(),m("div",ld,x(s.value),1)):C("",!0)])])]),e("div",cd,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[md,b(" Cancelar")],8,ud),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},[gd,b("Guardar")],8,pd)])],32)])]),_:1},8,["show","max-width","closeable"]))}},fd={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},hd=e("h2",{class:"font-bold text-center text-xl pt-0"},"Unidades",-1),xd=e("div",{class:"my-1"},null,-1),vd=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-3"},null,-1),yd={class:"py-3 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0"},_d=e("i",{class:"fa fa-plus mr-2"},null,-1),Ud=e("i",{class:"fa fa-trash mr-2"},null,-1),$d=e("i",{class:"fa fa-male","aria-hidden":"true"},null,-1),wd=e("i",{class:"fa fa-male","aria-hidden":"true"},null,-1),Sd=e("thead",null,[e("tr",{class:"text-sm leading-normal"},[e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," ID "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Número de Unidad "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Operador "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Ruta "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Dueño de la unidad ")])],-1),W="xl",L=!0,Ad={__name:"Unidades",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object},ruta:{type:Object},operador:{type:Object},directivo:{type:Object},operadoresDisp:{type:Object},unidadesDisp:{type:Object},unidadesConOperador:{type:Object},usuario:{type:Object}},setup(o){Q.use(V),Q.use(V);const l=o,u=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Unidades registradas",extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[2,3,4,5,6]}},{title:"Unidades registradas",extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i> PDF',className:"bg-red-500 hover:bg-red-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",orientation:"landscape",exportOptions:{columns:[2,3,4,5,6]}},{title:"Unidades registradas",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[2,3,4,5,6]}}],E=[{data:null,render:function(p,g,v,k){return""}},{data:null,render:function(p,g,v,k){return`<input type="checkbox" class="unidades-checkboxes" data-id="${v.idUnidad}" ">`}},{data:null,render:function(p,g,v,k){return k.row+1}},{data:"numeroUnidad"},{data:"idOperador",render:function(p,g,v,k){if(p){const O=l.operador.find(j=>j.idOperador===p);return O?O.nombre_completo:""}else return'<span style="color: red;">Sin asignar</span>'}},{data:"idRuta",render:function(p,g,v,k){const O=l.ruta.find(j=>j.idRuta===p);return O?O.nombreRuta:""}},{data:"idDirectivo",render:function(p,g,v,k){const O=l.directivo.find(j=>j.idDirectivo===p);return O?O.nombre_completo:""}},{data:null,render:function(p,g,v,k){return`<button class="editar-button" data-id="${v.idUnidad}" style="display: flex; justify-content: center;"><i class="fa fa-pencil"></i></button>`}}],t=U(!1),s=U(!1),c=U(!1),f=U(!1),w=T({_method:"DELETE"}),y=U([]);var S={};const _=p=>{S=p,f.value=!0},h=()=>{t.value=!1},d=()=>{s.value=!1},a=()=>{c.value=!1},i=()=>{f.value=!1},X=p=>{y.value.includes(p)?y.value=y.value.filter(v=>v!==p):y.value.push(p);const g=document.getElementById("eliminarABtn");y.value.length>0?g.removeAttribute("disabled"):g.setAttribute("disabled","")};Y(()=>{document.getElementById("unidadesTablaId").addEventListener("click",p=>{const g=p.target;if(g.classList.contains("unidades-checkboxes")){const v=parseInt(g.getAttribute("data-id"));if(l.unidad){const k=l.unidad.find(O=>O.idUnidad===v);k?X(k):console.log("No se tiene unidad")}}}),$("#unidadesTablaId").on("click",".editar-button",function(){const p=$(this).data("id"),g=l.unidad.find(v=>v.idUnidad===p);_(g)})});const J=()=>{const p=G.mixin({buttonsStyling:!0}),g=y.value.map(v=>v.numeroUnidad).join(", ");p.fire({title:"¿Estas seguro que deseas eliminar la(s) unidad(es) seleccionada(s)?",html:`Unidades seleccionadas: ${g}`,icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Confirmar',cancelButtonText:'<i class="fa-solid fa-ban"></i> Cancelar'}).then(async v=>{if(v.isConfirmed)try{const O=y.value.map(K=>K.idUnidad).join(",");await w.post(route("servicio.eliminarUnidad",O)),y.value=[];const j=document.getElementById("eliminarABtn");y.value.length>0?j.removeAttribute("disabled"):j.setAttribute("disabled",""),G.fire({title:"Unidad(es) eliminado(s) correctamente",icon:"success"}),window.flash={message:"Unidad(es) eliminado(s) correctamente",color:"green"}}catch(k){console.log("Error al eliminar varias unidades: "+k),G.fire({title:"Error",text:"Hubo un error al eliminar las unidades. Por favor, inténtalo de nuevo más tarde.",icon:"error"})}})};return(p,g)=>(r(),F(ee,{title:"Formar Unidades",usuario:l.usuario},{default:M(()=>[e("div",fd,[hd,xd,vd,R(Z),e("div",yd,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:g[0]||(g[0]=v=>t.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[_d,b("Agregar Unidad ")]),e("button",{id:"eliminarABtn",disabled:"",class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:J},[Ud,b("Borrar Unidad ")]),e("button",{class:"bg-cyan-500 hover:bg-cyan-500 text-white font-semibold py-2 px-4 rounded",onClick:g[1]||(g[1]=v=>s.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[$d,b(" Asignar Operador ")]),e("button",{class:"bg-orange-500 hover:bg-orange-500 text-white font-semibold py-2 px-4 rounded",onClick:g[2]||(g[2]=v=>c.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[wd,b(" Quitar Operador ")])]),e("div",null,[R(n(Q),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"unidadesTablaId",name:"unidadesTablaId",columns:E,data:o.unidad,options:{responsive:!0,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"Ultimo"}},buttons:[u],pageLength:20}},{default:M(()=>[Sd]),_:1},8,["data","options"])])]),R(Le,{show:t.value,"max-width":W,closeable:L,onClose:h,title:"Añadir unidad",op:"1",modal:"modalCreate",unidad:l.unidad,ruta:l.ruta,operadoresDisp:l.operadoresDisp,directivo:l.directivo},null,8,["show","unidad","ruta","operadoresDisp","directivo"]),R(kt,{show:f.value,"max-width":W,closeable:L,onClose:i,title:"Editar unidad",op:"2",modal:"modalEdit",unidad:n(S),ruta:l.ruta,operador:l.operador,operadoresDisp:l.operadoresDisp,directivo:l.directivo},null,8,["show","unidad","ruta","operador","operadoresDisp","directivo"]),R(Kt,{show:s.value,"max-width":W,closeable:L,onClose:d,title:"Asignar operador",op:"1",modal:"modalCreate",unidad:l.unidad,unidadesDisp:l.unidadesDisp,operadoresDisp:l.operadoresDisp},null,8,["show","unidad","unidadesDisp","operadoresDisp"]),R(bd,{show:c.value,"max-width":W,closeable:L,onClose:a,title:"Quitar operador",op:"1",modal:"modalCreate",unidad:l.unidad,unidadesConOperador:l.unidadesConOperador,operadoresDisp:l.operadoresDisp},null,8,["show","unidad","unidadesConOperador","operadoresDisp"])]),_:1},8,["usuario"]))}};export{Ad as default};
