import{u as L,i as U,r as w,o as b,j as W,e as R,a as e,g as X,t as I,f as m,w as O,d as r,k as S,c as k,l as E,F as Z,m as V,p as ee,C as P,D as K,s as te,b as M,x as Q}from"./app-rRhl06t3.js";import"./buttons.print-CddyeSNB.js";import{S as z}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{_ as oe}from"./Mensaje-fgKVnvPz.js";import{_ as ie}from"./RHLayout-BFRIXXsP.js";import{_ as Y}from"./Modal-Do11BPmC.js";import{E as se}from"./jspdf.plugin.autotable-DFsutX7P.js";import{u as q,w as de}from"./xlsx-DjuO7_Ju.js";/* empty css                                                */const ne={class:"mt-2 bg-white p-4 shadow rounded-lg"},re={class:"border-b border-gray-900/10 pb-12"},le={class:"text-2xl font-semibold leading-7 text-gray-900"},ce={class:"flex flex-wrap -mx-4"},pe={class:"md:col-span-2"},me={class:"sm:col-span-2",hidden:""},ue={class:"mt-1"},ge=["id"],fe={class:"sm:col-span-2 px-2"},be={class:"mt-2"},xe={key:0,class:"text-red-500 text-xs mt-1"},he={class:"sm:col-span-2 px-2"},ye={class:"mt-2"},ve={key:0,class:"text-red-500 text-xs mt-1"},Ie={class:"sm:col-span-2 px-2"},we={class:"mt-2"},De={key:0,class:"text-red-500 text-xs mt-1"},_e={class:"sm:col-span-2 px-2"},ke={class:"mt-2"},$e={key:0,class:"text-red-500 text-xs mt-1"},Oe={class:"sm:col-span-2 px-4"},Fe={class:"mt-2"},Se=["id"],Ee=["value"],je={key:0,class:"text-red-500 text-xs mt-1"},Ce={class:"mt-6 flex items-center justify-end gap-x-6"},Te=["id"],Ne=["disabled"],Ae={__name:"FormularioIncapacidad",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresAlta:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(l,{emit:u}){const c=l,C=u,a=L({idIncapacidad:c.incapacidad.idIncapacidad,motivo:c.incapacidad.motivo,numeroDias:c.incapacidad.numeroDias,fechaInicio:c.incapacidad.fechaInicio,fechaFin:c.incapacidad.fechaFin,chofer:c.incapacidad.idOperador});U(()=>c.operador,async t=>{a.idOperador=t.idOperador,a.motivo=t.motivo,a.numeroDias=t.numeroDias,a.fechaInicio=t.fechaInicio,a.fechaFin=t.fechaFin,a.chofer=t.idOperador},{deep:!0}),U([()=>a.numeroDias,()=>a.fechaInicio],([t,o])=>{if(t&&o){const i=new Date(o),s=new Date(i);s.setDate(i.getDate()+parseInt(t,10)),a.fechaFin=s.toISOString().split("T")[0]}});const g=w(""),f=w(""),x=w(""),h=w(""),y=w(""),d=async()=>{C("close"),a.reset()},D=t=>typeof t=="string"&&t.trim()!=="",T=t=>t!=null,A=t=>t==null?!1:Number.isInteger(t)&&t>=0,N=t=>!(t==null||((typeof t=="string"||t instanceof String)&&(t=new Date(t)),!(t instanceof Date))||isNaN(t.getTime())),n=async()=>{g.value=D(a.motivo)?"":"Ingrese el motivo de la incapacidad",f.value=A(a.numeroDias)?"":"Ingrese el número de días de incapacidad",x.value=N(a.fechaInicio)?"":"Ingrese la fecha de inicio de incapacidad",h.value=N(a.fechaFin)?"":"Ingrese la fecha de fin de incapacidad",y.value=T(a.chofer)?"":"Seleccione a un operador",!(g.value||f.value||x.value||h.value||y.value)&&a.post(route("rh.addIncapacidad"),{onSuccess:()=>{d(),g.value="",f.value="",x.value="",h.value="",y.value=""}})};return(t,o)=>(b(),W(Y,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:d},{default:R(()=>[e("div",ne,[e("form",{onSubmit:X(n,["prevent"])},[e("div",re,[e("h1",le,I(l.title),1),o[13]||(o[13]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},[m("Rellene el formulario para poder registrar una incapacidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1)),e("div",ce,[e("div",pe,[e("div",me,[o[6]||(o[6]=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1)),e("div",ue,[O(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":o[0]||(o[0]=i=>r(a).idIncapacidad=i),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+l.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ge),[[S,r(a).idIncapacidad]])])])]),e("div",fe,[o[7]||(o[7]=e("label",{for:"motivo",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Motivo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",be,[O(e("input",{type:"text",name:"motivo","onUpdate:modelValue":o[1]||(o[1]=i=>r(a).motivo=i),placeholder:"Ingrese el motivo de la incapacidad",class:"block w-64 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).motivo]])]),g.value!=""?(b(),k("div",xe,I(g.value),1)):E("",!0)]),e("div",he,[o[8]||(o[8]=e("label",{for:"numeroDias",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Número de Días "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ye,[O(e("input",{type:"number",name:"numeroDias","onUpdate:modelValue":o[2]||(o[2]=i=>r(a).numeroDias=i),placeholder:"Ingrese el número de días",class:"block w-32 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).numeroDias]])]),f.value!=""?(b(),k("div",ve,I(f.value),1)):E("",!0)]),e("div",Ie,[o[9]||(o[9]=e("label",{for:"fechaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",we,[O(e("input",{type:"date",name:"fechaInicio","onUpdate:modelValue":o[3]||(o[3]=i=>r(a).fechaInicio=i),placeholder:"Ingrese la fecha de inicio",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).fechaInicio]])]),x.value!=""?(b(),k("div",De,I(x.value),1)):E("",!0)]),e("div",_e,[o[10]||(o[10]=e("label",{for:"fechaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ke,[O(e("input",{type:"date",name:"fechaFin","onUpdate:modelValue":o[4]||(o[4]=i=>r(a).fechaFin=i),placeholder:"Ingrese la fecha de fin",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).fechaFin]])]),h.value!=""?(b(),k("div",$e,I(h.value),1)):E("",!0)]),e("div",Oe,[o[12]||(o[12]=e("label",{for:"chofer",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Operador "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Fe,[O(e("select",{name:"chofer",id:"chofer"+l.op,"onUpdate:modelValue":o[5]||(o[5]=i=>r(a).chofer=i),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[o[11]||(o[11]=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador para esta unidad",-1)),(b(!0),k(Z,null,V(l.operadoresAlta,i=>(b(),k("option",{key:i.idOperador,value:i.idOperador},I(i.nombre_completo),9,Ee))),128))],8,Se),[[ee,r(a).chofer]])]),y.value!=""?(b(),k("div",je,I(y.value),1)):E("",!0)])])]),e("div",Ce,[e("button",{type:"button",id:"cerrar"+l.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:d},o[14]||(o[14]=[e("i",{class:"fa-solid fa-ban"},null,-1),m(" Cancelar")]),8,Te),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:r(a).processing},o[15]||(o[15]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),m("Guardar")]),8,Ne)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Be={class:"mt-2 bg-white p-4 shadow rounded-lg"},Me={class:"border-b border-gray-900/10 pb-12"},Ue={class:"text-2xl font-semibold leading-7 text-gray-900"},Re={class:"flex flex-wrap -mx-4"},Le={class:"md:col-span-2"},We={class:"sm:col-span-2",hidden:""},Pe={class:"mt-1"},ze=["id"],qe={class:"sm:col-span-2 px-2"},Ge={class:"mt-2"},He={key:0,class:"text-red-500 text-xs mt-1"},Xe={class:"sm:col-span-2 px-2"},Ye={class:"mt-2"},Je={key:0,class:"text-red-500 text-xs mt-1"},Ke={class:"sm:col-span-2 px-2"},Qe={class:"mt-2"},Ze={key:0,class:"text-red-500 text-xs mt-1"},Ve={class:"sm:col-span-2 px-2"},ea={class:"mt-2"},aa={key:0,class:"text-red-500 text-xs mt-1"},ta={class:"sm:col-span-2 px-4"},oa={class:"mt-2"},ia={class:"block rounded-md py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6"},sa={class:"mt-6 flex items-center justify-end gap-x-6"},da=["id"],na=["disabled"],ra={__name:"FormularioActualizarIncapacidad",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresAlta:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(l,{emit:u}){const c=l,C=u;w({motivo:"",numeroDias:"",fechaInicio:"",fechaFin:""});const a=L({_method:"PUT",idIncapacidad:c.incapacidad.idIncapacidad,motivo:c.incapacidad.motivo,numeroDias:c.incapacidad.numeroDias,fechaInicio:c.incapacidad.fechaInicio,fechaFin:c.incapacidad.fechaFin,operador:c.incapacidad.idOperador});U(()=>c.incapacidad,async n=>{a.idIncapacidad=n.idIncapacidad,a.motivo=n.motivo,a.numeroDias=n.numeroDias,a.fechaInicio=n.fechaInicio,a.fechaFin=n.fechaFin,a.operador=n.idOperador},{deep:!0}),U([()=>a.numeroDias,()=>a.fechaInicio],([n,t])=>{if(n&&t){const o=new Date(t),i=new Date(o);i.setDate(o.getDate()+parseInt(n,10)),a.fechaFin=i.toISOString().split("T")[0]}});const g=w(""),f=w(""),x=w(""),h=w("");w("");const y=async()=>{C("close"),a.reset()},d=n=>typeof n=="string"&&n.trim()!=="",D=n=>n==null?!1:Number.isInteger(n)&&n>=0,T=n=>!(n==null||((typeof n=="string"||n instanceof String)&&(n=new Date(n)),!(n instanceof Date))||isNaN(n.getTime())),A=async()=>{g.value=d(a.motivo)?"":"Ingrese el motivo de la incapacidad",f.value=D(a.numeroDias)?"":"Ingrese el número de días de incapacidad",x.value=T(a.fechaInicio)?"":"Ingrese la fecha de inicio de incapacidad",h.value=T(a.fechaFin)?"":"Ingrese la fecha de fin de incapacidad",!(g.value||f.value||x.value||h.value)&&a.post(route("rh.actualizarIncapacidad",a.idIncapacidad),{onSuccess:()=>{y(),g.value="",f.value="",x.value="",h.value=""}})},N=n=>{const t=c.operador.find(o=>o.idOperador===n);return t?t.nombre_completo:"Operador no encontrado"};return(n,t)=>(b(),W(Y,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:y},{default:R(()=>[e("div",Be,[e("form",{onSubmit:X(A,["prevent"])},[e("div",Me,[e("h1",Ue,I(l.title),1),t[11]||(t[11]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},[m("Rellene el formulario para poder registrar una incapacidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1)),e("div",Re,[e("div",Le,[e("div",We,[t[5]||(t[5]=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1)),e("div",Pe,[O(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":t[0]||(t[0]=o=>r(a).idIncapacidad=o),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+l.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ze),[[S,r(a).idIncapacidad]])])])]),e("div",qe,[t[6]||(t[6]=e("label",{for:"motivo",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Motivo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ge,[O(e("input",{type:"text",name:"motivo","onUpdate:modelValue":t[1]||(t[1]=o=>r(a).motivo=o),placeholder:"Ingrese el motivo de la incapacidad",class:"block w-64 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).motivo]])]),g.value!=""?(b(),k("div",He,I(g.value),1)):E("",!0)]),e("div",Xe,[t[7]||(t[7]=e("label",{for:"numeroDias",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Número de Días "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ye,[O(e("input",{type:"number",name:"numeroDias","onUpdate:modelValue":t[2]||(t[2]=o=>r(a).numeroDias=o),placeholder:"Ingrese el número de días",class:"block w-32 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).numeroDias]])]),f.value!=""?(b(),k("div",Je,I(f.value),1)):E("",!0)]),e("div",Ke,[t[8]||(t[8]=e("label",{for:"fechaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Qe,[O(e("input",{type:"date",name:"fechaInicio","onUpdate:modelValue":t[3]||(t[3]=o=>r(a).fechaInicio=o),placeholder:"Ingrese la fecha de inicio",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).fechaInicio]])]),x.value!=""?(b(),k("div",Ze,I(x.value),1)):E("",!0)]),e("div",Ve,[t[9]||(t[9]=e("label",{for:"fechaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Fecha de Fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ea,[O(e("input",{type:"date",name:"fechaFin","onUpdate:modelValue":t[4]||(t[4]=o=>r(a).fechaFin=o),placeholder:"Ingrese la fecha de fin",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,r(a).fechaFin]])]),h.value!=""?(b(),k("div",aa,I(h.value),1)):E("",!0)]),e("div",ta,[t[10]||(t[10]=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},"Operador",-1)),e("div",oa,[e("p",ia,I(N(r(a).operador)),1)])])])]),e("div",sa,[e("button",{type:"button",id:"cerrar"+l.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:y},t[12]||(t[12]=[e("i",{class:"fa-solid fa-ban"},null,-1),m(" Cancelar")]),8,da),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:r(a).processing},t[13]||(t[13]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),m("Guardar")]),8,na)])],32)])]),_:1},8,["show","max-width","closeable"]))}},la={class:"mt-2 bg-white p-4 shadow rounded-lg"},ca={class:"border-b border-gray-900/10 pb-12"},pa={class:"text-2xl font-semibold leading-7 text-gray-900"},ma={class:"flex flex-wrap -mx-4"},ua={class:"md:col-span-2"},ga={class:"sm:col-span-2",hidden:""},fa={class:"mt-1"},ba=["id"],xa={class:"sm:col-span-2 px-4"},ha={class:"mt-2"},ya=["id"],va=["value"],Ia={key:0,class:"text-red-500 text-xs mt-1"},wa={class:"mt-6 flex items-center justify-end gap-x-6"},Da=["id"],_a=["disabled"],ka={__name:"FormularioReincorporar",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresIncapacidad:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(l,{emit:u}){const c=l,C=u,a=L({_method:"PUT",idIncapacidad:c.incapacidad.idIncapacidad,chofer:c.incapacidad.idOperador,idOperador:c.operador.idOperador});U(()=>c.operador,async y=>{a.idOperador=y.idOperador,a.chofer=y.idOperador},{deep:!0});const g=w(""),f=async()=>{C("close"),a.reset()},x=y=>y!=null,h=async()=>{g.value=x(a.chofer)?"":"Seleccione a un operador",!g.value&&a.post(route("rh.reincorporar"),{onSuccess:()=>{f(),g.value=""}})};return(y,d)=>(b(),W(Y,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:f},{default:R(()=>[e("div",la,[e("form",{onSubmit:X(h,["prevent"])},[e("div",ca,[e("h1",pa,I(l.title),1),d[5]||(d[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},"Seleccione al operador que haya termiando sus días de incapacidad y que vuelve a reincorporarse. ",-1)),e("div",ma,[e("div",ua,[e("div",ga,[d[2]||(d[2]=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1)),e("div",fa,[O(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":d[0]||(d[0]=D=>r(a).idIncapacidad=D),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+l.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ba),[[S,r(a).idIncapacidad]])])])]),e("div",xa,[d[4]||(d[4]=e("label",{for:"chofer",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Operador "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ha,[O(e("select",{name:"chofer",id:"chofer"+l.op,"onUpdate:modelValue":d[1]||(d[1]=D=>r(a).chofer=D),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[d[3]||(d[3]=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador",-1)),(b(!0),k(Z,null,V(l.operadoresIncapacidad,D=>(b(),k("option",{key:D.idOperador,value:D.idOperador},I(D.nombre_completo),9,va))),128))],8,ya),[[ee,r(a).chofer]])]),g.value!=""?(b(),k("div",Ia,I(g.value),1)):E("",!0)])])]),e("div",wa,[e("button",{type:"button",id:"cerrar"+l.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:f},d[6]||(d[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),m(" Cancelar")]),8,Da),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:r(a).processing},d[7]||(d[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),m("Guardar")]),8,_a)])],32)])]),_:1},8,["show","max-width","closeable"]))}},$a={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},Oa={class:"py-3 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0"},G="xl",H=!0,Ma={__name:"Incapacidades",props:{message:{String,default:""},color:{String,default:""},operador:{type:Object},incapacidad:{type:Object},directivo:{type:Object},usuario:{type:Object},operadoresAlta:{type:Object},operadoresIncapacidad:{type:Object}},setup(l){P.use(K),P.use(K);const u=l,c=(i="Documento")=>{const s=new se("landscape");s.setFontSize(12),s.text(i,14,22);const p=new Date().toLocaleDateString();s.setFontSize(8),s.text(`Fecha: ${p}`,260,22);const v=["ID","Operador","Motivo de Incapacidad","Número de Días","Fecha de Inicio","Fecha de Fin"],_=[];Q(()=>{$("#incapacidadesTablaId").DataTable().rows({search:"applied"}).data().each(j=>{var J;_.push([j.idIncapacidad,((J=u.operador.find(ae=>ae.idOperador===j.idOperador))==null?void 0:J.nombre_completo)||"",j.motivo,j.numeroDias,j.fechaInicio,j.fechaFin])}),s.autoTable({head:[v],body:_,startY:24}),s.save(`${i}.pdf`)})},C=()=>{Q(()=>{const p=$("#incapacidadesTablaId").DataTable().rows({search:"applied"}).data().toArray().map(F=>{var B;return{ID:F.idIncapacidad,Operador:((B=u.operador.find(j=>j.idOperador===F.idOperador))==null?void 0:B.nombre_completo)||"","Motivo de Incapacidad":F.motivo,"Número de Días":F.numeroDias,"Fecha de Inicio":F.fechaInicio,"Fecha de Fin":F.fechaFin}}),v=q.json_to_sheet(p),_=q.book_new();q.book_append_sheet(_,v,"Incapacidades Registrados"),de(_,"Incapacidades Registrados.xlsx")})},a=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Directivos registrados",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>C()},{title:"Directivos registrados",text:'<i class="fa-solid fa-file-pdf"></i> PDF',className:"bg-red-500 hover:bg-red-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>c(u.title||"Incapacidades Registradas")},{title:"Directivos registrados",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[2,3,4,5,6]}}],g=[{data:null,render:function(i,s,p,v){return`<input type="checkbox" class="incapacidades-checkboxes" data-id="${p.idIncapacidad}" ">`}},{data:null,render:function(i,s,p,v){return v.row+1}},{data:"idOperador",render:function(i,s,p,v){const _=u.operador.find(F=>F.idOperador===i);return _?_.nombre_completo:""}},{data:"motivo"},{data:"numeroDias"},{data:"fechaInicio"},{data:"fechaFin"},{data:null,render:function(i,s,p,v){return`<button class="editar-button" data-id="${p.idIncapacidad}" style="display: flex; justify-content: center;"><i class="fa fa-pencil"></i></button>`}}],f=w(!1),x=w(!1),h=w(!1),y=L({_method:"DELETE"}),d=w([]);var D={};const T=i=>{D=i,x.value=!0},A=()=>{h.value=!1},N=()=>{f.value=!1},n=()=>{x.value=!1},t=i=>{d.value.includes(i)?d.value=d.value.filter(p=>p!==i):d.value.push(i);const s=document.getElementById("eliminarABtn");d.value.length>0?s.removeAttribute("disabled"):s.setAttribute("disabled","")};te(()=>{document.getElementById("incapacidadesTablaId").addEventListener("click",i=>{const s=i.target;if(s.classList.contains("incapacidades-checkboxes")){const p=parseInt(s.getAttribute("data-id"));if(u.incapacidad){const v=u.incapacidad.find(_=>_.idIncapacidad===p);v?t(v):console.log("No se tiene incapacidad")}}}),$("#incapacidadesTablaId").on("click",".editar-button",function(){const i=$(this).data("id"),s=u.incapacidad.find(p=>p.idIncapacidad===i);T(s)})});const o=()=>{const i=z.mixin({buttonsStyling:!0}),s=d.value.map(p=>{const v=u.operador.find(_=>_.idOperador===p.idOperador);return v?v.nombre_completo:""}).filter(p=>p!=="").join(", ");i.fire({title:"¿Esta seguro que desea eliminar la(s) incapacidad(es) del(los) operador(es) seleccionado(s)?",html:`Operador(es) seleccionado(s): ${s}`,showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Confirmar',cancelButtonText:'<i class="fa-solid fa-ban"></i> Cancelar'}).then(async p=>{if(p.isConfirmed)try{const _=d.value.map(B=>B.idIncapacidad).join(",");await y.post(route("rh.eliminarIncapacidad",_)),d.value=[];const F=document.getElementById("eliminarABtn");d.value.length>0?F.removeAttribute("disabled"):F.setAttribute("disabled",""),z.fire({title:"Incapacidad eliminado correctamente",icon:"success"}),window.flash={message:"Incapacidad eliminado correctamente",color:"green"}}catch(v){console.log("Error al eliminar varias incapacidades: "+v),z.fire({title:"Error",text:"Hubo un error al eliminar la incapacidad. Por favor, inténtalo de nuevo más tarde.",icon:"error"})}})};return(i,s)=>(b(),W(ie,{title:"Incapacidades",usuario:u.usuario},{default:R(()=>[e("div",$a,[s[6]||(s[6]=e("h2",{class:"font-bold text-center text-xl pt-0"},"Incapacidades",-1)),s[7]||(s[7]=e("div",{class:"my-1"},null,-1)),s[8]||(s[8]=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-6"},null,-1)),M(oe),e("div",Oa,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:s[0]||(s[0]=p=>f.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},s[2]||(s[2]=[e("i",{class:"fa fa-plus mr-2"},null,-1),m("Agregar Incapacidad ")])),e("button",{id:"eliminarABtn",disabled:"",class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:o},s[3]||(s[3]=[e("i",{class:"fa fa-trash mr-2"},null,-1),m("Borrar Incapacidad ")])),e("button",{class:"bg-sky-500 hover:bg-sky-500 text-white font-semibold py-2 px-4 rounded",onClick:s[1]||(s[1]=p=>h.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},s[4]||(s[4]=[e("i",{class:"fa fa-refresh","aria-hidden":"true"},null,-1),m(" Reincorporar Operador ")]))]),e("div",null,[M(r(P),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"incapacidadesTablaId",name:"incapacidadesTablaId",columns:g,data:l.incapacidad,options:{responsive:!0,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"Ultimo"}},buttons:[a]}},{default:R(()=>s[5]||(s[5]=[e("thead",null,[e("tr",{class:"text-sm leading-normal"},[e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," ID "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Operador "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Motivo de incapacidad "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Número de Días "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Fecha de Inicio "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Fecha de Fin ")])],-1)])),_:1},8,["data","options"])])]),M(Ae,{show:f.value,"max-width":G,closeable:H,onClose:N,title:"Añadir incapacidad",op:"1",modal:"modalCreate",operador:u.operador,operadoresAlta:u.operadoresAlta},null,8,["show","operador","operadoresAlta"]),M(ra,{show:x.value,"max-width":G,closeable:H,onClose:n,title:"Editar Incapacidad",modal:"modalEdit",operador:u.operador,incapacidad:r(D)},null,8,["show","operador","incapacidad"]),M(ka,{show:h.value,"max-width":G,closeable:H,onClose:A,title:"Reincorporar Operador",modal:"modalEdit",operador:u.operador,operadoresIncapacidad:u.operadoresIncapacidad},null,8,["show","operador","operadoresIncapacidad"])]),_:1},8,["usuario"]))}};export{Ma as default};
