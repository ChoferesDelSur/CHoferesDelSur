import{u as L,i as U,r as I,o as h,j as W,e as R,a as e,g as X,t as _,w as O,d,k as S,c as k,l as E,F as Z,m as V,p as ee,f as p,L as P,D as K,s as te,b as M,x as Q}from"./app-2HR5oQ8c.js";import"./buttons.print-y0zNFMct.js";import{S as z}from"./sweetalert2.all-eXZXNhSK.js";import{_ as oe}from"./Mensaje-CuW9Lt87.js";import{_ as se}from"./RHLayout-D-Ubx9ks.js";import{_ as Y}from"./Modal-D_M_LKXS.js";import{E as ie}from"./jspdf.plugin.autotable-B403eXP8.js";import{u as q,w as de}from"./xlsx-769MyM77.js";/* empty css                                                */const ne={class:"mt-2 bg-white p-4 shadow rounded-lg"},re={class:"border-b border-gray-900/10 pb-12"},ce={class:"text-2xl font-semibold leading-7 text-gray-900"},le=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},[p("Rellene el formulario para poder registrar una incapacidad. Los campos con "),e("span",{class:"text-red-500"},"*"),p(" son obligatorios. ")],-1),pe={class:"flex flex-wrap -mx-4"},me={class:"md:col-span-2"},ue={class:"sm:col-span-2",hidden:""},ge=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1),fe={class:"mt-1"},he=["id"],be={class:"sm:col-span-2 px-2"},xe=e("label",{for:"motivo",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Motivo "),e("span",{class:"text-red-500"},"*")],-1),ye={class:"mt-2"},ve={key:0,class:"text-red-500 text-xs mt-1"},_e={class:"sm:col-span-2 px-2"},Ie=e("label",{for:"numeroDias",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Número de Días "),e("span",{class:"text-red-500"},"*")],-1),$e={class:"mt-2"},we={key:0,class:"text-red-500 text-xs mt-1"},De={class:"sm:col-span-2 px-2"},ke=e("label",{for:"fechaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Fecha de Inicio "),e("span",{class:"text-red-500"},"*")],-1),Oe={class:"mt-2"},Fe={key:0,class:"text-red-500 text-xs mt-1"},Se={class:"sm:col-span-2 px-2"},Ee=e("label",{for:"fechaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Fecha de Fin "),e("span",{class:"text-red-500"},"*")],-1),je={class:"mt-2"},Te={key:0,class:"text-red-500 text-xs mt-1"},Ce={class:"sm:col-span-2 px-4"},Ne=e("label",{for:"chofer",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Operador "),e("span",{class:"text-red-500"},"*")],-1),Ae={class:"mt-2"},Be=["id"],Me=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador para esta unidad",-1),Ue=["value"],Re={key:0,class:"text-red-500 text-xs mt-1"},Le={class:"mt-6 flex items-center justify-end gap-x-6"},We=["id"],Pe=e("i",{class:"fa-solid fa-ban"},null,-1),ze=["disabled"],qe=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Ge={__name:"FormularioIncapacidad",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresAlta:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(n,{emit:m}){const c=n,T=m,a=L({idIncapacidad:c.incapacidad.idIncapacidad,motivo:c.incapacidad.motivo,numeroDias:c.incapacidad.numeroDias,fechaInicio:c.incapacidad.fechaInicio,fechaFin:c.incapacidad.fechaFin,chofer:c.incapacidad.idOperador});U(()=>c.operador,async t=>{a.idOperador=t.idOperador,a.motivo=t.motivo,a.numeroDias=t.numeroDias,a.fechaInicio=t.fechaInicio,a.fechaFin=t.fechaFin,a.chofer=t.idOperador},{deep:!0}),U([()=>a.numeroDias,()=>a.fechaInicio],([t,i])=>{if(t&&i){const o=new Date(i),r=new Date(o);r.setDate(o.getDate()+parseInt(t,10)),a.fechaFin=r.toISOString().split("T")[0]}});const g=I(""),f=I(""),b=I(""),x=I(""),y=I(""),u=async()=>{T("close"),a.reset()},w=t=>typeof t=="string"&&t.trim()!=="",C=t=>t!=null,A=t=>t==null?!1:Number.isInteger(t)&&t>=0,N=t=>!(t==null||((typeof t=="string"||t instanceof String)&&(t=new Date(t)),!(t instanceof Date))||isNaN(t.getTime())),s=async()=>{g.value=w(a.motivo)?"":"Ingrese el motivo de la incapacidad",f.value=A(a.numeroDias)?"":"Ingrese el número de días de incapacidad",b.value=N(a.fechaInicio)?"":"Ingrese la fecha de inicio de incapacidad",x.value=N(a.fechaFin)?"":"Ingrese la fecha de fin de incapacidad",y.value=C(a.chofer)?"":"Seleccione a un operador",!(g.value||f.value||b.value||x.value||y.value)&&a.post(route("rh.addIncapacidad"),{onSuccess:()=>{u(),g.value="",f.value="",b.value="",x.value="",y.value=""}})};return(t,i)=>(h(),W(Y,{show:n.show,"max-width":n.maxWidth,closeable:n.closeable,onClose:u},{default:R(()=>[e("div",ne,[e("form",{onSubmit:X(s,["prevent"])},[e("div",re,[e("h1",ce,_(n.title),1),le,e("div",pe,[e("div",me,[e("div",ue,[ge,e("div",fe,[O(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":i[0]||(i[0]=o=>d(a).idIncapacidad=o),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+n.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,he),[[S,d(a).idIncapacidad]])])])]),e("div",be,[xe,e("div",ye,[O(e("input",{type:"text",name:"motivo","onUpdate:modelValue":i[1]||(i[1]=o=>d(a).motivo=o),placeholder:"Ingrese el motivo de la incapacidad",class:"block w-64 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).motivo]])]),g.value!=""?(h(),k("div",ve,_(g.value),1)):E("",!0)]),e("div",_e,[Ie,e("div",$e,[O(e("input",{type:"number",name:"numeroDias","onUpdate:modelValue":i[2]||(i[2]=o=>d(a).numeroDias=o),placeholder:"Ingrese el número de días",class:"block w-32 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).numeroDias]])]),f.value!=""?(h(),k("div",we,_(f.value),1)):E("",!0)]),e("div",De,[ke,e("div",Oe,[O(e("input",{type:"date",name:"fechaInicio","onUpdate:modelValue":i[3]||(i[3]=o=>d(a).fechaInicio=o),placeholder:"Ingrese la fecha de inicio",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaInicio]])]),b.value!=""?(h(),k("div",Fe,_(b.value),1)):E("",!0)]),e("div",Se,[Ee,e("div",je,[O(e("input",{type:"date",name:"fechaFin","onUpdate:modelValue":i[4]||(i[4]=o=>d(a).fechaFin=o),placeholder:"Ingrese la fecha de fin",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaFin]])]),x.value!=""?(h(),k("div",Te,_(x.value),1)):E("",!0)]),e("div",Ce,[Ne,e("div",Ae,[O(e("select",{name:"chofer",id:"chofer"+n.op,"onUpdate:modelValue":i[5]||(i[5]=o=>d(a).chofer=o),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Me,(h(!0),k(Z,null,V(n.operadoresAlta,o=>(h(),k("option",{key:o.idOperador,value:o.idOperador},_(o.nombre_completo),9,Ue))),128))],8,Be),[[ee,d(a).chofer]])]),y.value!=""?(h(),k("div",Re,_(y.value),1)):E("",!0)])])]),e("div",Le,[e("button",{type:"button",id:"cerrar"+n.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:u},[Pe,p(" Cancelar")],8,We),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:d(a).processing},[qe,p("Guardar")],8,ze)])],32)])]),_:1},8,["show","max-width","closeable"]))}},He={class:"mt-2 bg-white p-4 shadow rounded-lg"},Xe={class:"border-b border-gray-900/10 pb-12"},Ye={class:"text-2xl font-semibold leading-7 text-gray-900"},Je=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},[p("Rellene el formulario para poder registrar una incapacidad. Los campos con "),e("span",{class:"text-red-500"},"*"),p(" son obligatorios. ")],-1),Ke={class:"flex flex-wrap -mx-4"},Qe={class:"md:col-span-2"},Ze={class:"sm:col-span-2",hidden:""},Ve=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1),ea={class:"mt-1"},aa=["id"],ta={class:"sm:col-span-2 px-2"},oa=e("label",{for:"motivo",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Motivo "),e("span",{class:"text-red-500"},"*")],-1),sa={class:"mt-2"},ia={key:0,class:"text-red-500 text-xs mt-1"},da={class:"sm:col-span-2 px-2"},na=e("label",{for:"numeroDias",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Número de Días "),e("span",{class:"text-red-500"},"*")],-1),ra={class:"mt-2"},ca={key:0,class:"text-red-500 text-xs mt-1"},la={class:"sm:col-span-2 px-2"},pa=e("label",{for:"fechaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Fecha de Inicio "),e("span",{class:"text-red-500"},"*")],-1),ma={class:"mt-2"},ua={key:0,class:"text-red-500 text-xs mt-1"},ga={class:"sm:col-span-2 px-2"},fa=e("label",{for:"fechaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Fecha de Fin "),e("span",{class:"text-red-500"},"*")],-1),ha={class:"mt-2"},ba={key:0,class:"text-red-500 text-xs mt-1"},xa={class:"sm:col-span-2 px-4"},ya=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},"Operador",-1),va={class:"mt-2"},_a={class:"block rounded-md py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6"},Ia={class:"mt-6 flex items-center justify-end gap-x-6"},$a=["id"],wa=e("i",{class:"fa-solid fa-ban"},null,-1),Da=["disabled"],ka=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Oa={__name:"FormularioActualizarIncapacidad",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresAlta:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(n,{emit:m}){const c=n,T=m;I({motivo:"",numeroDias:"",fechaInicio:"",fechaFin:""});const a=L({_method:"PUT",idIncapacidad:c.incapacidad.idIncapacidad,motivo:c.incapacidad.motivo,numeroDias:c.incapacidad.numeroDias,fechaInicio:c.incapacidad.fechaInicio,fechaFin:c.incapacidad.fechaFin,operador:c.incapacidad.idOperador});U(()=>c.incapacidad,async s=>{a.idIncapacidad=s.idIncapacidad,a.motivo=s.motivo,a.numeroDias=s.numeroDias,a.fechaInicio=s.fechaInicio,a.fechaFin=s.fechaFin,a.operador=s.idOperador},{deep:!0}),U([()=>a.numeroDias,()=>a.fechaInicio],([s,t])=>{if(s&&t){const i=new Date(t),o=new Date(i);o.setDate(i.getDate()+parseInt(s,10)),a.fechaFin=o.toISOString().split("T")[0]}});const g=I(""),f=I(""),b=I(""),x=I("");I("");const y=async()=>{T("close"),a.reset()},u=s=>typeof s=="string"&&s.trim()!=="",w=s=>s==null?!1:Number.isInteger(s)&&s>=0,C=s=>!(s==null||((typeof s=="string"||s instanceof String)&&(s=new Date(s)),!(s instanceof Date))||isNaN(s.getTime())),A=async()=>{g.value=u(a.motivo)?"":"Ingrese el motivo de la incapacidad",f.value=w(a.numeroDias)?"":"Ingrese el número de días de incapacidad",b.value=C(a.fechaInicio)?"":"Ingrese la fecha de inicio de incapacidad",x.value=C(a.fechaFin)?"":"Ingrese la fecha de fin de incapacidad",!(g.value||f.value||b.value||x.value)&&a.post(route("rh.actualizarIncapacidad",a.idIncapacidad),{onSuccess:()=>{y(),g.value="",f.value="",b.value="",x.value=""}})},N=s=>{const t=c.operador.find(i=>i.idOperador===s);return t?t.nombre_completo:"Operador no encontrado"};return(s,t)=>(h(),W(Y,{show:n.show,"max-width":n.maxWidth,closeable:n.closeable,onClose:y},{default:R(()=>[e("div",He,[e("form",{onSubmit:X(A,["prevent"])},[e("div",Xe,[e("h1",Ye,_(n.title),1),Je,e("div",Ke,[e("div",Qe,[e("div",Ze,[Ve,e("div",ea,[O(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":t[0]||(t[0]=i=>d(a).idIncapacidad=i),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+n.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,aa),[[S,d(a).idIncapacidad]])])])]),e("div",ta,[oa,e("div",sa,[O(e("input",{type:"text",name:"motivo","onUpdate:modelValue":t[1]||(t[1]=i=>d(a).motivo=i),placeholder:"Ingrese el motivo de la incapacidad",class:"block w-64 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).motivo]])]),g.value!=""?(h(),k("div",ia,_(g.value),1)):E("",!0)]),e("div",da,[na,e("div",ra,[O(e("input",{type:"number",name:"numeroDias","onUpdate:modelValue":t[2]||(t[2]=i=>d(a).numeroDias=i),placeholder:"Ingrese el número de días",class:"block w-32 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).numeroDias]])]),f.value!=""?(h(),k("div",ca,_(f.value),1)):E("",!0)]),e("div",la,[pa,e("div",ma,[O(e("input",{type:"date",name:"fechaInicio","onUpdate:modelValue":t[3]||(t[3]=i=>d(a).fechaInicio=i),placeholder:"Ingrese la fecha de inicio",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaInicio]])]),b.value!=""?(h(),k("div",ua,_(b.value),1)):E("",!0)]),e("div",ga,[fa,e("div",ha,[O(e("input",{type:"date",name:"fechaFin","onUpdate:modelValue":t[4]||(t[4]=i=>d(a).fechaFin=i),placeholder:"Ingrese la fecha de fin",class:"block w-48 rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[S,d(a).fechaFin]])]),x.value!=""?(h(),k("div",ba,_(x.value),1)):E("",!0)]),e("div",xa,[ya,e("div",va,[e("p",_a,_(N(d(a).operador)),1)])])])]),e("div",Ia,[e("button",{type:"button",id:"cerrar"+n.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:y},[wa,p(" Cancelar")],8,$a),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:d(a).processing},[ka,p("Guardar")],8,Da)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Fa={class:"mt-2 bg-white p-4 shadow rounded-lg"},Sa={class:"border-b border-gray-900/10 pb-12"},Ea={class:"text-2xl font-semibold leading-7 text-gray-900"},ja=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},"Seleccione al operador que haya termiando sus días de incapacidad y que vuelve a reincorporarse. ",-1),Ta={class:"flex flex-wrap -mx-4"},Ca={class:"md:col-span-2"},Na={class:"sm:col-span-2",hidden:""},Aa=e("label",{for:"idIncapacidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idIncapacidad",-1),Ba={class:"mt-1"},Ma=["id"],Ua={class:"sm:col-span-2 px-4"},Ra=e("label",{for:"chofer",class:"block text-sm font-medium leading-6 text-gray-900"},[p("Operador "),e("span",{class:"text-red-500"},"*")],-1),La={class:"mt-2"},Wa=["id"],Pa=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador",-1),za=["value"],qa={key:0,class:"text-red-500 text-xs mt-1"},Ga={class:"mt-6 flex items-center justify-end gap-x-6"},Ha=["id"],Xa=e("i",{class:"fa-solid fa-ban"},null,-1),Ya=["disabled"],Ja=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Ka={__name:"FormularioReincorporar",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},operador:{type:Object,default:()=>({})},operadoresIncapacidad:{type:Object,default:()=>({})},incapacidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(n,{emit:m}){const c=n,T=m,a=L({_method:"PUT",idIncapacidad:c.incapacidad.idIncapacidad,chofer:c.incapacidad.idOperador,idOperador:c.operador.idOperador});U(()=>c.operador,async y=>{a.idOperador=y.idOperador,a.chofer=y.idOperador},{deep:!0});const g=I(""),f=async()=>{T("close"),a.reset()},b=y=>y!=null,x=async()=>{g.value=b(a.chofer)?"":"Seleccione a un operador",!g.value&&a.post(route("rh.reincorporar"),{onSuccess:()=>{f(),g.value=""}})};return(y,u)=>(h(),W(Y,{show:n.show,"max-width":n.maxWidth,closeable:n.closeable,onClose:f},{default:R(()=>[e("div",Fa,[e("form",{onSubmit:X(x,["prevent"])},[e("div",Sa,[e("h1",Ea,_(n.title),1),ja,e("div",Ta,[e("div",Ca,[e("div",Na,[Aa,e("div",Ba,[O(e("input",{type:"number",name:"idIncapacidad","onUpdate:modelValue":u[0]||(u[0]=w=>d(a).idIncapacidad=w),placeholder:"Ingrese id de la incapacidad",id:"idIncapacidad"+n.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ma),[[S,d(a).idIncapacidad]])])])]),e("div",Ua,[Ra,e("div",La,[O(e("select",{name:"chofer",id:"chofer"+n.op,"onUpdate:modelValue":u[1]||(u[1]=w=>d(a).chofer=w),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Pa,(h(!0),k(Z,null,V(n.operadoresIncapacidad,w=>(h(),k("option",{key:w.idOperador,value:w.idOperador},_(w.nombre_completo),9,za))),128))],8,Wa),[[ee,d(a).chofer]])]),g.value!=""?(h(),k("div",qa,_(g.value),1)):E("",!0)])])]),e("div",Ga,[e("button",{type:"button",id:"cerrar"+n.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-2 rounded","data-bs.dismiss":"modal",onClick:f},[Xa,p(" Cancelar")],8,Ha),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-2 rounded",disabled:d(a).processing},[Ja,p("Guardar")],8,Ya)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Qa={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},Za=e("h2",{class:"font-bold text-center text-xl pt-0"},"Incapacidades",-1),Va=e("div",{class:"my-1"},null,-1),et=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-6"},null,-1),at={class:"py-3 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0"},tt=e("i",{class:"fa fa-plus mr-2"},null,-1),ot=e("i",{class:"fa fa-trash mr-2"},null,-1),st=e("i",{class:"fa fa-refresh","aria-hidden":"true"},null,-1),it=e("thead",null,[e("tr",{class:"text-sm leading-normal"},[e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," ID "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Operador "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Motivo de incapacidad "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Número de Días "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Fecha de Inicio "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Fecha de Fin ")])],-1),G="xl",H=!0,ft={__name:"Incapacidades",props:{message:{String,default:""},color:{String,default:""},operador:{type:Object},incapacidad:{type:Object},directivo:{type:Object},usuario:{type:Object},operadoresAlta:{type:Object},operadoresIncapacidad:{type:Object}},setup(n){P.use(K),P.use(K);const m=n,c=(o="Documento")=>{const r=new ie("landscape");r.setFontSize(12),r.text(o,14,22);const l=new Date().toLocaleDateString();r.setFontSize(8),r.text(`Fecha: ${l}`,260,22);const v=["ID","Operador","Motivo de Incapacidad","Número de Días","Fecha de Inicio","Fecha de Fin"],D=[];Q(()=>{$("#incapacidadesTablaId").DataTable().rows({search:"applied"}).data().each(j=>{var J;D.push([j.idIncapacidad,((J=m.operador.find(ae=>ae.idOperador===j.idOperador))==null?void 0:J.nombre_completo)||"",j.motivo,j.numeroDias,j.fechaInicio,j.fechaFin])}),r.autoTable({head:[v],body:D,startY:24}),r.save(`${o}.pdf`)})},T=()=>{Q(()=>{const l=$("#incapacidadesTablaId").DataTable().rows({search:"applied"}).data().toArray().map(F=>{var B;return{ID:F.idIncapacidad,Operador:((B=m.operador.find(j=>j.idOperador===F.idOperador))==null?void 0:B.nombre_completo)||"","Motivo de Incapacidad":F.motivo,"Número de Días":F.numeroDias,"Fecha de Inicio":F.fechaInicio,"Fecha de Fin":F.fechaFin}}),v=q.json_to_sheet(l),D=q.book_new();q.book_append_sheet(D,v,"Incapacidades Registrados"),de(D,"Incapacidades Registrados.xlsx")})},a=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Directivos registrados",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>T()},{title:"Directivos registrados",text:'<i class="fa-solid fa-file-pdf"></i> PDF',className:"bg-red-500 hover:bg-red-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>c(m.title||"Incapacidades Registradas")},{title:"Directivos registrados",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[2,3,4,5,6]}}],g=[{data:null,render:function(o,r,l,v){return`<input type="checkbox" class="incapacidades-checkboxes" data-id="${l.idIncapacidad}" ">`}},{data:null,render:function(o,r,l,v){return v.row+1}},{data:"idOperador",render:function(o,r,l,v){const D=m.operador.find(F=>F.idOperador===o);return D?D.nombre_completo:""}},{data:"motivo"},{data:"numeroDias"},{data:"fechaInicio"},{data:"fechaFin"},{data:null,render:function(o,r,l,v){return`<button class="editar-button" data-id="${l.idIncapacidad}" style="display: flex; justify-content: center;"><i class="fa fa-pencil"></i></button>`}}],f=I(!1),b=I(!1),x=I(!1),y=L({_method:"DELETE"}),u=I([]);var w={};const C=o=>{w=o,b.value=!0},A=()=>{x.value=!1},N=()=>{f.value=!1},s=()=>{b.value=!1},t=o=>{u.value.includes(o)?u.value=u.value.filter(l=>l!==o):u.value.push(o);const r=document.getElementById("eliminarABtn");u.value.length>0?r.removeAttribute("disabled"):r.setAttribute("disabled","")};te(()=>{document.getElementById("incapacidadesTablaId").addEventListener("click",o=>{const r=o.target;if(r.classList.contains("incapacidades-checkboxes")){const l=parseInt(r.getAttribute("data-id"));if(m.incapacidad){const v=m.incapacidad.find(D=>D.idIncapacidad===l);v?t(v):console.log("No se tiene incapacidad")}}}),$("#incapacidadesTablaId").on("click",".editar-button",function(){const o=$(this).data("id"),r=m.incapacidad.find(l=>l.idIncapacidad===o);C(r)})});const i=()=>{const o=z.mixin({buttonsStyling:!0}),r=u.value.map(l=>{const v=m.operador.find(D=>D.idOperador===l.idOperador);return v?v.nombre_completo:""}).filter(l=>l!=="").join(", ");o.fire({title:"¿Esta seguro que desea eliminar la(s) incapacidad(es) del(los) operador(es) seleccionado(s)?",html:`Operador(es) seleccionado(s): ${r}`,showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Confirmar',cancelButtonText:'<i class="fa-solid fa-ban"></i> Cancelar'}).then(async l=>{if(l.isConfirmed)try{const D=u.value.map(B=>B.idIncapacidad).join(",");await y.post(route("rh.eliminarIncapacidad",D)),u.value=[];const F=document.getElementById("eliminarABtn");u.value.length>0?F.removeAttribute("disabled"):F.setAttribute("disabled",""),z.fire({title:"Incapacidad eliminado correctamente",icon:"success"}),window.flash={message:"Incapacidad eliminado correctamente",color:"green"}}catch(v){console.log("Error al eliminar varias incapacidades: "+v),z.fire({title:"Error",text:"Hubo un error al eliminar la incapacidad. Por favor, inténtalo de nuevo más tarde.",icon:"error"})}})};return(o,r)=>(h(),W(se,{title:"Incapacidades",usuario:m.usuario},{default:R(()=>[e("div",Qa,[Za,Va,et,M(oe),e("div",at,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:r[0]||(r[0]=l=>f.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[tt,p("Agregar Incapacidad ")]),e("button",{id:"eliminarABtn",disabled:"",class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:i},[ot,p("Borrar Incapacidad ")]),e("button",{class:"bg-sky-500 hover:bg-sky-500 text-white font-semibold py-2 px-4 rounded",onClick:r[1]||(r[1]=l=>x.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[st,p(" Reincorporar Operador ")])]),e("div",null,[M(d(P),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"incapacidadesTablaId",name:"incapacidadesTablaId",columns:g,data:n.incapacidad,options:{responsive:!0,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"Ultimo"}},buttons:[a]}},{default:R(()=>[it]),_:1},8,["data","options"])])]),M(Ge,{show:f.value,"max-width":G,closeable:H,onClose:N,title:"Añadir incapacidad",op:"1",modal:"modalCreate",operador:m.operador,operadoresAlta:m.operadoresAlta},null,8,["show","operador","operadoresAlta"]),M(Oa,{show:b.value,"max-width":G,closeable:H,onClose:s,title:"Editar Incapacidad",modal:"modalEdit",operador:m.operador,incapacidad:d(w)},null,8,["show","operador","incapacidad"]),M(Ka,{show:x.value,"max-width":G,closeable:H,onClose:A,title:"Reincorporar Operador",modal:"modalEdit",operador:m.operador,operadoresIncapacidad:m.operadoresIncapacidad},null,8,["show","operador","operadoresIncapacidad"])]),_:1},8,["usuario"]))}};export{ft as default};
