import{u as K,q as Me,i as G,r as R,o as v,j as X,e as q,a as e,g as ee,t as S,w as M,d as n,k as L,b as N,L as Q,c as E,l as H,y as fe,f as b,z as J,n as ue,F as re,m as ie,p as le,G as Ne,C as pe,D as Ue,M as we,x as Ve}from"./app-C7ICach6.js";import"./buttons.print-ShvACcVB.js";import{_ as Be}from"./Mensaje-2YsrKtQY.js";import"./jspdf.plugin.autotable-CN5XQqOE.js";import{S as ne}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{u as be,w as Le}from"./xlsx-DjuO7_Ju.js";import{_ as Ae}from"./ServicioLayout-Be8H1UHz.js";import{_ as te}from"./Modal-C1Q6NR47.js";/* empty css                   *//* empty css                                                */const ze={class:"mt-2 bg-white p-4 shadow rounded-lg"},We={class:"border-b border-gray-900/10 pb-12"},Ge={class:"text-base font-semibold leading-7 text-gray-900"},Pe={class:"flex flex-wrap -mx-4"},qe={class:"md:col-span-2"},Je={class:"sm:col-span-2",hidden:""},Ke={class:"mt-1"},Xe=["id"],Ye={class:"sm:col-span-2 w-56 px-4"},Ze={class:"mt-2"},Qe={key:0,class:"text-red-500 text-xs mt-1"},et={class:"sm:col-span-2 px-4"},tt={class:"mt-2"},ot=["id"],at={key:0,class:"text-red-500 text-xs"},rt={class:"sm:col-span-2 px-4"},it={class:"mt-2"},dt={key:0,class:"text-red-500 text-xs"},st={class:"sm:col-span-2 px-4"},nt={class:"mt-2"},lt={class:"block w-72 rounded-md border border-gray-300 px-1.5 py-1.5 text-gray-900 bg-gray-100 shadow-sm sm:text-sm sm:leading-6"},ut={class:"mt-6 flex items-center justify-end gap-x-6"},ct=["id"],mt=["disabled"],gt={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},ruta:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idEntrada:l.entrada.idEntrada,unidad:l.entrada.idUnidad,horaEntrada:l.entrada.horaEntrada,extremo:l.entrada.extremo}),F=Me(()=>{const s=l.unidadesConOperador.find(o=>o.idUnidad===t.unidad);return s&&s.ruta?s.ruta.nombreRuta:"Nombre de ruta"});G(()=>l.entrada,async s=>{t.idEntrada=s.idEntrada,t.unidad=s.unidad,t.horaEntrada=s.horaEntrada,t.extremo=s.extremo},{deep:!0});const U=s=>s!=null,x=s=>s!=null,w=R(""),k=R(""),C=R(""),c=async()=>{D("close"),t.reset()},g=async()=>{k.value=U(t.horaEntrada)?"":"Seleccione la hora de entrada",w.value=U(t.unidad)?"":"Seleccione una unidad",C.value=x(t.extremo)?"":"Seleccione una opción",!(k.value||w.value||C.value)&&t.post(J("servicio.registarHoraEntrada"),{onSuccess:()=>{c(),k.value="",w.value="",C.value=""}})};return(s,o)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:c},{default:q(()=>[e("div",ze,[e("form",{onSubmit:o[5]||(o[5]=ee(m=>r.op==="1"?g():s.update(),["prevent"]))},[e("div",We,[e("h2",Ge,S(r.title),1),o[13]||(o[13]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1)),e("div",Pe,[e("div",qe,[e("div",Je,[o[6]||(o[6]=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1)),e("div",Ke,[M(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":o[0]||(o[0]=m=>n(t).idEntrada=m),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+r.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Xe),[[L,n(t).idEntrada]])])])]),e("div",Ye,[o[7]||(o[7]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",Ze,[N(n(Q),{modelValue:n(t).unidad,"onUpdate:modelValue":o[1]||(o[1]=m=>n(t).unidad=m),options:r.unidadesConOperador.map(m=>({label:m.numeroUnidad,value:m.idUnidad})),placeholder:"Seleccione la unidad",reduce:m=>m.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),w.value!=""?(v(),E("div",Qe,S(w.value),1)):H("",!0)]),e("div",et,[o[8]||(o[8]=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1)),e("div",tt,[M(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+r.op,"onUpdate:modelValue":o[2]||(o[2]=m=>n(t).horaEntrada=m),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ot),[[L,n(t).horaEntrada]])]),k.value!=""?(v(),E("div",at,S(k.value),1)):H("",!0)]),e("div",rt,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1)),e("div",it,[M(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":o[3]||(o[3]=m=>n(t).extremo=m)},null,512),[[fe,n(t).extremo]]),o[9]||(o[9]=e("label",{for:"si",class:"radio-label"}," Sí",-1)),M(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":o[4]||(o[4]=m=>n(t).extremo=m)},null,512),[[fe,n(t).extremo]]),o[10]||(o[10]=e("label",{for:"no",class:"radio-label"}," No",-1))]),C.value!=""?(v(),E("div",dt,S(C.value),1)):H("",!0)]),e("div",st,[o[12]||(o[12]=e("label",{for:"ruta",class:"block text-sm font-medium leading-6 text-gray-900"},"Ruta",-1)),e("div",nt,[e("span",lt,S(F.value),1)])])])]),e("div",ut,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:c},o[14]||(o[14]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,ct),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},o[15]||(o[15]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,mt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},pt={class:"mt-2 bg-white p-4 shadow rounded-lg"},bt={class:"border-b border-gray-900/10 pb-12"},ft={class:"text-base font-semibold leading-7 text-gray-900"},xt={class:"flex flex-wrap -mx-4"},yt={class:"sm:col-span-2 w-56 px-4"},ht={class:"mt-2"},vt={key:0,class:"text-red-500 text-xs mt-1"},Ct={class:"sm:col-span-2 px-4"},Ut={class:"mt-2"},wt=["id"],St={key:0,class:"text-red-500 text-xs"},$t={class:"sm:col-span-2 px-4"},Rt={class:"mt-2"},Et=["id"],kt={key:0,class:"text-red-500 text-xs mt-1"},Ot={class:"sm:col-span-2 px-4"},Dt={class:"mt-2"},Ft=["id"],jt={class:"mt-6 flex items-center justify-end gap-x-6"},It=["id"],Ht=["disabled"],_t={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idCorte:l.corte.idCorte,unidad:l.corte.idUnidad,horaCorte:l.corte.horaCorte,causa:l.corte.corte,horaRegreso:l.corte.horaRegreso});G(()=>l.corte,async g=>{t.idCorte=g.idCorte,t.unidad=g.unidad,t.horaCorte=g.horaCorte,t.causa=g.causa,t.horaRegreso=g.horaRegreso},{deep:!0});const F=g=>g!=null,U=g=>typeof g=="string"&&g.trim()!=="",x=R(""),w=R(""),k=R("");R("");const C=async()=>{D("close"),t.reset()},c=async()=>{w.value=F(t.horaCorte)?"":"Seleccione la hora de corte",x.value=F(t.unidad)?"":"Seleccione una unidad",k.value=U(t.causa)?"":"Ingrese la causa del corte",!(w.value||x.value||k.value)&&t.post(J("servicio.registarCorte"),{onSuccess:()=>{C(),w.value="",x.value="",k.value=""}})};return(g,s)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:C},{default:q(()=>[e("div",pt,[e("form",{onSubmit:s[4]||(s[4]=ee(o=>r.op==="1"?c():g.update(),["prevent"]))},[e("div",bt,[e("h2",ft,S(r.title),1),s[9]||(s[9]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",xt,[e("div",yt,[s[5]||(s[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ht,[N(n(Q),{modelValue:n(t).unidad,"onUpdate:modelValue":s[0]||(s[0]=o=>n(t).unidad=o),options:r.unidadesConOperador.map(o=>({label:o.numeroUnidad,value:o.idUnidad})),placeholder:"Seleccione la unidad",reduce:o=>o.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),x.value!=""?(v(),E("div",vt,S(x.value),1)):H("",!0)]),e("div",Ct,[s[6]||(s[6]=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ut,[M(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+r.op,"onUpdate:modelValue":s[1]||(s[1]=o=>n(t).horaCorte=o),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,wt),[[L,n(t).horaCorte]])]),w.value!=""?(v(),E("div",St,S(w.value),1)):H("",!0)]),e("div",$t,[s[7]||(s[7]=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Causa "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Rt,[M(e("input",{type:"text",name:"causa",id:"causa"+r.op,"onUpdate:modelValue":s[2]||(s[2]=o=>n(t).causa=o),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Et),[[L,n(t).causa]])]),k.value!=""?(v(),E("div",kt,S(k.value),1)):H("",!0)]),e("div",Ot,[s[8]||(s[8]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1)),e("div",Dt,[M(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+r.op,"onUpdate:modelValue":s[3]||(s[3]=o=>n(t).horaRegreso=o),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ft),[[L,n(t).horaRegreso]])])])])]),e("div",jt,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},s[10]||(s[10]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,It),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},s[11]||(s[11]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Ht)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Tt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Mt={class:"border-b border-gray-900/10 pb-12"},Nt={class:"text-base font-semibold leading-7 text-gray-900"},Vt={class:"flex flex-wrap -mx-4"},Bt={class:"sm:col-span-2 w-56 px-4"},Lt={class:"mt-2"},At={key:0,class:"text-red-500 text-xs mt-1"},zt={class:"sm:col-span-2 px-4"},Wt={class:"mt-2"},Gt=["id"],Pt={key:0,class:"text-red-500 text-xs mt-1"},qt={class:"mt-6 flex items-center justify-end gap-x-6"},Jt=["id"],Kt=["disabled"],Xt={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idCorte:l.corte.idCorte,unidad:l.corte.idUnidad,horaRegreso:l.corte.horaRegreso});G(()=>l.corte,async C=>{t.idCorte=C.idCorte,t.unidad=C.unidad,t.horaRegreso=l.corte.horaRegreso},{deep:!0});const F=C=>C!=null,U=R(""),x=R(""),w=async()=>{D("close"),t.reset()},k=async()=>{x.value=F(t.horaRegreso)?"":"Seleccione la hora de regreso",U.value=F(t.unidad)?"":"Seleccione una unidad",!(x.value||U.value)&&t.post(J("servicio.registrarHoraRegreso"),{onSuccess:()=>{w(),x.value="",U.value=""}})};return(C,c)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:w},{default:q(()=>[e("div",Tt,[e("form",{onSubmit:c[2]||(c[2]=ee(g=>r.op==="1"?k():C.update(),["prevent"]))},[e("div",Mt,[e("h2",Nt,S(r.title),1),c[5]||(c[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1)),e("div",Vt,[e("div",Bt,[c[3]||(c[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",Lt,[N(n(Q),{modelValue:n(t).unidad,"onUpdate:modelValue":c[0]||(c[0]=g=>n(t).unidad=g),options:r.unidadesConOperador.map(g=>({label:g.numeroUnidad,value:g.idUnidad})),placeholder:"Seleccione la unidad",reduce:g=>g.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),U.value!=""?(v(),E("div",At,S(U.value),1)):H("",!0)]),e("div",zt,[c[4]||(c[4]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Wt,[M(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+r.op,"onUpdate:modelValue":c[1]||(c[1]=g=>n(t).horaRegreso=g),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Gt),[[L,n(t).horaRegreso]])]),x.value!=""?(v(),E("div",Pt,S(x.value),1)):H("",!0)])])]),e("div",qt,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:w},c[6]||(c[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,Jt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},c[7]||(c[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Kt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Yt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Zt={class:"border-b border-gray-900/10 pb-12"},Qt={class:"text-base font-semibold leading-7 text-gray-900"},eo={class:"flex flex-wrap -mx-4"},to={class:"sm:col-span-2 w-56 px-4"},oo={class:"mt-2"},ao={key:0,class:"text-red-500 text-xs mt-1"},ro={class:"sm:col-span-2 px-4"},io={class:"mt-2"},so=["id"],no={key:0,class:"text-red-500 text-xs mt-1"},lo={class:"sm:col-span-2 px-4"},uo={class:"mt-2"},co=["id"],mo={key:0,class:"text-red-500 text-xs"},go={class:"sm:col-span-2 px-4"},po={class:"mt-2"},bo=["id"],fo={key:0,class:"text-red-500 text-xs"},xo={class:"sm:col-span-2 px-4"},yo={class:"mt-2"},ho=["id"],vo={class:"mt-6 flex items-center justify-end gap-x-6"},Co=["id"],Uo=["disabled"],wo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idCastigo:l.castigo.idCastigo,castigo:l.castigo.castigo,observaciones:l.castigo.observaciones,horaInicio:l.castigo.horaInicio,horaFin:l.castigo.horaFin,unidad:l.castigo.idUnidad});G(()=>l.castigo,async s=>{t.idCastigo=s.idCastigo,t.castigo=s.castigo,t.observaciones=s.observaciones,t.horaInicio=s.horaInicio,t.horaFin=l.horaFin,t.unidad=l.unidad},{deep:!0});const F=s=>s!=null,U=s=>typeof s=="string"&&s.trim()!=="",x=R(""),w=R(""),k=R(""),C=R(""),c=async()=>{D("close"),t.reset()},g=async()=>{w.value=F(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",x.value=F(t.unidad)?"":"Seleccione una unidad",k.value=U(t.castigo)?"":"Ingrese motivo del castigo",!(w.value||x.value||k.value)&&t.post(J("servicio.registrarCastigo"),{onSuccess:()=>{c(),w.value="",x.value="",k.value=""}})};return(s,o)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:c},{default:q(()=>[e("div",Yt,[e("form",{onSubmit:o[5]||(o[5]=ee(m=>r.op==="1"?g():s.update(),["prevent"]))},[e("div",Zt,[e("h2",Qt,S(r.title),1),o[11]||(o[11]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",eo,[e("div",to,[o[6]||(o[6]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",oo,[N(n(Q),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":o[0]||(o[0]=m=>n(t).unidad=m),reduce:m=>m.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ue({"border-red-500":x.value})},null,8,["options","modelValue","reduce","class"])]),x.value!=""?(v(),E("div",ao,S(x.value),1)):H("",!0)]),e("div",ro,[o[7]||(o[7]=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Castigo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",io,[M(e("input",{type:"text",name:"castigo",id:"castigo"+r.op,"onUpdate:modelValue":o[1]||(o[1]=m=>n(t).castigo=m),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,so),[[L,n(t).castigo]])]),k.value!=""?(v(),E("div",no,S(k.value),1)):H("",!0)]),e("div",lo,[o[8]||(o[8]=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",uo,[M(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+r.op,"onUpdate:modelValue":o[2]||(o[2]=m=>n(t).horaInicio=m),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,co),[[L,n(t).horaInicio]])]),w.value!=""?(v(),E("div",mo,S(w.value),1)):H("",!0)]),e("div",go,[o[9]||(o[9]=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin ",-1)),e("div",po,[M(e("input",{type:"time",name:"horaFin",id:"horaFin"+r.op,"onUpdate:modelValue":o[3]||(o[3]=m=>n(t).horaFin=m),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,bo),[[L,n(t).horaFin]])]),C.value!=""?(v(),E("div",fo,S(C.value),1)):H("",!0)]),e("div",xo,[o[10]||(o[10]=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1)),e("div",yo,[M(e("input",{type:"text",name:"observaciones",id:"observaciones"+r.op,"onUpdate:modelValue":o[4]||(o[4]=m=>n(t).observaciones=m),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ho),[[L,n(t).observaciones]])])])])]),e("div",vo,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:c},o[12]||(o[12]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,Co),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},o[13]||(o[13]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Uo)])],32)])]),_:1},8,["show","max-width","closeable"]))}},So={class:"mt-2 bg-white p-4 shadow rounded-lg"},$o={class:"border-b border-gray-900/10 pb-12"},Ro={class:"text-base font-semibold leading-7 text-gray-900"},Eo={class:"flex flex-wrap -mx-4"},ko={class:"sm:col-span-2 w-56 px-4"},Oo={class:"mt-2"},Do={key:0,class:"text-red-500 text-xs mt-1"},Fo={class:"sm:col-span-2 px-4"},jo={class:"mt-2"},Io=["id"],Ho=["value"],_o={key:0,class:"text-red-500 text-xs mt-1"},To={class:"sm:col-span-2 px-4"},Mo={class:"mt-2"},No=["id"],Vo={key:0,class:"text-red-500 text-xs"},Bo={class:"sm:col-span-2 px-4"},Lo={class:"mt-2"},Ao=["id"],zo={class:"mt-6 flex items-center justify-end gap-x-6"},Wo=["id"],Go=["disabled"],Po={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,tipoUltimaCorrida:l.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:l.ultimaCorrida.horaInicioUC,horaFinUC:l.ultimaCorrida.horaFinUC});G(()=>l.ultimaCorrida,async g=>{t.idUltimaCorrida=g.idUltimaCorrida,t.tipoUltimaCorrida=g.tipoUltimaCorrida,t.horaInicioUC=g.horaInicioUC,t.horaFinUC=g.horaFinUC},{deep:!0});const F=g=>g!=null,U=g=>g!=null,x=R(""),w=R(""),k=R(""),C=async()=>{D("close"),t.reset()},c=async()=>{w.value=F(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",x.value=F(t.unidad)?"":"Seleccione una unidad",k.value=U(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(w.value||x.value||k.value)&&t.post(J("servicio.registrarUC"),{onSuccess:()=>{C(),w.value="",x.value="",k.value=""}})};return(g,s)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:C},{default:q(()=>[e("div",So,[e("form",{onSubmit:s[4]||(s[4]=ee(o=>r.op==="1"?c():g.update(),["prevent"]))},[e("div",$o,[e("h2",Ro,S(r.title),1),s[10]||(s[10]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",Eo,[e("div",ko,[s[5]||(s[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Oo,[N(n(Q),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":s[0]||(s[0]=o=>n(t).unidad=o),reduce:o=>o.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ue({"border-red-500":x.value})},null,8,["options","modelValue","reduce","class"])]),x.value?(v(),E("div",Do,S(x.value),1)):H("",!0)]),e("div",Fo,[s[7]||(s[7]=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1)),e("div",jo,[M(e("select",{name:"tipoCorrida",id:"tipoCorrida"+r.op,"onUpdate:modelValue":s[1]||(s[1]=o=>n(t).tipoUltimaCorrida=o),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[s[6]||(s[6]=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1)),(v(!0),E(re,null,ie(r.tipoUltimaCorrida,o=>(v(),E("option",{key:o.idTipoUltimaCorrida,value:o.idTipoUltimaCorrida},S(o.tipoUltimaCorrida),9,Ho))),128))],8,Io),[[le,n(t).tipoUltimaCorrida]])]),k.value!=""?(v(),E("div",_o,S(k.value),1)):H("",!0)]),e("div",To,[s[8]||(s[8]=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Mo,[M(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+r.op,"onUpdate:modelValue":s[2]||(s[2]=o=>n(t).horaInicioUC=o),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,No),[[L,n(t).horaInicioUC]])]),w.value!=""?(v(),E("div",Vo,S(w.value),1)):H("",!0)]),e("div",Bo,[s[9]||(s[9]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1)),e("div",Lo,[M(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+r.op,"onUpdate:modelValue":s[3]||(s[3]=o=>n(t).horaFinUC=o),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ao),[[L,n(t).horaFinUC]])])])])]),e("div",zo,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},s[11]||(s[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,Wo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},s[12]||(s[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Go)])],32)])]),_:1},8,["show","max-width","closeable"]))}},qo={class:"mt-2 bg-white p-4 shadow rounded-lg"},Jo={class:"border-b border-gray-900/10 pb-12"},Ko={class:"text-base font-semibold leading-7 text-gray-900"},Xo={class:"flex flex-wrap -mx-4"},Yo={class:"sm:col-span-2 w-56 px-4"},Zo={class:"mt-2"},Qo={key:0,class:"text-red-500 text-xs mt-1"},ea={class:"sm:col-span-2 px-4"},ta={class:"mt-2"},oa=["id"],aa={key:0,class:"text-red-500 text-xs mt-1"},ra={class:"mt-6 flex items-center justify-end gap-x-6"},ia=["id"],da=["disabled"],sa={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,horaFinUC:l.ultimaCorrida.horaFinUC});G(()=>l.ultimaCorrida,async C=>{t.idUltimaCorrida=C.idUltimaCorrida,t.horaFinUC=C.horaFinUC},{deep:!0});const F=C=>C!=null,U=R(""),x=R(""),w=async()=>{D("close"),t.reset()},k=async()=>{x.value=F(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",U.value=F(t.unidad)?"":"Seleccione una unidad",!(x.value||U.value)&&t.post(J("servicio.regresoUC"),{onSuccess:()=>{w(),x.value="",U.value=""}})};return(C,c)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:w},{default:q(()=>[e("div",qo,[e("form",{onSubmit:c[2]||(c[2]=ee(g=>r.op==="1"?k():C.update(),["prevent"]))},[e("div",Jo,[e("h2",Ko,S(r.title),1),c[5]||(c[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",Xo,[e("div",Yo,[c[3]||(c[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Zo,[N(n(Q),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":c[0]||(c[0]=g=>n(t).unidad=g),label:"numeroUnidad",reduce:g=>g.idUnidad,class:ue({"border-red-500":U.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),U.value!==""?(v(),E("div",Qo,S(U.value),1)):H("",!0)]),e("div",ea,[c[4]||(c[4]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ta,[M(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+r.op,"onUpdate:modelValue":c[1]||(c[1]=g=>n(t).horaFinUC=g),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,oa),[[L,n(t).horaFinUC]])]),U.value!=""?(v(),E("div",aa,S(U.value),1)):H("",!0)])])]),e("div",ra,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:w},c[6]||(c[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,ia),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},c[7]||(c[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,da)])],32)])]),_:1},8,["show","max-width","closeable"]))}},na={class:"mt-2 bg-white p-4 shadow rounded-lg"},la={class:"text-base font-semibold leading-7 text-gray-900"},ua={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ca={class:"sm:col-span-2 px-4"},ma={class:"mt-2"},ga=["value"],pa={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ba={class:"sm:col-span-2 px-4"},fa={class:"mt-2"},xa=["value"],ya={key:0,class:"text-red-500 text-xs mt-1 mb-4"},ha={class:"mt-6 flex items-center justify-end gap-x-6"},va=["id"],Ca=["disabled"],Ua={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idRolServicio:l.rolServicio.idRolServicio,unidad:[],trabajaDomingo:l.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});G(()=>l.rolServicio,async o=>{t.idRolServicio=o.idRolServicio,t.trabajaDomingo=o.trabajaDomingo},{deep:!0});const F=async()=>{D("close"),t.reset()},U=(o,m)=>o.length>0||m.length>0,x=R(""),w=async()=>{x.value=U(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!x.value&&t.post(J("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{F(),x.value=""}})},k=()=>{const o=new Date,m=o.getDay(),_=m===0?7:m,h=new Date(o);return h.setDate(o.getDate()-_),h.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},C=()=>{const o=new Date,_=7-o.getDay(),h=new Date(o);return h.setDate(o.getDate()+_),h.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},c=k(),g=C();function s(o){return o.sort((m,_)=>{const h=parseInt(m.numeroUnidad.split("-")[1],10),V=parseInt(_.numeroUnidad.split("-")[1],10);return h-V})}return G(()=>l.unidad,o=>{t.unidad=s([...o])},{immediate:!0}),(o,m)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:F},{default:q(()=>[e("div",na,[e("form",{onSubmit:m[2]||(m[2]=ee(_=>r.op==="1"?w():o.update(),["prevent"]))},[e("h2",la,S(r.title),1),e("p",ua,[m[3]||(m[3]=b("Seleccione las unidades que trabajaron el : ")),e("strong",null,S(n(c)),1),m[4]||(m[4]=b(". "))]),e("div",ca,[m[6]||(m[6]=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ma,[M(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":m[0]||(m[0]=_=>n(t).unidadesSi=_),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[m[5]||(m[5]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(v(!0),E(re,null,ie(n(t).unidad,_=>(v(),E("option",{key:_.idUnidad,value:_.idUnidad},S(_.numeroUnidad),9,ga))),128))],512),[[le,n(t).unidadesSi]])])]),e("p",pa,[m[7]||(m[7]=b("Seleccione las unidades que trabajarán el próximo: ")),e("strong",null,S(n(g)),1),m[8]||(m[8]=b(". "))]),e("div",ba,[m[10]||(m[10]=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",fa,[M(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":m[1]||(m[1]=_=>n(t).unidadesNo=_),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[m[9]||(m[9]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(v(!0),E(re,null,ie(n(t).unidad,_=>(v(),E("option",{key:_.idUnidad,value:_.idUnidad},S(_.numeroUnidad),9,xa))),128))],512),[[le,n(t).unidadesNo]])])]),x.value?(v(),E("div",ya,S(x.value),1)):H("",!0),e("div",ha,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:F},m[11]||(m[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,va),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},m[12]||(m[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Ca)])],32)])]),_:1},8,["show","max-width","closeable"]))}},wa={class:"mt-2 bg-white p-4 shadow rounded-lg"},Sa={class:"border-b border-gray-900/10 pb-12"},$a={class:"text-base font-semibold leading-7 text-gray-900"},Ra={class:"flex flex-wrap -mx-4"},Ea={class:"sm:col-span-2 w-56 px-4"},ka={class:"mt-2"},Oa={key:0,class:"text-red-500 text-xs mt-1"},Da={class:"sm:col-span-2 px-4"},Fa={class:"mt-2"},ja=["id"],Ia={key:0,class:"text-red-500 text-xs"},Ha={class:"mt-6 flex items-center justify-end gap-x-6"},_a=["id"],Ta=["disabled"],Ma={__name:"FormularioFinCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=K({idCastigo:l.castigo.idCastigo,horaFin:l.castigo.horaFin,unidad:l.castigo.idUnidad});G(()=>l.castigo,async C=>{t.idCastigo=C.idCastigo,t.horaFin=l.horaFin,t.unidad=l.unidad},{deep:!0});const F=C=>C!=null,U=R(""),x=R(""),w=async()=>{D("close"),t.reset()},k=async()=>{U.value=F(t.unidad)?"":"Seleccione una unidad",x.value=F(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(U.value||x.value)&&t.post(J("servicio.registrarFinCastigo"),{onSuccess:()=>{w(),U.value="",x.value=""}})};return(C,c)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:w},{default:q(()=>[e("div",wa,[e("form",{onSubmit:c[2]||(c[2]=ee(g=>r.op==="1"?k():C.update(),["prevent"]))},[e("div",Sa,[e("h2",$a,S(r.title),1),c[5]||(c[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",Ra,[e("div",Ea,[c[3]||(c[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ka,[N(n(Q),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":c[0]||(c[0]=g=>n(t).unidad=g),reduce:g=>g.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ue({"border-red-500":U.value})},null,8,["options","modelValue","reduce","class"])]),U.value!=""?(v(),E("div",Oa,S(U.value),1)):H("",!0)]),e("div",Da,[c[4]||(c[4]=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin ",-1)),e("div",Fa,[M(e("input",{type:"time",name:"horaFin",id:"horaFin"+r.op,"onUpdate:modelValue":c[1]||(c[1]=g=>n(t).horaFin=g),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ja),[[L,n(t).horaFin]])]),x.value!=""?(v(),E("div",Ia,S(x.value),1)):H("",!0)])])]),e("div",Ha,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:w},c[6]||(c[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,_a),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},c[7]||(c[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Ta)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Na={class:"mt-2 bg-white p-4 shadow rounded-lg"},Va={class:"border-b border-gray-900/10 pb-12"},Ba={class:"text-base font-semibold leading-7 text-gray-900"},La={class:"flex flex-wrap -mx-4"},Aa={class:"sm:col-span-2 w-64 px-4"},za={class:"mt-2"},Wa={class:"sm:col-span-2 w-72 px-4"},Ga={class:"mt-2"},Pa={class:"mt-4"},qa={key:0},Ja=["for"],Ka={class:"mt-2"},Xa=["onUpdate:modelValue"],Ya=["onUpdate:modelValue"],Za={key:2},Qa=["value","onUpdate:modelValue"],er=["onUpdate:modelValue"],tr=["value"],or={class:"mt-6 flex items-center justify-end gap-x-6"},ar=["disabled"],rr={__name:"FormularioEditarRegistro",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},ultimaCorrida:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d;console.log("Estoy en el formulario editar registro");const t=K({idEntrada:l.entrada.idEntrada,horaEntrada:l.entrada.horaEntrada,extremo:l.entrada.extremo,horaCorte:l.corte.horaCorte,causa:l.corte.causa,horaRegreso:l.corte.horaRegreso,castigo:l.castigo.castigo,observaciones:l.castigo.observaciones,horaInicio:l.castigo.horaInicio,horaFin:l.castigo.horaFin,horaInicioUC:l.ultimaCorrida.horaInicioUC,horaFinUC:l.ultimaCorrida.horaFinUC,tipoUltimaCorrida:l.ultimaCorrida.idTipoUltimaCorrida}),F=R(null),U=R(null),x=R([]),w=R({}),k=h=>{switch(h){case"entradas":return{horaEntrada:{label:"Hora de Entrada",type:"time"},extremo:{label:"Extremo",type:"radio",options:["SI","NO"]}};case"cortes":return{horaCorte:{label:"Hora de Corte",type:"time"},causa:{label:"Causa",type:"text"},horaRegreso:{label:"Hora de Regreso",type:"time"}};case"castigos":return{castigo:{label:"Motivo",type:"text"},observaciones:{label:"Observaciones",type:"text"},horaInicio:{label:"Hora de Inicio",type:"time"},horaFin:{label:"Hora de Fin",type:"time"}};case"ultima_corrida":return{horaInicioUC:{label:"Hora de Inicio de Última Corrida",type:"time"},horaFinUC:{label:"Hora de Fin de Última Corrida",type:"time"},idTipoUltimaCorrida:{label:"Tipo de Última Corrida",type:"select",options:[]}}}},C=h=>{t.horaEntrada=h.horaEntrada,t.extremo=h.extremo,t.horaCorte=h.horaCorte,t.causa=h.causa,t.horaRegreso=h.horaRegreso,t.castigo=h.castigo,t.observaciones=h.observaciones,t.horaInicio=h.horaInicio,t.horaFin=h.horaFin,t.horaInicioUC=h.horaInicioUC,t.horaFinUC=h.horaFinUC,t.tipoUltimaCorrida=h.tipoUltimaCorrida};G(()=>l.entrada,async h=>{t.idEntrada=h.idEntrada,t.horaEntrada=h.horaEntrada,t.extremo=h.extremo},{deep:!0}),G(()=>l.corte,async h=>{t.horaCorte=h.horaCorte,t.causa=h.causa,t.horaRegreso=h.horaRegreso}),G(()=>U,h=>{console.log("Tipo de Registro seleccionado:",h),h&&(x.value=k(h),console.log("Form Fields después de la selección:",x.value))});const c=h=>h!=null,g=[{label:"Entrada",value:"entradas"},{label:"Corte",value:"cortes"},{label:"Castigo",value:"castigos"},{label:"Ultima Corrida",value:"ultima_corrida"}],s=R("");R(""),R("");const o=async()=>{D("close"),t.reset()},m=async()=>{if(console.log("Unidad seleccionada:",F.value),console.log("Tipo Registro seleccionado:",U.value),F.value&&U.value){console.log("Llamando a la API...");try{const h=await Ne.get(J("servicio.obtenerRegistros",{tipoRegistro:U.value.value}),{params:{idUnidad:F.value.value}});console.log("Fetched Records:",h.data),w.value=h.data,h.data.length>0&&C(h.data[0]),x.value=k(U.value.value),U.value.value,console.log("camposFormulario después de la carga:",x.value)}catch(h){console.error("Error fetching records:",h)}}else console.warn("Faltan datos: unidad o tipo de registro no seleccionados.")},_=async()=>{s.value=c(t.unidad)?"":"Seleccione una unidad",!s.value&&t.post(J("servicio.registarHoraEntrada"),{onSuccess:()=>{o(),s.value=""}})};return(h,V)=>(v(),X(te,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:o},{default:q(()=>[e("div",Na,[e("form",{onSubmit:ee(_,["prevent"])},[e("div",Va,[e("h2",Ba,S(r.title),1),e("div",La,[e("div",Aa,[V[2]||(V[2]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",za,[N(n(Q),{modelValue:F.value,"onUpdate:modelValue":V[0]||(V[0]=B=>F.value=B),options:r.unidadesConOperador.map(B=>({label:B.numeroUnidad,value:B.idUnidad})),placeholder:"Seleccione la unidad",onChange:m,class:"w-full"},null,8,["modelValue","options"])])]),e("div",Wa,[V[3]||(V[3]=e("label",{for:"tipoRegistro",class:"block text-sm font-medium leading-6 text-gray-900"},"Tipo de Registro",-1)),e("div",Ga,[N(n(Q),{modelValue:U.value,"onUpdate:modelValue":V[1]||(V[1]=B=>U.value=B),options:g,placeholder:"Seleccione un tipo de registro",onChange:m,class:"w-full"},null,8,["modelValue"])])])])]),e("div",Pa,[x.value?(v(),E("div",qa,[(v(!0),E(re,null,ie(x.value,(B,W)=>(v(),E("div",{key:W,class:"mb-4"},[e("label",{for:W,class:"block text-sm font-medium leading-6 text-gray-900"},S(B.label),9,Ja),e("div",Ka,[B.type==="time"?M((v(),E("input",{key:0,type:"time","onUpdate:modelValue":A=>n(t)[W]=A,class:"border rounded p-1 w-full"},null,8,Xa)),[[L,n(t)[W]]]):H("",!0),B.type==="text"?M((v(),E("input",{key:1,type:"text","onUpdate:modelValue":A=>n(t)[W]=A,class:"border rounded p-1 w-full"},null,8,Ya)),[[L,n(t)[W]]]):H("",!0),B.type==="radio"?(v(),E("div",Za,[(v(!0),E(re,null,ie(B.options,A=>(v(),E("div",{key:A,class:"flex items-center"},[M(e("input",{type:"radio",value:A,"onUpdate:modelValue":ce=>n(t)[W]=ce,class:"mr-2"},null,8,Qa),[[fe,n(t)[W]]]),e("label",null,S(A),1)]))),128))])):H("",!0),B.type==="select"?M((v(),E("select",{key:3,"onUpdate:modelValue":A=>n(t)[W]=A,class:"border rounded p-1 w-full"},[(v(!0),E(re,null,ie(B.options,A=>(v(),E("option",{key:A.value,value:A.value},S(A.label),9,tr))),128))],8,er)),[[le,n(t)[W]]]):H("",!0)])]))),128))])):H("",!0)]),e("div",or,[e("button",{type:"button",class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded",onClick:o},V[4]||(V[4]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar ")])),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},V[5]||(V[5]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar ")]),8,ar)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ir={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},dr={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},sr={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},nr={class:"overflow-x-auto"},lr={class:"text-center"},ur={class:"text-sm leading-normal border-b border-gray-300"},cr={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},Y="xl",Z=!0,Ur={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(r){pe.use(Ue),pe.use(Ue);const d=r;function l(y){const i=new Date(y),O=new Date(i.setDate(i.getDate()-i.getDay()+1)),T=new Date(i.getFullYear(),0,1),p=Math.floor((O-T)/(24*60*60*1e3));return Math.ceil((p+T.getDay()+1)/7)}const D=new Date().toLocaleDateString(),t=U(new Date().getDay()),F=l(new Date)+1;function U(y){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][y]}const x=()=>{Ve(()=>{const i=$("#formacionTablaId").DataTable().rows({search:"applied",page:"current"}).data();if(!i.length){console.warn("No hay datos para exportar.");return}const O=new Date().toISOString().split("T")[0],T=Object.fromEntries(d.ruta.map(f=>[f.idRuta,f.nombreRuta])),p=Object.fromEntries(d.rolServicio.map(f=>[f.idUnidad,f.trabajaDomingo])),a=Object.fromEntries(d.unidad.map(f=>[f.idUnidad,f.numeroUnidad])),u=Object.fromEntries(d.directivo.map(f=>[f.idDirectivo,f.nombre_completo])),I=Object.fromEntries(d.entrada.map(f=>[f.idUnidad,{horaEntrada:f.horaEntrada,tipoEntrada:f.tipoEntrada,extremo:f.extremo,created_at:f.created_at}]));Object.fromEntries(d.corte.map(f=>[f.idUnidad,[]]));const P=Object.fromEntries(d.ultimaCorrida.map(f=>[f.idUnidad,{tipoCorrida:f.idTipoUltimaCorrida,horaInicioUC:f.horaInicioUC,horaFinUC:f.horaFinUC,created_at:f.created_at}]));Object.fromEntries(d.castigo.map(f=>[f.idUnidad,[]]));const de=Object.fromEntries(d.operador.map(f=>[f.idOperador,f.nombre_completo])),xe=Object.fromEntries(d.tipoUltimaCorrida.map(f=>[f.idTipoUltimaCorrida,f.tipoUltimaCorrida])),oe=f=>{if(!f)return"";const[j,ae]=f.split(":");return`${j}:${ae}`},je=i.toArray().reduce((f,j)=>{var ve,Ce;const ae=I[j.idUnidad]||{},Te=d.corte.filter(z=>z.idUnidad===j.idUnidad&&z.created_at.split("T")[0]===O),se=P[j.idUnidad]||{},he=d.castigo.filter(z=>z.idUnidad===j.idUnidad&&z.created_at.split("T")[0]===O);p[j.idUnidad];const me=((ve=ae.created_at)==null?void 0:ve.split("T")[0])===O,ge=((Ce=se.created_at)==null?void 0:Ce.split("T")[0])===O;return he.length>0,f[j.idUnidad]||(f[j.idUnidad]={ID:j.idUnidad,Ruta:T[j.idRuta]||"N/A","Trab. Domingo":p[j.idUnidad]||"Sin Asignar",Unidad:a[j.idUnidad]||"","Socio/Prestador":u[j.idDirectivo]||"","Hr. Entrada":me&&oe(ae.horaEntrada)||"","Tipo Entrada":me&&ae.tipoEntrada||"",Extremo:me&&ae.extremo||"","Hr. Corte":"",Causa:"","Hr. Regreso":"","Tipo De Corrida":ge&&xe[se.tipoCorrida]||"","Hr. Inicio UC":ge&&oe(se.horaInicioUC)||"","Hr. Regreso UC":ge&&oe(se.horaFinUC)||"","Hr. Inicio":"","Hr. Finaliza":"",Motivo:"","Otras Observaciones":"",Operador:de[j.idOperador]||"Sin Asignar"}),Te.forEach(z=>{f[j.idUnidad]["Hr. Corte"]+=(f[j.idUnidad]["Hr. Corte"]?", ":"")+oe(z.horaCorte),f[j.idUnidad].Causa+=(f[j.idUnidad].Causa?", ":"")+z.causa,f[j.idUnidad]["Hr. Regreso"]+=(f[j.idUnidad]["Hr. Regreso"]?", ":"")+oe(z.horaRegreso)}),he.forEach(z=>{f[j.idUnidad]["Hr. Inicio"]+=(f[j.idUnidad]["Hr. Inicio"]?", ":"")+oe(z.horaInicio),f[j.idUnidad]["Hr. Finaliza"]+=(f[j.idUnidad]["Hr. Finaliza"]?", ":"")+oe(z.horaFin),f[j.idUnidad].Motivo+=(f[j.idUnidad].Motivo?", ":"")+z.castigo,f[j.idUnidad]["Otras Observaciones"]+=(f[j.idUnidad]["Otras Observaciones"]?", ":"")+z.observaciones}),f},{}),Ie=Object.values(je),He=be.json_to_sheet(Ie),ye=be.book_new();be.book_append_sheet(ye,He,"Formación De Unidades");const _e=new Date().toISOString().split("T")[0];Le(ye,`Formación_De_Unidades_${_e}.xlsx`)})},w=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>x()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],k=[{data:null,render:function(y,i,O,T){return T.row+1}},{data:"idUnidad",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.ruta.find(u=>u.idRuta===p.idRuta);return a?a.nombreRuta:""}else return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.rolServicio.filter(u=>u.idUnidad===p.idUnidad);return a.length>0?(a.sort((u,I)=>new Date(I.created_at)-new Date(u.created_at)),a[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);return p?p.numeroUnidad:""}},{data:"idUnidad",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.directivo.find(u=>u.idDirectivo===p.idDirectivo);return a?a.nombre_completo:""}else return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.entrada.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0)return a.map(I=>I.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.entrada.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0)return a.map(I=>I.tipoEntrada).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.entrada.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0)return a.map(I=>I.extremo).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.corte.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0)return a.map((I,P)=>`
            <div style="${a.length>1&&P!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${I.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.corte.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0)return a.map((I,P)=>`
            <div style="${a.length>1&&P!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${I.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.corte.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0)return a.map((I,P)=>{const de=I.horaRegreso?I.horaRegreso.substring(0,5):"";return`
            <div style="${a.length>1&&P!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${de}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.ultimaCorrida.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0){const u=d.tipoUltimaCorrida.find(I=>I.idTipoUltimaCorrida===a[0].idTipoUltimaCorrida);if(u)return u.tipoUltimaCorrida}}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.ultimaCorrida.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0){const u=a[0].horaInicioUC;return u?u.substring(0,5):""}}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.ultimaCorrida.filter(u=>u.idUnidad===p.idUnidad&&new Date(u.created_at).toLocaleDateString()===D);if(a.length>0){const u=a[0].horaFinUC;if(u)return u.substring(0,5)}}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===y&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(u=>({horaInicio:u.horaInicio?u.horaInicio.substring(0,5):""}));return a.map((u,I)=>`
          <div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${u.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===y&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(u=>({horaFin:u.horaFin?u.horaFin.substring(0,5):""}));return a.map((u,I)=>`
          <div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${u.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===y&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(u=>u.castigo||"");return a.map((u,I)=>`<div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${u}</div>`).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(y,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===y&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(u=>u.observaciones||"");return a.map((u,I)=>`<div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${u}</div>`).join("")}return""}},{data:"idUnidad",render:function(y,i,O,T){const p=d.unidad.find(a=>a.idUnidad===y);if(p){const a=d.operador.find(u=>u.idOperador===p.idOperador);return a?a.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],C=R(!1),c=R(!1),g=R(!1),s=R(!1),o=R(!1),m=R(!1),_=R(!1),h=R(!1);R(!1);const V=R(!1);K({});const B=()=>{V.value=!1},W=()=>{C.value=!1},A=()=>{c.value=!1},ce=()=>{g.value=!1},Se=()=>{s.value=!1},$e=()=>{o.value=!1},Re=()=>{m.value=!1},Ee=()=>{_.value=!1},ke=()=>{h.value=!1},Oe=()=>{ne.fire({title:"¿Seguro de actualizar el Rol de Domingo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(y=>{y.isConfirmed&&we.Inertia.post(route("servicio.cambiarRolServicio"),{},{onError:i=>{ne.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de servicio",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de servicio:",i)}})})},De=()=>{ne.fire({title:"¿Seguro de actualizar el Rol de Ruta?",text:'Las unidades que están en la ruta "LIBRAMIENTO - PLAZA DEL VALLE" se cambiarán a la ruta "ESMERALDA - COL. JARDIN" y viceversa',icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(y=>{y.isConfirmed&&we.Inertia.post(route("servicio.actualizarRolRuta"),{_method:"PUT"},{onError:i=>{ne.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de rutas",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de rutas:",i)}})})},Fe=()=>d.entrada.filter(y=>y.horaEntrada&&new Date(y.created_at).toLocaleDateString()===D).length;return(y,i)=>(v(),X(Ae,{title:"Formar Unidades",usuario:d.usuario},{default:q(()=>[e("div",ir,[i[30]||(i[30]=e("h3",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1)),i[31]||(i[31]=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1)),N(Be),e("div",dr,[e("button",{class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",onClick:i[0]||(i[0]=O=>C.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[9]||(i[9]=[e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),b(" Registrar Entrada ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:i[1]||(i[1]=O=>c.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[10]||(i[10]=[e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),b(" Registrar Corte ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:i[2]||(i[2]=O=>o.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[11]||(i[11]=[e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),b(" Registrar Regreso ")])),e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded",onClick:i[3]||(i[3]=O=>g.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[12]||(i[12]=[e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),b(" Registrar castigo ")])),e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded",onClick:i[4]||(i[4]=O=>s.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[13]||(i[13]=[e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),b(" Registrar Fin Castigo ")])),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:i[5]||(i[5]=O=>m.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[14]||(i[14]=[e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),b(" Registrar UC ")])),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:i[6]||(i[6]=O=>_.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[15]||(i[15]=[e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),b(" Regreso UC ")]))]),e("div",sr,[e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:i[7]||(i[7]=O=>h.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[16]||(i[16]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),b(" Rol Domingo ")])),e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:Oe},i[17]||(i[17]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),b(" Actualizar Rol Servicio ")])),e("button",{class:"bg-cyan-500 hover:bg-cyan-600 text-white font-semibold py-2 px-4 rounded",onClick:De},i[18]||(i[18]=[e("i",{class:"fa fa-map","aria-hidden":"true"},null,-1),b(" Actualizar Rol Rutas ")])),e("button",{class:"bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 px-4 rounded",onClick:i[8]||(i[8]=O=>V.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[19]||(i[19]=[e("i",{class:"fa fa-pencil","aria-hidden":"true"},null,-1),b(" Editar Registro ")]))]),e("div",nr,[e("h3",lr,[i[20]||(i[20]=b("Formaciones registradas: ")),e("strong",null,S(Fe()),1)]),N(n(pe),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:k,data:r.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[w],paging:!1,lengthMenu:[]}},{default:q(()=>[e("thead",null,[e("tr",ur,[i[21]||(i[21]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),e("th",cr,"FECHA: "+S(n(t)+", "+n(D))+" -- SEMANA: "+S(F),1),i[22]||(i[22]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),i[23]||(i[23]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),i[24]||(i[24]=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1)),i[25]||(i[25]=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1)),i[26]||(i[26]=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1)),i[27]||(i[27]=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1)),i[28]||(i[28]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1))]),i[29]||(i[29]=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Dom "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Ent "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tip. Ent "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ext "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. reg "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. ini "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. reg "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Ini "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Fin "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1))])]),_:1},8,["data","options"])])]),N(gt,{show:C.value,"max-width":Y,closeable:Z,onClose:W,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:d.entrada,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,ruta:d.ruta},null,8,["show","entrada","unidad","unidadesConOperador","ruta"]),N(_t,{show:c.value,"max-width":Y,closeable:Z,onClose:A,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:d.corte,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),N(Xt,{show:o.value,"max-width":Y,closeable:Z,onClose:$e,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,corte:d.corte},null,8,["show","unidad","unidadesConOperador","corte"]),N(wo,{show:g.value,"max-width":Y,closeable:Z,onClose:ce,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,castigo:d.castigo},null,8,["show","unidad","unidadesConOperador","castigo"]),N(Ma,{show:s.value,"max-width":Y,closeable:Z,onClose:Se,title:"Registrar Fin De Castigo",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,castigo:d.castigo},null,8,["show","unidad","unidadesConOperador","castigo"]),N(Po,{show:m.value,"max-width":Y,closeable:Z,onClose:Re,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,tipoUltimaCorrida:d.tipoUltimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),N(sa,{show:_.value,"max-width":Y,closeable:Z,onClose:Ee,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","unidad"]),N(Ua,{show:h.value,"max-width":Y,closeable:Z,onClose:ke,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:d.rolServicio,unidad:d.unidad},null,8,["show","rolServicio","unidad"]),N(rr,{show:V.value,"max-width":Y,closeable:Z,onClose:B,title:"Editar Registro",op:"1",modal:"modalCreate",unidadesConOperador:d.unidadesConOperador,entrada:d.entrada,corte:d.corte,castigo:d.castigo,ultimaCorrida:d.ultimaCorrida},null,8,["show","unidadesConOperador","entrada","corte","castigo","ultimaCorrida"])]),_:1},8,["usuario"]))}};export{Ur as default};
