import{u as A,i as P,r as R,o as v,j as W,e as N,a as e,g as J,t as U,w as F,d as r,k as L,b as M,K as Y,c as O,l as I,y as ge,f as g,z as K,n as te,F as se,m as re,p as ne,L as de,D as pe,q as Se,x as we}from"./app-BH2FP5Es.js";import"./buttons.print-BSLV8GpE.js";import{_ as ke}from"./Mensaje-BZxFGBY3.js";import"./jspdf.plugin.autotable-i8pxocC8.js";import{u as ie,w as Re}from"./xlsx-769MyM77.js";import{_ as De}from"./ServicioLayout-Cj-r23fv.js";import{_ as X}from"./Modal-GKd96d8N.js";/* empty css                   *//* empty css                                                */const Ee={class:"mt-2 bg-white p-4 shadow rounded-lg"},Oe={class:"border-b border-gray-900/10 pb-12"},je={class:"text-base font-semibold leading-7 text-gray-900"},Fe=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1),Ie={class:"flex flex-wrap -mx-4"},He={class:"md:col-span-2"},Me={class:"sm:col-span-2",hidden:""},Te=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1),Le={class:"mt-1"},Ve=["id"],Ne={class:"sm:col-span-2 w-56 px-4"},Be=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Ae={class:"mt-2"},We={key:0,class:"text-red-500 text-xs mt-1"},ze={class:"sm:col-span-2 px-4"},Ge=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1),qe={class:"mt-2"},Pe=["id"],Je={key:0,class:"text-red-500 text-xs"},Ke={class:"sm:col-span-2 px-4"},Xe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1),Qe={class:"mt-2"},Ye=e("label",{for:"si",class:"radio-label"}," Sí",-1),Ze=e("label",{for:"no",class:"radio-label"}," No",-1),et={key:0,class:"text-red-500 text-xs"},tt={class:"mt-6 flex items-center justify-end gap-x-6"},ot=["id"],at=e("i",{class:"fa-solid fa-ban"},null,-1),dt=["disabled"],it=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),st={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const l=a,H=d,t=A({idEntrada:l.entrada.idEntrada,unidad:l.entrada.idUnidad,horaEntrada:l.entrada.horaEntrada,extremo:l.entrada.extremo});P(()=>l.entrada,async c=>{t.idEntrada=c.idEntrada,t.unidad=c.unidad,t.horaEntrada=c.horaEntrada,t.extremo=c.extremo},{deep:!0});const E=c=>c!=null,k=c=>c!=null,p=R(""),f=R(""),y=R(""),x=async()=>{H("close"),t.reset()},S=async()=>{f.value=E(t.horaEntrada)?"":"Seleccione la hora de entrada",p.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.extremo)?"":"Seleccione una opción",!(f.value||p.value||y.value)&&t.post(K("servicio.registarHoraEntrada"),{onSuccess:()=>{x(),f.value="",p.value="",y.value=""}})};return(c,n)=>(v(),W(X,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:x},{default:N(()=>[e("div",Ee,[e("form",{onSubmit:n[5]||(n[5]=J(i=>a.op==="1"?S():c.update(),["prevent"]))},[e("div",Oe,[e("h2",je,U(a.title),1),Fe,e("div",Ie,[e("div",He,[e("div",Me,[Te,e("div",Le,[F(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":n[0]||(n[0]=i=>r(t).idEntrada=i),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+a.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ve),[[L,r(t).idEntrada]])])])]),e("div",Ne,[Be,e("div",Ae,[M(r(Y),{modelValue:r(t).unidad,"onUpdate:modelValue":n[1]||(n[1]=i=>r(t).unidad=i),options:a.unidadesConOperador.map(i=>({label:i.numeroUnidad,value:i.idUnidad})),placeholder:"Seleccione la unidad",reduce:i=>i.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),p.value!=""?(v(),O("div",We,U(p.value),1)):I("",!0)]),e("div",ze,[Ge,e("div",qe,[F(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+a.op,"onUpdate:modelValue":n[2]||(n[2]=i=>r(t).horaEntrada=i),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Pe),[[L,r(t).horaEntrada]])]),f.value!=""?(v(),O("div",Je,U(f.value),1)):I("",!0)]),e("div",Ke,[Xe,e("div",Qe,[F(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":n[3]||(n[3]=i=>r(t).extremo=i)},null,512),[[ge,r(t).extremo]]),Ye,F(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":n[4]||(n[4]=i=>r(t).extremo=i)},null,512),[[ge,r(t).extremo]]),Ze]),y.value!=""?(v(),O("div",et,U(y.value),1)):I("",!0)])])]),e("div",tt,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[at,g(" Cancelar")],8,ot),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:r(t).processing},[it,g("Guardar")],8,dt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},rt={class:"mt-2 bg-white p-4 shadow rounded-lg"},nt={class:"border-b border-gray-900/10 pb-12"},lt={class:"text-base font-semibold leading-7 text-gray-900"},ct=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),ut={class:"flex flex-wrap -mx-4"},mt={class:"sm:col-span-2 w-56 px-4"},gt=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),pt={class:"mt-2"},bt={key:0,class:"text-red-500 text-xs mt-1"},ht={class:"sm:col-span-2 px-4"},ft=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1),xt={class:"mt-2"},yt=["id"],vt={key:0,class:"text-red-500 text-xs"},_t={class:"sm:col-span-2 px-4"},Ut=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Causa "),e("span",{class:"text-red-500"},"*")],-1),Ct={class:"mt-2"},$t=["id"],St={key:0,class:"text-red-500 text-xs mt-1"},wt={class:"sm:col-span-2 px-4"},kt=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1),Rt={class:"mt-2"},Dt=["id"],Et={class:"mt-6 flex items-center justify-end gap-x-6"},Ot=["id"],jt=e("i",{class:"fa-solid fa-ban"},null,-1),Ft=["disabled"],It=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Ht={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const l=a,H=d,t=A({idCorte:l.corte.idCorte,unidad:l.corte.idUnidad,horaCorte:l.corte.horaCorte,causa:l.corte.corte,horaRegreso:l.corte.horaRegreso});P(()=>l.corte,async c=>{t.idCorte=c.idCorte,t.unidad=c.unidad,t.horaCorte=c.horaCorte,t.causa=c.causa,t.horaRegreso=c.horaRegreso},{deep:!0});const E=c=>c!=null,k=c=>typeof c=="string"&&c.trim()!=="",p=R(""),f=R(""),y=R("");R("");const x=async()=>{H("close"),t.reset()},S=async()=>{f.value=E(t.horaCorte)?"":"Seleccione la hora de corte",p.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.causa)?"":"Ingrese la causa del corte",!(f.value||p.value||y.value)&&t.post(K("servicio.registarCorte"),{onSuccess:()=>{x(),f.value="",p.value="",y.value=""}})};return(c,n)=>(v(),W(X,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:x},{default:N(()=>[e("div",rt,[e("form",{onSubmit:n[4]||(n[4]=J(i=>a.op==="1"?S():c.update(),["prevent"]))},[e("div",nt,[e("h2",lt,U(a.title),1),ct,e("div",ut,[e("div",mt,[gt,e("div",pt,[M(r(Y),{modelValue:r(t).unidad,"onUpdate:modelValue":n[0]||(n[0]=i=>r(t).unidad=i),options:a.unidadesConOperador.map(i=>({label:i.numeroUnidad,value:i.idUnidad})),placeholder:"Seleccione la unidad",reduce:i=>i.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),p.value!=""?(v(),O("div",bt,U(p.value),1)):I("",!0)]),e("div",ht,[ft,e("div",xt,[F(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+a.op,"onUpdate:modelValue":n[1]||(n[1]=i=>r(t).horaCorte=i),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,yt),[[L,r(t).horaCorte]])]),f.value!=""?(v(),O("div",vt,U(f.value),1)):I("",!0)]),e("div",_t,[Ut,e("div",Ct,[F(e("input",{type:"text",name:"causa",id:"causa"+a.op,"onUpdate:modelValue":n[2]||(n[2]=i=>r(t).causa=i),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,$t),[[L,r(t).causa]])]),y.value!=""?(v(),O("div",St,U(y.value),1)):I("",!0)]),e("div",wt,[kt,e("div",Rt,[F(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+a.op,"onUpdate:modelValue":n[3]||(n[3]=i=>r(t).horaRegreso=i),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Dt),[[L,r(t).horaRegreso]])])])])]),e("div",Et,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[jt,g(" Cancelar")],8,Ot),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:r(t).processing},[It,g("Guardar")],8,Ft)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Mt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Tt={class:"border-b border-gray-900/10 pb-12"},Lt={class:"text-base font-semibold leading-7 text-gray-900"},Vt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1),Nt={class:"flex flex-wrap -mx-4"},Bt={class:"sm:col-span-2 w-56 px-4"},At=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g(" Unidad "),e("span",{class:"text-red-500"},"*")],-1),Wt={class:"mt-2"},zt={key:0,class:"text-red-500 text-xs mt-1"},Gt={class:"sm:col-span-2 px-4"},qt=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1),Pt={class:"mt-2"},Jt=["id"],Kt={key:0,class:"text-red-500 text-xs mt-1"},Xt={class:"mt-6 flex items-center justify-end gap-x-6"},Qt=["id"],Yt=e("i",{class:"fa-solid fa-ban"},null,-1),Zt=["disabled"],eo=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),to={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const l=a,H=d,t=A({idFormacionUnidades:l.formacionUnidades.idFormacionUnidades,unidad:l.formacionUnidades.idUnidad,horaRegreso:l.formacionUnidades.horaRegreso});P(()=>l.formacionUnidades,async x=>{t.idFormacionUnidades=x.idFormacionUnidades,t.unidad=x.unidad,t.horaRegreso=l.formacionUnidades.horaRegreso},{deep:!0});const E=x=>x!=null,k=R(""),p=R(""),f=async()=>{H("close"),t.reset()},y=async()=>{p.value=E(t.horaRegreso)?"":"Seleccione la hora de regreso",k.value=E(t.unidad)?"":"Seleccione una unidad",!(p.value||k.value)&&t.post(K("servicio.registrarHoraRegreso"),{onSuccess:()=>{f(),p.value="",k.value=""}})};return(x,S)=>(v(),W(X,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:f},{default:N(()=>[e("div",Mt,[e("form",{onSubmit:S[2]||(S[2]=J(c=>a.op==="1"?y():x.update(),["prevent"]))},[e("div",Tt,[e("h2",Lt,U(a.title),1),Vt,e("div",Nt,[e("div",Bt,[At,e("div",Wt,[M(r(Y),{options:a.unidad,label:"numeroUnidad",modelValue:r(t).unidad,"onUpdate:modelValue":S[0]||(S[0]=c=>r(t).unidad=c),reduce:c=>c.idUnidad,class:te({"border-red-500":k.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),k.value?(v(),O("div",zt,U(k.value),1)):I("",!0)]),e("div",Gt,[qt,e("div",Pt,[F(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+a.op,"onUpdate:modelValue":S[1]||(S[1]=c=>r(t).horaRegreso=c),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Jt),[[L,r(t).horaRegreso]])]),p.value!=""?(v(),O("div",Kt,U(p.value),1)):I("",!0)])])]),e("div",Xt,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[Yt,g(" Cancelar")],8,Qt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:r(t).processing},[eo,g("Guardar")],8,Zt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},oo={class:"mt-2 bg-white p-4 shadow rounded-lg"},ao={class:"border-b border-gray-900/10 pb-12"},io={class:"text-base font-semibold leading-7 text-gray-900"},so=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),ro={class:"flex flex-wrap -mx-4"},no={class:"sm:col-span-2 w-56 px-4"},lo=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),co={class:"mt-2"},uo={key:0,class:"text-red-500 text-xs mt-1"},mo={class:"sm:col-span-2 px-4"},go=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Castigo "),e("span",{class:"text-red-500"},"*")],-1),po={class:"mt-2"},bo=["id"],ho={key:0,class:"text-red-500 text-xs mt-1"},fo={class:"sm:col-span-2 px-4"},xo=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),yo={class:"mt-2"},vo=["id"],_o={key:0,class:"text-red-500 text-xs"},Uo={class:"sm:col-span-2 px-4"},Co=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),$o={class:"mt-2"},So=["id"],wo={key:0,class:"text-red-500 text-xs"},ko={class:"sm:col-span-2 px-4"},Ro=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1),Do={class:"mt-2"},Eo=["id"],Oo={class:"mt-6 flex items-center justify-end gap-x-6"},jo=["id"],Fo=e("i",{class:"fa-solid fa-ban"},null,-1),Io=["disabled"],Ho=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Mo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const l=a,H=d,t=A({idCastigo:l.castigo.idCastigo,castigo:l.castigo.castigo,observaciones:l.castigo.observaciones,horaInicio:l.castigo.horaInicio,horaFin:l.castigo.horaFin,unidad:l.castigo.idUnidad});P(()=>l.castigo,async n=>{t.idCastigo=n.idCastigo,t.castigo=n.castigo,t.observaciones=n.observaciones,t.horaInicio=n.horaInicio,t.horaFin=l.horaFin,t.unidad=l.unidad},{deep:!0});const E=n=>n!=null,k=n=>typeof n=="string"&&n.trim()!=="",p=R(""),f=R(""),y=R(""),x=R(""),S=async()=>{H("close"),t.reset()},c=async()=>{f.value=E(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",p.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.castigo)?"":"Ingrese motivo del castigo",x.value=E(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(f.value||p.value||y.value||x.value)&&t.post(K("servicio.registrarCastigo"),{onSuccess:()=>{S(),f.value="",p.value="",y.value="",x.value=""}})};return(n,i)=>(v(),W(X,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:S},{default:N(()=>[e("div",oo,[e("form",{onSubmit:i[5]||(i[5]=J(_=>a.op==="1"?c():n.update(),["prevent"]))},[e("div",ao,[e("h2",io,U(a.title),1),so,e("div",ro,[e("div",no,[lo,e("div",co,[M(r(Y),{options:a.unidad,modelValue:r(t).unidad,"onUpdate:modelValue":i[0]||(i[0]=_=>r(t).unidad=_),reduce:_=>_.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:te({"border-red-500":p.value})},null,8,["options","modelValue","reduce","class"])]),p.value!=""?(v(),O("div",uo,U(p.value),1)):I("",!0)]),e("div",mo,[go,e("div",po,[F(e("input",{type:"text",name:"castigo",id:"castigo"+a.op,"onUpdate:modelValue":i[1]||(i[1]=_=>r(t).castigo=_),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,bo),[[L,r(t).castigo]])]),y.value!=""?(v(),O("div",ho,U(y.value),1)):I("",!0)]),e("div",fo,[xo,e("div",yo,[F(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+a.op,"onUpdate:modelValue":i[2]||(i[2]=_=>r(t).horaInicio=_),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,vo),[[L,r(t).horaInicio]])]),f.value!=""?(v(),O("div",_o,U(f.value),1)):I("",!0)]),e("div",Uo,[Co,e("div",$o,[F(e("input",{type:"time",name:"horaFin",id:"horaFin"+a.op,"onUpdate:modelValue":i[3]||(i[3]=_=>r(t).horaFin=_),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,So),[[L,r(t).horaFin]])]),x.value!=""?(v(),O("div",wo,U(x.value),1)):I("",!0)]),e("div",ko,[Ro,e("div",Do,[F(e("input",{type:"text",name:"observaciones",id:"observaciones"+a.op,"onUpdate:modelValue":i[4]||(i[4]=_=>r(t).observaciones=_),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Eo),[[L,r(t).observaciones]])])])])]),e("div",Oo,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:S},[Fo,g(" Cancelar")],8,jo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:r(t).processing},[Ho,g("Guardar")],8,Io)])],32)])]),_:1},8,["show","max-width","closeable"]))}},To={class:"mt-2 bg-white p-4 shadow rounded-lg"},Lo={class:"border-b border-gray-900/10 pb-12"},Vo={class:"text-base font-semibold leading-7 text-gray-900"},No=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),Bo={class:"flex flex-wrap -mx-4"},Ao={class:"sm:col-span-2 w-56 px-4"},Wo=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),zo={class:"mt-2"},Go={key:0,class:"text-red-500 text-xs mt-1"},qo={class:"sm:col-span-2 px-4"},Po=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1),Jo={class:"mt-2"},Ko=["id"],Xo=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1),Qo=["value"],Yo={key:0,class:"text-red-500 text-xs mt-1"},Zo={class:"sm:col-span-2 px-4"},ea=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),ta={class:"mt-2"},oa=["id"],aa={key:0,class:"text-red-500 text-xs"},da={class:"sm:col-span-2 px-4"},ia=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1),sa={class:"mt-2"},ra=["id"],na={class:"mt-6 flex items-center justify-end gap-x-6"},la=["id"],ca=e("i",{class:"fa-solid fa-ban"},null,-1),ua=["disabled"],ma=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ga={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const l=a,H=d,t=A({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,tipoUltimaCorrida:l.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:l.ultimaCorrida.horaInicioUC,horaFinUC:l.ultimaCorrida.horaFinUC});P(()=>l.ultimaCorrida,async c=>{t.idUltimaCorrida=c.idUltimaCorrida,t.tipoUltimaCorrida=c.tipoUltimaCorrida,t.horaInicioUC=c.horaInicioUC,t.horaFinUC=c.horaFinUC},{deep:!0});const E=c=>c!=null,k=c=>c!=null,p=R(""),f=R(""),y=R(""),x=async()=>{H("close"),t.reset()},S=async()=>{f.value=E(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",p.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(f.value||p.value||y.value)&&t.post(K("servicio.registrarUC"),{onSuccess:()=>{x(),f.value="",p.value="",y.value=""}})};return(c,n)=>(v(),W(X,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:x},{default:N(()=>[e("div",To,[e("form",{onSubmit:n[4]||(n[4]=J(i=>a.op==="1"?S():c.update(),["prevent"]))},[e("div",Lo,[e("h2",Vo,U(a.title),1),No,e("div",Bo,[e("div",Ao,[Wo,e("div",zo,[M(r(Y),{options:a.unidad,modelValue:r(t).unidad,"onUpdate:modelValue":n[0]||(n[0]=i=>r(t).unidad=i),reduce:i=>i.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:te({"border-red-500":p.value})},null,8,["options","modelValue","reduce","class"])]),p.value?(v(),O("div",Go,U(p.value),1)):I("",!0)]),e("div",qo,[Po,e("div",Jo,[F(e("select",{name:"tipoCorrida",id:"tipoCorrida"+a.op,"onUpdate:modelValue":n[1]||(n[1]=i=>r(t).tipoUltimaCorrida=i),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Xo,(v(!0),O(se,null,re(a.tipoUltimaCorrida,i=>(v(),O("option",{key:i.idTipoUltimaCorrida,value:i.idTipoUltimaCorrida},U(i.tipoUltimaCorrida),9,Qo))),128))],8,Ko),[[ne,r(t).tipoUltimaCorrida]])]),y.value!=""?(v(),O("div",Yo,U(y.value),1)):I("",!0)]),e("div",Zo,[ea,e("div",ta,[F(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+a.op,"onUpdate:modelValue":n[2]||(n[2]=i=>r(t).horaInicioUC=i),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,oa),[[L,r(t).horaInicioUC]])]),f.value!=""?(v(),O("div",aa,U(f.value),1)):I("",!0)]),e("div",da,[ia,e("div",sa,[F(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+a.op,"onUpdate:modelValue":n[3]||(n[3]=i=>r(t).horaFinUC=i),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ra),[[L,r(t).horaFinUC]])])])])]),e("div",na,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[ca,g(" Cancelar")],8,la),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:r(t).processing},[ma,g("Guardar")],8,ua)])],32)])]),_:1},8,["show","max-width","closeable"]))}},pa={class:"mt-2 bg-white p-4 shadow rounded-lg"},ba={class:"border-b border-gray-900/10 pb-12"},ha={class:"text-base font-semibold leading-7 text-gray-900"},fa=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),xa={class:"flex flex-wrap -mx-4"},ya={class:"sm:col-span-2 w-56 px-4"},va=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),_a={class:"mt-2"},Ua={key:0,class:"text-red-500 text-xs mt-1"},Ca={class:"sm:col-span-2 px-4"},$a=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Sa={class:"mt-2"},wa=["id"],ka={key:0,class:"text-red-500 text-xs mt-1"},Ra={class:"mt-6 flex items-center justify-end gap-x-6"},Da=["id"],Ea=e("i",{class:"fa-solid fa-ban"},null,-1),Oa=["disabled"],ja=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Fa={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const l=a,H=d,t=A({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,horaFinUC:l.ultimaCorrida.horaFinUC});P(()=>l.ultimaCorrida,async x=>{t.idUltimaCorrida=x.idUltimaCorrida,t.horaFinUC=x.horaFinUC},{deep:!0});const E=x=>x!=null,k=R(""),p=R(""),f=async()=>{H("close"),t.reset()},y=async()=>{p.value=E(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",k.value=E(t.unidad)?"":"Seleccione una unidad",!(p.value||k.value)&&t.post(K("servicio.regresoUC"),{onSuccess:()=>{f(),p.value="",k.value=""}})};return(x,S)=>(v(),W(X,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:f},{default:N(()=>[e("div",pa,[e("form",{onSubmit:S[2]||(S[2]=J(c=>a.op==="1"?y():x.update(),["prevent"]))},[e("div",ba,[e("h2",ha,U(a.title),1),fa,e("div",xa,[e("div",ya,[va,e("div",_a,[M(r(Y),{options:a.unidad,modelValue:r(t).unidad,"onUpdate:modelValue":S[0]||(S[0]=c=>r(t).unidad=c),label:"numeroUnidad",reduce:c=>c.idUnidad,class:te({"border-red-500":k.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),k.value!==""?(v(),O("div",Ua,U(k.value),1)):I("",!0)]),e("div",Ca,[$a,e("div",Sa,[F(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+a.op,"onUpdate:modelValue":S[1]||(S[1]=c=>r(t).horaFinUC=c),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,wa),[[L,r(t).horaFinUC]])]),k.value!=""?(v(),O("div",ka,U(k.value),1)):I("",!0)])])]),e("div",Ra,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[Ea,g(" Cancelar")],8,Da),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:r(t).processing},[ja,g("Guardar")],8,Oa)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Ia={class:"mt-2 bg-white p-4 shadow rounded-lg"},Ha={class:"text-base font-semibold leading-7 text-gray-900"},Ma={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},Ta={class:"sm:col-span-2 px-4"},La=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Va={class:"mt-2"},Na=e("option",{disabled:""},"Seleccione una o más unidades",-1),Ba=["value"],Aa={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},Wa={class:"sm:col-span-2 px-4"},za=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Ga={class:"mt-2"},qa=e("option",{disabled:""},"Seleccione una o más unidades",-1),Pa=["value"],Ja={key:0,class:"text-red-500 text-xs mt-1 mb-4"},Ka={class:"mt-6 flex items-center justify-end gap-x-6"},Xa=["id"],Qa=e("i",{class:"fa-solid fa-ban"},null,-1),Ya=["disabled"],Za=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ed={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const l=a,H=d,t=A({idRolServicio:l.rolServicio.idRolServicio,unidad:[],trabajaDomingo:l.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});P(()=>l.rolServicio,async n=>{t.idRolServicio=n.idRolServicio,t.trabajaDomingo=n.trabajaDomingo},{deep:!0});const E=async()=>{H("close"),t.reset()},k=(n,i)=>n.length>0||i.length>0,p=R(""),f=async()=>{p.value=k(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!p.value&&t.post(K("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{E(),p.value=""}})},y=()=>{const n=new Date,i=n.getDay(),_=i===0?7:i,z=new Date(n);return z.setDate(n.getDate()-_),z.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},x=()=>{const n=new Date,_=7-n.getDay(),z=new Date(n);return z.setDate(n.getDate()+_),z.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},S=y(),c=x();return(n,i)=>(v(),W(X,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:E},{default:N(()=>[e("div",Ia,[e("form",{onSubmit:i[2]||(i[2]=J(_=>a.op==="1"?f():n.update(),["prevent"]))},[e("h2",Ha,U(a.title),1),e("p",Ma,[g("Seleccione las unidades que trabajaron el : "),e("strong",null,U(r(S)),1),g(". ")]),e("div",Ta,[La,e("div",Va,[F(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":i[0]||(i[0]=_=>r(t).unidadesSi=_),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Na,(v(!0),O(se,null,re(a.unidad,_=>(v(),O("option",{key:_.idUnidad,value:_.idUnidad},U(_.numeroUnidad),9,Ba))),128))],512),[[ne,r(t).unidadesSi]])])]),e("p",Aa,[g("Seleccione las unidades que trabajarán el próximo: "),e("strong",null,U(r(c)),1),g(". ")]),e("div",Wa,[za,e("div",Ga,[F(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":i[1]||(i[1]=_=>r(t).unidadesNo=_),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[qa,(v(!0),O(se,null,re(a.unidad,_=>(v(),O("option",{key:_.idUnidad,value:_.idUnidad},U(_.numeroUnidad),9,Pa))),128))],512),[[ne,r(t).unidadesNo]])])]),p.value?(v(),O("div",Ja,U(p.value),1)):I("",!0),e("div",Ka,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:E},[Qa,g(" Cancelar")],8,Xa),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:r(t).processing},[Za,g("Guardar")],8,Ya)])],32)])]),_:1},8,["show","max-width","closeable"]))}},td={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},od=e("h2",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1),ad=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1),dd={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},id=e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),sd=e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),rd=e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),nd=e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),ld=e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),cd={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},ud=e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),md=e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),gd={class:"overflow-x-auto"},pd={class:"text-sm leading-normal border-b border-gray-300"},bd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),hd={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},fd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),xd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),yd=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1),vd=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1),_d=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1),Ud=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1),Cd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),$d=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Trab. DOMINGO "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Extremo "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo de Corrida "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. finaliza "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1),G="xl",q=!0,Id={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(a){de.use(pe),de.use(pe);const d=a,l=new Date().toLocaleDateString(),H=t(new Date().getDay());function t(b){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][b]}Se(()=>d.entrada.filter(b=>new Date(b.fechaRegistro).toLocaleDateString()===l));const E=()=>{we(()=>{const h=$("#formacionTablaId").DataTable().rows({search:"applied",page:"current"}).data();if(!h.length){console.warn("No hay datos para exportar.");return}const C=new Date().toISOString().split("T")[0],j=Object.fromEntries(d.ruta.map(m=>[m.idRuta,m.nombreRuta])),u=Object.fromEntries(d.rolServicio.map(m=>[m.idRolServicio,m.trabajaDomingo])),o=Object.fromEntries(d.unidad.map(m=>[m.idUnidad,m.numeroUnidad])),s=Object.fromEntries(d.directivo.map(m=>[m.idDirectivo,m.nombre_completo])),D=Object.fromEntries(d.entrada.map(m=>[m.idUnidad,{horaEntrada:m.horaEntrada,tipoEntrada:m.tipoEntrada,extremo:m.extremo,created_at:m.created_at}]));Object.fromEntries(d.corte.map(m=>[m.idUnidad,[]]));const V=Object.fromEntries(d.ultimaCorrida.map(m=>[m.idUnidad,{tipoCorrida:m.idTipoUltimaCorrida,horaInicioUC:m.horaInicioUC,horaFinUC:m.horaFinUC,created_at:m.created_at}]));Object.fromEntries(d.castigo.map(m=>[m.idUnidad,[]]));const Z=Object.fromEntries(d.operador.map(m=>[m.idOperador,m.nombre_completo])),B=m=>{if(!m)return"";const[w,Q]=m.split(":");return`${w}:${Q}`},ve=h.toArray().reduce((m,w)=>{var ue,me;const Q=D[w.idUnidad]||{},$e=d.corte.filter(T=>T.idUnidad===w.idUnidad&&T.created_at.split("T")[0]===C),ee=V[w.idUnidad]||{},ce=d.castigo.filter(T=>T.idUnidad===w.idUnidad&&T.created_at.split("T")[0]===C),oe=((ue=Q.created_at)==null?void 0:ue.split("T")[0])===C,ae=((me=ee.created_at)==null?void 0:me.split("T")[0])===C;return ce.length>0,m[w.idUnidad]||(m[w.idUnidad]={ID:w.idUnidad,Ruta:j[w.idRuta]||"N/A","Trab. Domingo":u[w.idRolServicio]||"Sin Asignar",Unidad:o[w.idUnidad]||"","Socio/Prestador":s[w.idDirectivo]||"","Hr. Entrada":oe&&B(Q.horaEntrada)||"","Tipo Entrada":oe&&Q.tipoEntrada||"",Extremo:oe&&Q.extremo||"","Hr. Corte":"",Causa:"","Hr. Regreso":"","Tipo De Corrida":ae&&ee.tipoCorrida||"","Hr. Inicio UC":ae&&B(ee.horaInicioUC)||"","Hr. Regreso UC":ae&&B(ee.horaFinUC)||"","Hr. Inicio":"","Hr. Finaliza":"",Motivo:"","Otras Observaciones":"",Operador:Z[w.idOperador]||"Sin Asignar"}),$e.forEach(T=>{m[w.idUnidad]["Hr. Corte"]+=(m[w.idUnidad]["Hr. Corte"]?", ":"")+B(T.horaCorte),m[w.idUnidad].Causa+=(m[w.idUnidad].Causa?", ":"")+T.causa,m[w.idUnidad]["Hr. Regreso"]+=(m[w.idUnidad]["Hr. Regreso"]?", ":"")+B(T.horaRegreso)}),ce.forEach(T=>{m[w.idUnidad]["Hr. Inicio"]+=(m[w.idUnidad]["Hr. Inicio"]?", ":"")+B(T.horaInicio),m[w.idUnidad]["Hr. Finaliza"]+=(m[w.idUnidad]["Hr. Finaliza"]?", ":"")+B(T.horaFin),m[w.idUnidad].Motivo+=(m[w.idUnidad].Motivo?", ":"")+T.castigo,m[w.idUnidad]["Otras Observaciones"]+=(m[w.idUnidad]["Otras Observaciones"]?", ":"")+T.observaciones}),m},{}),_e=Object.values(ve),Ue=ie.json_to_sheet(_e),le=ie.book_new();ie.book_append_sheet(le,Ue,"Formación De Unidades");const Ce=new Date().toISOString().split("T")[0];Re(le,`Formación_De_Unidades_${Ce}.xlsx`)})},k=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>E()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],p=[{data:null,render:function(b,h,C,j){return j.row+1}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.ruta.find(s=>s.idRuta===u.idRuta);return o?o.nombreRuta:""}else return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.rolServicio.filter(s=>s.idUnidad===u.idUnidad);return o.length>0?(o.sort((s,D)=>new Date(D.created_at)-new Date(s.created_at)),o[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);return u?u.numeroUnidad:""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.directivo.find(s=>s.idDirectivo===u.idDirectivo);return o?o.nombre_completo:""}else return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.entrada.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(D=>D.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.entrada.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(D=>D.tipoEntrada).join(", ")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.entrada.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(D=>D.extremo).join(", ")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.corte.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((D,V)=>`
            <div style="${o.length>1&&V!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${D.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.corte.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((D,V)=>`
            <div style="${o.length>1&&V!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${D.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.corte.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((D,V)=>{const Z=D.horaRegreso?D.horaRegreso.substring(0,5):"";return`
            <div style="${o.length>1&&V!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${Z}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.ultimaCorrida.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0){const s=d.tipoUltimaCorrida.find(D=>D.idTipoUltimaCorrida===o[0].idTipoUltimaCorrida);if(s)return s.tipoUltimaCorrida}}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.ultimaCorrida.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0){const s=o[0].horaInicioUC;return s?s.substring(0,5):""}}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.ultimaCorrida.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0){const s=o[0].horaFinUC;if(s)return s.substring(0,5)}}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>({horaInicio:s.horaInicio?s.horaInicio.substring(0,5):""}));return o.map((s,D)=>`
          <div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${s.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>({horaFin:s.horaFin?s.horaFin.substring(0,5):""}));return o.map((s,D)=>`
          <div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${s.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>s.castigo||"");return o.map((s,D)=>`<div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${s}</div>`).join("")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>s.observaciones||"");return o.map((s,D)=>`<div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${s}</div>`).join("")}return""}},{data:"idUnidad",render:function(b,h,C,j){const u=d.unidad.find(o=>o.idUnidad===b);if(u){const o=d.operador.find(s=>s.idOperador===u.idOperador);return o?o.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],f=R(!1),y=R(!1),x=R(!1),S=R(!1),c=R(!1),n=R(!1),i=R(!1);R(!1),A({});const _=()=>{f.value=!1},z=()=>{y.value=!1},be=()=>{x.value=!1},he=()=>{S.value=!1},fe=()=>{c.value=!1},xe=()=>{n.value=!1},ye=()=>{i.value=!1};return(b,h)=>(v(),W(De,{title:"Formar Unidades",usuario:d.usuario},{default:N(()=>[e("div",td,[od,ad,M(ke),e("div",dd,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:h[0]||(h[0]=C=>f.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[id,g(" Registrar Entrada ")]),e("button",{class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:h[1]||(h[1]=C=>y.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[sd,g(" Registrar Corte ")]),e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:h[2]||(h[2]=C=>S.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[rd,g(" Registrar Regreso ")]),e("button",{class:"bg-yellow-500 hover:bg-yellow-500 text-white font-semibold py-2 px-4 rounded",onClick:h[3]||(h[3]=C=>x.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[nd,g(" Registrar castigo ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:h[4]||(h[4]=C=>c.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[ld,g(" Registrar UC ")])]),e("div",cd,[e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:h[5]||(h[5]=C=>n.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[ud,g(" Regreso UC ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:h[6]||(h[6]=C=>i.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[md,g(" Rol domingo ")])]),e("div",gd,[M(r(de),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:p,data:a.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[k],paging:!1,lengthMenu:[]}},{default:N(()=>[e("thead",null,[e("tr",pd,[bd,e("th",hd,"FECHA: "+U(r(H)+", "+r(l)),1),fd,xd,yd,vd,_d,Ud,Cd]),$d])]),_:1},8,["data","options"])])]),M(st,{show:f.value,"max-width":G,closeable:q,onClose:_,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:d.entrada,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","entrada","unidad","unidadesConOperador"]),M(Ht,{show:y.value,"max-width":G,closeable:q,onClose:z,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:d.corte,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),M(to,{show:S.value,"max-width":G,closeable:q,onClose:he,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:d.unidad},null,8,["show","unidad"]),M(Mo,{show:x.value,"max-width":G,closeable:q,onClose:be,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:d.unidad,castigo:d.castigo},null,8,["show","unidad","castigo"]),M(ga,{show:c.value,"max-width":G,closeable:q,onClose:fe,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,tipoUltimaCorrida:d.tipoUltimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),M(Fa,{show:n.value,"max-width":G,closeable:q,onClose:xe,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","unidad"]),M(ed,{show:i.value,"max-width":G,closeable:q,onClose:ye,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:d.rolServicio,unidad:d.unidad},null,8,["show","rolServicio","unidad"])]),_:1},8,["usuario"]))}};export{Id as default};
