import{u as X,q as Me,i as P,r as k,o as y,j as Y,e as J,a as e,g as te,t as w,w as M,d as n,k as L,b as B,L as ee,c as E,l as H,y as ue,f as b,z as K,n as me,F as re,m as ie,p as ce,G as Ne,C as fe,D as we,M as Se,x as Be}from"./app-Bbx-LdAj.js";import"./buttons.print-DewsfZWX.js";import{_ as Ve}from"./Mensaje-ihDyNWfU.js";import"./jspdf.plugin.autotable-J_W0OmA_.js";import{S as le}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{u as xe,w as Le}from"./xlsx-DjuO7_Ju.js";import{_ as Ae}from"./ServicioLayout-C53bXUkO.js";import{_ as oe}from"./Modal-Dz9bKKA8.js";/* empty css                   *//* empty css                                                */const ze={class:"mt-2 bg-white p-4 shadow rounded-lg"},We={class:"border-b border-gray-900/10 pb-12"},Ge={class:"text-base font-semibold leading-7 text-gray-900"},Pe={class:"flex flex-wrap -mx-4"},qe={class:"md:col-span-2"},Je={class:"sm:col-span-2",hidden:""},Ke={class:"mt-1"},Xe=["id"],Ye={class:"sm:col-span-2 w-56 px-4"},Ze={class:"mt-2"},Qe={key:0,class:"text-red-500 text-xs mt-1"},et={class:"sm:col-span-2 px-4"},tt={class:"mt-2"},ot=["id"],at={key:0,class:"text-red-500 text-xs"},rt={class:"sm:col-span-2 px-4"},it={class:"mt-2"},dt={key:0,class:"text-red-500 text-xs"},st={class:"sm:col-span-2 px-4"},nt={class:"mt-2"},lt={class:"block w-72 rounded-md border border-gray-300 px-1.5 py-1.5 text-gray-900 bg-gray-100 shadow-sm sm:text-sm sm:leading-6"},ut={class:"mt-6 flex items-center justify-end gap-x-6"},ct=["id"],mt=["disabled"],gt={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},ruta:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idEntrada:l.entrada.idEntrada,unidad:l.entrada.idUnidad,horaEntrada:l.entrada.horaEntrada,extremo:l.entrada.extremo}),F=Me(()=>{const s=l.unidadesConOperador.find(o=>o.idUnidad===t.unidad);return s&&s.ruta?s.ruta.nombreRuta:"Nombre de ruta"});P(()=>l.entrada,async s=>{t.idEntrada=s.idEntrada,t.unidad=s.unidad,t.horaEntrada=s.horaEntrada,t.extremo=s.extremo},{deep:!0});const S=s=>s!=null,x=s=>s!=null,v=k(""),R=k(""),C=k(""),u=async()=>{D("close"),t.reset()},g=async()=>{R.value=S(t.horaEntrada)?"":"Seleccione la hora de entrada",v.value=S(t.unidad)?"":"Seleccione una unidad",C.value=x(t.extremo)?"":"Seleccione una opción",!(R.value||v.value||C.value)&&t.post(K("servicio.registarHoraEntrada"),{onSuccess:()=>{u(),R.value="",v.value="",C.value=""}})};return(s,o)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:u},{default:J(()=>[e("div",ze,[e("form",{onSubmit:o[5]||(o[5]=te(c=>r.op==="1"?g():s.update(),["prevent"]))},[e("div",We,[e("h2",Ge,w(r.title),1),o[13]||(o[13]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1)),e("div",Pe,[e("div",qe,[e("div",Je,[o[6]||(o[6]=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1)),e("div",Ke,[M(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":o[0]||(o[0]=c=>n(t).idEntrada=c),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+r.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Xe),[[L,n(t).idEntrada]])])])]),e("div",Ye,[o[7]||(o[7]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",Ze,[B(n(ee),{modelValue:n(t).unidad,"onUpdate:modelValue":o[1]||(o[1]=c=>n(t).unidad=c),options:r.unidadesConOperador.map(c=>({label:c.numeroUnidad,value:c.idUnidad})),placeholder:"Seleccione la unidad",reduce:c=>c.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),v.value!=""?(y(),E("div",Qe,w(v.value),1)):H("",!0)]),e("div",et,[o[8]||(o[8]=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1)),e("div",tt,[M(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+r.op,"onUpdate:modelValue":o[2]||(o[2]=c=>n(t).horaEntrada=c),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ot),[[L,n(t).horaEntrada]])]),R.value!=""?(y(),E("div",at,w(R.value),1)):H("",!0)]),e("div",rt,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1)),e("div",it,[M(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":o[3]||(o[3]=c=>n(t).extremo=c)},null,512),[[ue,n(t).extremo]]),o[9]||(o[9]=e("label",{for:"si",class:"radio-label"}," Sí",-1)),M(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":o[4]||(o[4]=c=>n(t).extremo=c)},null,512),[[ue,n(t).extremo]]),o[10]||(o[10]=e("label",{for:"no",class:"radio-label"}," No",-1))]),C.value!=""?(y(),E("div",dt,w(C.value),1)):H("",!0)]),e("div",st,[o[12]||(o[12]=e("label",{for:"ruta",class:"block text-sm font-medium leading-6 text-gray-900"},"Ruta",-1)),e("div",nt,[e("span",lt,w(F.value),1)])])])]),e("div",ut,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:u},o[14]||(o[14]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,ct),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},o[15]||(o[15]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,mt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},pt={class:"mt-2 bg-white p-4 shadow rounded-lg"},bt={class:"border-b border-gray-900/10 pb-12"},ft={class:"text-base font-semibold leading-7 text-gray-900"},xt={class:"flex flex-wrap -mx-4"},yt={class:"sm:col-span-2 w-56 px-4"},ht={class:"mt-2"},vt={key:0,class:"text-red-500 text-xs mt-1"},Ct={class:"sm:col-span-2 px-4"},Ut={class:"mt-2"},wt=["id"],St={key:0,class:"text-red-500 text-xs"},$t={class:"sm:col-span-2 px-4"},Rt={class:"mt-2"},Et=["id"],kt={key:0,class:"text-red-500 text-xs mt-1"},Ot={class:"sm:col-span-2 px-4"},Dt={class:"mt-2"},Ft=["id"],jt={class:"mt-6 flex items-center justify-end gap-x-6"},It=["id"],Ht=["disabled"],_t={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idCorte:l.corte.idCorte,unidad:l.corte.idUnidad,horaCorte:l.corte.horaCorte,causa:l.corte.corte,horaRegreso:l.corte.horaRegreso});P(()=>l.corte,async g=>{t.idCorte=g.idCorte,t.unidad=g.unidad,t.horaCorte=g.horaCorte,t.causa=g.causa,t.horaRegreso=g.horaRegreso},{deep:!0});const F=g=>g!=null,S=g=>typeof g=="string"&&g.trim()!=="",x=k(""),v=k(""),R=k("");k("");const C=async()=>{D("close"),t.reset()},u=async()=>{v.value=F(t.horaCorte)?"":"Seleccione la hora de corte",x.value=F(t.unidad)?"":"Seleccione una unidad",R.value=S(t.causa)?"":"Ingrese la causa del corte",!(v.value||x.value||R.value)&&t.post(K("servicio.registarCorte"),{onSuccess:()=>{C(),v.value="",x.value="",R.value=""}})};return(g,s)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:C},{default:J(()=>[e("div",pt,[e("form",{onSubmit:s[4]||(s[4]=te(o=>r.op==="1"?u():g.update(),["prevent"]))},[e("div",bt,[e("h2",ft,w(r.title),1),s[9]||(s[9]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",xt,[e("div",yt,[s[5]||(s[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ht,[B(n(ee),{modelValue:n(t).unidad,"onUpdate:modelValue":s[0]||(s[0]=o=>n(t).unidad=o),options:r.unidadesConOperador.map(o=>({label:o.numeroUnidad,value:o.idUnidad})),placeholder:"Seleccione la unidad",reduce:o=>o.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),x.value!=""?(y(),E("div",vt,w(x.value),1)):H("",!0)]),e("div",Ct,[s[6]||(s[6]=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ut,[M(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+r.op,"onUpdate:modelValue":s[1]||(s[1]=o=>n(t).horaCorte=o),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,wt),[[L,n(t).horaCorte]])]),v.value!=""?(y(),E("div",St,w(v.value),1)):H("",!0)]),e("div",$t,[s[7]||(s[7]=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Causa "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Rt,[M(e("input",{type:"text",name:"causa",id:"causa"+r.op,"onUpdate:modelValue":s[2]||(s[2]=o=>n(t).causa=o),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Et),[[L,n(t).causa]])]),R.value!=""?(y(),E("div",kt,w(R.value),1)):H("",!0)]),e("div",Ot,[s[8]||(s[8]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1)),e("div",Dt,[M(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+r.op,"onUpdate:modelValue":s[3]||(s[3]=o=>n(t).horaRegreso=o),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ft),[[L,n(t).horaRegreso]])])])])]),e("div",jt,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},s[10]||(s[10]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,It),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},s[11]||(s[11]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Ht)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Tt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Mt={class:"border-b border-gray-900/10 pb-12"},Nt={class:"text-base font-semibold leading-7 text-gray-900"},Bt={class:"flex flex-wrap -mx-4"},Vt={class:"sm:col-span-2 w-56 px-4"},Lt={class:"mt-2"},At={key:0,class:"text-red-500 text-xs mt-1"},zt={class:"sm:col-span-2 px-4"},Wt={class:"mt-2"},Gt=["id"],Pt={key:0,class:"text-red-500 text-xs mt-1"},qt={class:"mt-6 flex items-center justify-end gap-x-6"},Jt=["id"],Kt=["disabled"],Xt={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idCorte:l.corte.idCorte,unidad:l.corte.idUnidad,horaRegreso:l.corte.horaRegreso});P(()=>l.corte,async C=>{t.idCorte=C.idCorte,t.unidad=C.unidad,t.horaRegreso=l.corte.horaRegreso},{deep:!0});const F=C=>C!=null,S=k(""),x=k(""),v=async()=>{D("close"),t.reset()},R=async()=>{x.value=F(t.horaRegreso)?"":"Seleccione la hora de regreso",S.value=F(t.unidad)?"":"Seleccione una unidad",!(x.value||S.value)&&t.post(K("servicio.registrarHoraRegreso"),{onSuccess:()=>{v(),x.value="",S.value=""}})};return(C,u)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:v},{default:J(()=>[e("div",Tt,[e("form",{onSubmit:u[2]||(u[2]=te(g=>r.op==="1"?R():C.update(),["prevent"]))},[e("div",Mt,[e("h2",Nt,w(r.title),1),u[5]||(u[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1)),e("div",Bt,[e("div",Vt,[u[3]||(u[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",Lt,[B(n(ee),{modelValue:n(t).unidad,"onUpdate:modelValue":u[0]||(u[0]=g=>n(t).unidad=g),options:r.unidadesConOperador.map(g=>({label:g.numeroUnidad,value:g.idUnidad})),placeholder:"Seleccione la unidad",reduce:g=>g.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),S.value!=""?(y(),E("div",At,w(S.value),1)):H("",!0)]),e("div",zt,[u[4]||(u[4]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Wt,[M(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+r.op,"onUpdate:modelValue":u[1]||(u[1]=g=>n(t).horaRegreso=g),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Gt),[[L,n(t).horaRegreso]])]),x.value!=""?(y(),E("div",Pt,w(x.value),1)):H("",!0)])])]),e("div",qt,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:v},u[6]||(u[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,Jt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},u[7]||(u[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Kt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Yt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Zt={class:"border-b border-gray-900/10 pb-12"},Qt={class:"text-base font-semibold leading-7 text-gray-900"},eo={class:"flex flex-wrap -mx-4"},to={class:"sm:col-span-2 w-56 px-4"},oo={class:"mt-2"},ao={key:0,class:"text-red-500 text-xs mt-1"},ro={class:"sm:col-span-2 px-4"},io={class:"mt-2"},so=["id"],no={key:0,class:"text-red-500 text-xs mt-1"},lo={class:"sm:col-span-2 px-4"},uo={class:"mt-2"},co=["id"],mo={key:0,class:"text-red-500 text-xs"},go={class:"sm:col-span-2 px-4"},po={class:"mt-2"},bo=["id"],fo={key:0,class:"text-red-500 text-xs"},xo={class:"sm:col-span-2 px-4"},yo={class:"mt-2"},ho=["id"],vo={class:"mt-6 flex items-center justify-end gap-x-6"},Co=["id"],Uo=["disabled"],wo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idCastigo:l.castigo.idCastigo,castigo:l.castigo.castigo,observaciones:l.castigo.observaciones,horaInicio:l.castigo.horaInicio,horaFin:l.castigo.horaFin,unidad:l.castigo.idUnidad});P(()=>l.castigo,async s=>{t.idCastigo=s.idCastigo,t.castigo=s.castigo,t.observaciones=s.observaciones,t.horaInicio=s.horaInicio,t.horaFin=l.horaFin,t.unidad=l.unidad},{deep:!0});const F=s=>s!=null,S=s=>typeof s=="string"&&s.trim()!=="",x=k(""),v=k(""),R=k(""),C=k(""),u=async()=>{D("close"),t.reset()},g=async()=>{v.value=F(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",x.value=F(t.unidad)?"":"Seleccione una unidad",R.value=S(t.castigo)?"":"Ingrese motivo del castigo",!(v.value||x.value||R.value)&&t.post(K("servicio.registrarCastigo"),{onSuccess:()=>{u(),v.value="",x.value="",R.value=""}})};return(s,o)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:u},{default:J(()=>[e("div",Yt,[e("form",{onSubmit:o[5]||(o[5]=te(c=>r.op==="1"?g():s.update(),["prevent"]))},[e("div",Zt,[e("h2",Qt,w(r.title),1),o[11]||(o[11]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",eo,[e("div",to,[o[6]||(o[6]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",oo,[B(n(ee),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":o[0]||(o[0]=c=>n(t).unidad=c),reduce:c=>c.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:me({"border-red-500":x.value})},null,8,["options","modelValue","reduce","class"])]),x.value!=""?(y(),E("div",ao,w(x.value),1)):H("",!0)]),e("div",ro,[o[7]||(o[7]=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Castigo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",io,[M(e("input",{type:"text",name:"castigo",id:"castigo"+r.op,"onUpdate:modelValue":o[1]||(o[1]=c=>n(t).castigo=c),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,so),[[L,n(t).castigo]])]),R.value!=""?(y(),E("div",no,w(R.value),1)):H("",!0)]),e("div",lo,[o[8]||(o[8]=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",uo,[M(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+r.op,"onUpdate:modelValue":o[2]||(o[2]=c=>n(t).horaInicio=c),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,co),[[L,n(t).horaInicio]])]),v.value!=""?(y(),E("div",mo,w(v.value),1)):H("",!0)]),e("div",go,[o[9]||(o[9]=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin ",-1)),e("div",po,[M(e("input",{type:"time",name:"horaFin",id:"horaFin"+r.op,"onUpdate:modelValue":o[3]||(o[3]=c=>n(t).horaFin=c),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,bo),[[L,n(t).horaFin]])]),C.value!=""?(y(),E("div",fo,w(C.value),1)):H("",!0)]),e("div",xo,[o[10]||(o[10]=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1)),e("div",yo,[M(e("input",{type:"text",name:"observaciones",id:"observaciones"+r.op,"onUpdate:modelValue":o[4]||(o[4]=c=>n(t).observaciones=c),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ho),[[L,n(t).observaciones]])])])])]),e("div",vo,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:u},o[12]||(o[12]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,Co),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},o[13]||(o[13]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Uo)])],32)])]),_:1},8,["show","max-width","closeable"]))}},So={class:"mt-2 bg-white p-4 shadow rounded-lg"},$o={class:"border-b border-gray-900/10 pb-12"},Ro={class:"text-base font-semibold leading-7 text-gray-900"},Eo={class:"flex flex-wrap -mx-4"},ko={class:"sm:col-span-2 w-56 px-4"},Oo={class:"mt-2"},Do={key:0,class:"text-red-500 text-xs mt-1"},Fo={class:"sm:col-span-2 px-4"},jo={class:"mt-2"},Io=["id"],Ho=["value"],_o={key:0,class:"text-red-500 text-xs mt-1"},To={class:"sm:col-span-2 px-4"},Mo={class:"mt-2"},No=["id"],Bo={key:0,class:"text-red-500 text-xs"},Vo={class:"sm:col-span-2 px-4"},Lo={class:"mt-2"},Ao=["id"],zo={class:"mt-6 flex items-center justify-end gap-x-6"},Wo=["id"],Go=["disabled"],Po={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,tipoUltimaCorrida:l.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:l.ultimaCorrida.horaInicioUC,horaFinUC:l.ultimaCorrida.horaFinUC});P(()=>l.ultimaCorrida,async g=>{t.idUltimaCorrida=g.idUltimaCorrida,t.tipoUltimaCorrida=g.tipoUltimaCorrida,t.horaInicioUC=g.horaInicioUC,t.horaFinUC=g.horaFinUC},{deep:!0});const F=g=>g!=null,S=g=>g!=null,x=k(""),v=k(""),R=k(""),C=async()=>{D("close"),t.reset()},u=async()=>{v.value=F(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",x.value=F(t.unidad)?"":"Seleccione una unidad",R.value=S(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(v.value||x.value||R.value)&&t.post(K("servicio.registrarUC"),{onSuccess:()=>{C(),v.value="",x.value="",R.value=""}})};return(g,s)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:C},{default:J(()=>[e("div",So,[e("form",{onSubmit:s[4]||(s[4]=te(o=>r.op==="1"?u():g.update(),["prevent"]))},[e("div",$o,[e("h2",Ro,w(r.title),1),s[10]||(s[10]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",Eo,[e("div",ko,[s[5]||(s[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Oo,[B(n(ee),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":s[0]||(s[0]=o=>n(t).unidad=o),reduce:o=>o.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:me({"border-red-500":x.value})},null,8,["options","modelValue","reduce","class"])]),x.value?(y(),E("div",Do,w(x.value),1)):H("",!0)]),e("div",Fo,[s[7]||(s[7]=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1)),e("div",jo,[M(e("select",{name:"tipoCorrida",id:"tipoCorrida"+r.op,"onUpdate:modelValue":s[1]||(s[1]=o=>n(t).tipoUltimaCorrida=o),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[s[6]||(s[6]=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1)),(y(!0),E(re,null,ie(r.tipoUltimaCorrida,o=>(y(),E("option",{key:o.idTipoUltimaCorrida,value:o.idTipoUltimaCorrida},w(o.tipoUltimaCorrida),9,Ho))),128))],8,Io),[[ce,n(t).tipoUltimaCorrida]])]),R.value!=""?(y(),E("div",_o,w(R.value),1)):H("",!0)]),e("div",To,[s[8]||(s[8]=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Mo,[M(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+r.op,"onUpdate:modelValue":s[2]||(s[2]=o=>n(t).horaInicioUC=o),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,No),[[L,n(t).horaInicioUC]])]),v.value!=""?(y(),E("div",Bo,w(v.value),1)):H("",!0)]),e("div",Vo,[s[9]||(s[9]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1)),e("div",Lo,[M(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+r.op,"onUpdate:modelValue":s[3]||(s[3]=o=>n(t).horaFinUC=o),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ao),[[L,n(t).horaFinUC]])])])])]),e("div",zo,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},s[11]||(s[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,Wo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},s[12]||(s[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Go)])],32)])]),_:1},8,["show","max-width","closeable"]))}},qo={class:"mt-2 bg-white p-4 shadow rounded-lg"},Jo={class:"border-b border-gray-900/10 pb-12"},Ko={class:"text-base font-semibold leading-7 text-gray-900"},Xo={class:"flex flex-wrap -mx-4"},Yo={class:"sm:col-span-2 w-56 px-4"},Zo={class:"mt-2"},Qo={key:0,class:"text-red-500 text-xs mt-1"},ea={class:"sm:col-span-2 px-4"},ta={class:"mt-2"},oa=["id"],aa={key:0,class:"text-red-500 text-xs mt-1"},ra={class:"mt-6 flex items-center justify-end gap-x-6"},ia=["id"],da=["disabled"],sa={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,horaFinUC:l.ultimaCorrida.horaFinUC});P(()=>l.ultimaCorrida,async C=>{t.idUltimaCorrida=C.idUltimaCorrida,t.horaFinUC=C.horaFinUC},{deep:!0});const F=C=>C!=null,S=k(""),x=k(""),v=async()=>{D("close"),t.reset()},R=async()=>{x.value=F(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",S.value=F(t.unidad)?"":"Seleccione una unidad",!(x.value||S.value)&&t.post(K("servicio.regresoUC"),{onSuccess:()=>{v(),x.value="",S.value=""}})};return(C,u)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:v},{default:J(()=>[e("div",qo,[e("form",{onSubmit:u[2]||(u[2]=te(g=>r.op==="1"?R():C.update(),["prevent"]))},[e("div",Jo,[e("h2",Ko,w(r.title),1),u[5]||(u[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",Xo,[e("div",Yo,[u[3]||(u[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Zo,[B(n(ee),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":u[0]||(u[0]=g=>n(t).unidad=g),label:"numeroUnidad",reduce:g=>g.idUnidad,class:me({"border-red-500":S.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),S.value!==""?(y(),E("div",Qo,w(S.value),1)):H("",!0)]),e("div",ea,[u[4]||(u[4]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Hora fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ta,[M(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+r.op,"onUpdate:modelValue":u[1]||(u[1]=g=>n(t).horaFinUC=g),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,oa),[[L,n(t).horaFinUC]])]),S.value!=""?(y(),E("div",aa,w(S.value),1)):H("",!0)])])]),e("div",ra,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:v},u[6]||(u[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,ia),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},u[7]||(u[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,da)])],32)])]),_:1},8,["show","max-width","closeable"]))}},na={class:"mt-2 bg-white p-4 shadow rounded-lg"},la={class:"text-base font-semibold leading-7 text-gray-900"},ua={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ca={class:"sm:col-span-2 px-4"},ma={class:"mt-2"},ga=["value"],pa={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ba={class:"sm:col-span-2 px-4"},fa={class:"mt-2"},xa=["value"],ya={key:0,class:"text-red-500 text-xs mt-1 mb-4"},ha={class:"mt-6 flex items-center justify-end gap-x-6"},va=["id"],Ca=["disabled"],Ua={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idRolServicio:l.rolServicio.idRolServicio,unidad:[],trabajaDomingo:l.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});P(()=>l.rolServicio,async o=>{t.idRolServicio=o.idRolServicio,t.trabajaDomingo=o.trabajaDomingo},{deep:!0});const F=async()=>{D("close"),t.reset()},S=(o,c)=>o.length>0||c.length>0,x=k(""),v=async()=>{x.value=S(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!x.value&&t.post(K("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{F(),x.value=""}})},R=()=>{const o=new Date,c=o.getDay(),_=c===0?7:c,G=new Date(o);return G.setDate(o.getDate()-_),G.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},C=()=>{const o=new Date,_=7-o.getDay(),G=new Date(o);return G.setDate(o.getDate()+_),G.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},u=R(),g=C();function s(o){return o.sort((c,_)=>{const G=parseInt(c.numeroUnidad.split("-")[1],10),U=parseInt(_.numeroUnidad.split("-")[1],10);return G-U})}return P(()=>l.unidad,o=>{t.unidad=s([...o])},{immediate:!0}),(o,c)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:F},{default:J(()=>[e("div",na,[e("form",{onSubmit:c[2]||(c[2]=te(_=>r.op==="1"?v():o.update(),["prevent"]))},[e("h2",la,w(r.title),1),e("p",ua,[c[3]||(c[3]=b("Seleccione las unidades que trabajaron el : ")),e("strong",null,w(n(u)),1),c[4]||(c[4]=b(". "))]),e("div",ca,[c[6]||(c[6]=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ma,[M(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":c[0]||(c[0]=_=>n(t).unidadesSi=_),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[c[5]||(c[5]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(y(!0),E(re,null,ie(n(t).unidad,_=>(y(),E("option",{key:_.idUnidad,value:_.idUnidad},w(_.numeroUnidad),9,ga))),128))],512),[[ce,n(t).unidadesSi]])])]),e("p",pa,[c[7]||(c[7]=b("Seleccione las unidades que trabajarán el próximo: ")),e("strong",null,w(n(g)),1),c[8]||(c[8]=b(". "))]),e("div",ba,[c[10]||(c[10]=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",fa,[M(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":c[1]||(c[1]=_=>n(t).unidadesNo=_),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[c[9]||(c[9]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(y(!0),E(re,null,ie(n(t).unidad,_=>(y(),E("option",{key:_.idUnidad,value:_.idUnidad},w(_.numeroUnidad),9,xa))),128))],512),[[ce,n(t).unidadesNo]])])]),x.value?(y(),E("div",ya,w(x.value),1)):H("",!0),e("div",ha,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:F},c[11]||(c[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,va),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},c[12]||(c[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Ca)])],32)])]),_:1},8,["show","max-width","closeable"]))}},wa={class:"mt-2 bg-white p-4 shadow rounded-lg"},Sa={class:"border-b border-gray-900/10 pb-12"},$a={class:"text-base font-semibold leading-7 text-gray-900"},Ra={class:"flex flex-wrap -mx-4"},Ea={class:"sm:col-span-2 w-56 px-4"},ka={class:"mt-2"},Oa={key:0,class:"text-red-500 text-xs mt-1"},Da={class:"sm:col-span-2 px-4"},Fa={class:"mt-2"},ja=["id"],Ia={key:0,class:"text-red-500 text-xs"},Ha={class:"mt-6 flex items-center justify-end gap-x-6"},_a=["id"],Ta=["disabled"],Ma={__name:"FormularioFinCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d,t=X({idCastigo:l.castigo.idCastigo,horaFin:l.castigo.horaFin,unidad:l.castigo.idUnidad});P(()=>l.castigo,async C=>{t.idCastigo=C.idCastigo,t.horaFin=l.horaFin,t.unidad=l.unidad},{deep:!0});const F=C=>C!=null,S=k(""),x=k(""),v=async()=>{D("close"),t.reset()},R=async()=>{S.value=F(t.unidad)?"":"Seleccione una unidad",x.value=F(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(S.value||x.value)&&t.post(K("servicio.registrarFinCastigo"),{onSuccess:()=>{v(),S.value="",x.value=""}})};return(C,u)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:v},{default:J(()=>[e("div",wa,[e("form",{onSubmit:u[2]||(u[2]=te(g=>r.op==="1"?R():C.update(),["prevent"]))},[e("div",Sa,[e("h2",$a,w(r.title),1),u[5]||(u[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[b("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),b(" son obligatorios. ")],-1)),e("div",Ra,[e("div",Ea,[u[3]||(u[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[b("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ka,[B(n(ee),{options:r.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":u[0]||(u[0]=g=>n(t).unidad=g),reduce:g=>g.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:me({"border-red-500":S.value})},null,8,["options","modelValue","reduce","class"])]),S.value!=""?(y(),E("div",Oa,w(S.value),1)):H("",!0)]),e("div",Da,[u[4]||(u[4]=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin ",-1)),e("div",Fa,[M(e("input",{type:"time",name:"horaFin",id:"horaFin"+r.op,"onUpdate:modelValue":u[1]||(u[1]=g=>n(t).horaFin=g),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ja),[[L,n(t).horaFin]])]),x.value!=""?(y(),E("div",Ia,w(x.value),1)):H("",!0)])])]),e("div",Ha,[e("button",{type:"button",id:"cerrar"+r.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:v},u[6]||(u[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar")]),8,_a),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},u[7]||(u[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar")]),8,Ta)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Na={class:"mt-2 bg-white p-4 shadow rounded-lg"},Ba={class:"border-b border-gray-900/10 pb-12"},Va={class:"text-base font-semibold leading-7 text-gray-900"},La={class:"flex flex-wrap -mx-4"},Aa={class:"sm:col-span-2 w-64 px-4"},za={class:"mt-2"},Wa={class:"sm:col-span-2 w-72 px-4"},Ga={class:"mt-2"},Pa={class:"mt-4"},qa={key:0},Ja=["for"],Ka={class:"mt-2"},Xa=["onUpdate:modelValue"],Ya=["onUpdate:modelValue"],Za={key:2},Qa=["value","onUpdate:modelValue"],er=["onUpdate:modelValue"],tr=["value"],or={key:0,class:"mt-4"},ar=["value"],rr={class:"mt-6 flex items-center justify-end gap-x-6"},ir=["disabled"],dr={__name:"FormularioEditarRegistro",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},ultimaCorrida:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(r,{emit:d}){const l=r,D=d;console.log("Estoy en el formulario editar registro");const t=X({idEntrada:l.entrada.idEntrada,horaEntrada:l.entrada.horaEntrada,extremo:l.entrada.extremo,idCorte:l.corte.idCorte,horaCorte:l.corte.horaCorte,causa:l.corte.causa,horaRegreso:l.corte.horaRegreso,idCastigo:l.castigo.idCastigo,castigo:l.castigo.castigo,observaciones:l.castigo.observaciones,horaInicio:l.castigo.horaInicio,horaFin:l.castigo.horaFin,idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,horaInicioUC:l.ultimaCorrida.horaInicioUC,horaFinUC:l.ultimaCorrida.horaFinUC,tipoUltimaCorrida:l.ultimaCorrida.idTipoUltimaCorrida}),F=k(null),S=k(null),x=k([]);k({});const v=k([]),R=k(null),C=U=>{switch(U){case"entradas":return{horaEntrada:{label:"Hora de Entrada",type:"time"},extremo:{label:"Extremo",type:"radio",options:["SI","NO"]}};case"cortes":return{horaCorte:{label:"Hora de Corte",type:"time"},causa:{label:"Causa",type:"text"},horaRegreso:{label:"Hora de Regreso",type:"time"}};case"castigos":return{castigo:{label:"Motivo",type:"text"},observaciones:{label:"Observaciones",type:"text"},horaInicio:{label:"Hora de Inicio",type:"time"},horaFin:{label:"Hora de Fin",type:"time"}};case"ultima_corrida":return{horaInicioUC:{label:"Hora de Inicio de Última Corrida",type:"time"},horaFinUC:{label:"Hora de Fin de Última Corrida",type:"time"},idTipoUltimaCorrida:{label:"Tipo de Última Corrida",type:"select",options:[]}}}};P(()=>R.value,U=>{U&&(console.log("Registro seleccionado:",U),u(U))});const u=U=>{t.horaEntrada=U.horaEntrada,t.extremo=U.extremo,t.horaCorte=U.horaCorte,t.causa=U.causa,t.horaRegreso=U.horaRegreso,t.castigo=U.castigo,t.observaciones=U.observaciones,t.horaInicio=U.horaInicio,t.horaFin=U.horaFin,t.horaInicioUC=U.horaInicioUC,t.horaFinUC=U.horaFinUC,t.tipoUltimaCorrida=U.tipoUltimaCorrida};P(()=>l.entrada,async U=>{t.idEntrada=U.idEntrada,t.horaEntrada=U.horaEntrada,t.extremo=U.extremo},{deep:!0}),P(()=>l.corte,async U=>{t.form.horaCorte=U.horaCorte,t.causa=U.causa,t.horaRegreso=U.horaRegreso}),P(()=>S,U=>{console.log("Tipo de Registro seleccionado:",U),U&&(x.value=C(U),console.log("Form Fields después de la selección:",x.value))});const g=U=>U!=null,s=[{label:"Entrada",value:"entradas"},{label:"Corte",value:"cortes"},{label:"Castigo",value:"castigos"},{label:"Ultima Corrida",value:"ultima_corrida"}],o=k("");k(""),k("");const c=async()=>{D("close"),t.reset()},_=async()=>{if(F.value&&S.value)try{const U=await Ne.get(K("servicio.obtenerRegistros",{tipoRegistro:S.value.value}),{params:{idUnidad:F.value.value}});v.value=U.data,v.value.length===1?(R.value=v.value[0],u(R.value)):R.value=null,x.value=C(S.value.value)}catch(U){console.error("Error fetching records:",U)}},G=async()=>{o.value=g(t.unidad)?"":"Seleccione una unidad",!o.value&&t.post(K("servicio.registarHoraEntrada"),{onSuccess:()=>{c(),o.value=""}})};return(U,V)=>(y(),Y(oe,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:c},{default:J(()=>[e("div",Na,[e("form",{onSubmit:te(G,["prevent"])},[e("div",Ba,[e("h2",Va,w(r.title),1),e("div",La,[e("div",Aa,[V[3]||(V[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",za,[B(n(ee),{modelValue:F.value,"onUpdate:modelValue":V[0]||(V[0]=N=>F.value=N),options:r.unidadesConOperador.map(N=>({label:N.numeroUnidad,value:N.idUnidad})),placeholder:"Seleccione la unidad",onChange:_,class:"w-full"},null,8,["modelValue","options"])])]),e("div",Wa,[V[4]||(V[4]=e("label",{for:"tipoRegistro",class:"block text-sm font-medium leading-6 text-gray-900"},"Tipo de Registro",-1)),e("div",Ga,[B(n(ee),{modelValue:S.value,"onUpdate:modelValue":V[1]||(V[1]=N=>S.value=N),options:s,placeholder:"Seleccione un tipo de registro",onChange:_,class:"w-full"},null,8,["modelValue"])])])])]),e("div",Pa,[x.value?(y(),E("div",qa,[(y(!0),E(re,null,ie(x.value,(N,z)=>(y(),E("div",{key:z,class:"mb-4"},[e("label",{for:z,class:"block text-sm font-medium leading-6 text-gray-900"},w(N.label),9,Ja),e("div",Ka,[N.type==="time"?M((y(),E("input",{key:0,type:"time","onUpdate:modelValue":A=>n(t)[z]=A,class:"border rounded p-1 w-full"},null,8,Xa)),[[L,n(t)[z]]]):H("",!0),N.type==="text"?M((y(),E("input",{key:1,type:"text","onUpdate:modelValue":A=>n(t)[z]=A,class:"border rounded p-1 w-full"},null,8,Ya)),[[L,n(t)[z]]]):H("",!0),N.type==="radio"?(y(),E("div",Za,[(y(!0),E(re,null,ie(N.options,A=>(y(),E("div",{key:A,class:"flex items-center"},[M(e("input",{type:"radio",value:A,"onUpdate:modelValue":ge=>n(t)[z]=ge,class:"mr-2"},null,8,Qa),[[ue,n(t)[z]]]),e("label",null,w(A),1)]))),128))])):H("",!0),N.type==="select"?M((y(),E("select",{key:3,"onUpdate:modelValue":A=>n(t)[z]=A,class:"border rounded p-1 w-full"},[(y(!0),E(re,null,ie(N.options,A=>(y(),E("option",{key:A.value,value:A.value},w(A.label),9,tr))),128))],8,er)),[[ce,n(t)[z]]]):H("",!0)])]))),128))])):H("",!0)]),v.value.length>1?(y(),E("div",or,[V[5]||(V[5]=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Registros Disponibles",-1)),(y(!0),E(re,null,ie(v.value,N=>(y(),E("div",{key:N.idEntrada,class:"flex items-center mb-2"},[M(e("input",{type:"radio",value:N,"onUpdate:modelValue":V[2]||(V[2]=z=>R.value=z),class:"mr-2"},null,8,ar),[[ue,R.value]]),e("span",null,w(N.horaCorte)+" - "+w(N.causa),1)]))),128))])):H("",!0),e("div",rr,[e("button",{type:"button",class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded",onClick:c},V[6]||(V[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),b(" Cancelar ")])),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},V[7]||(V[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),b("Guardar ")]),8,ir)])],32)])]),_:1},8,["show","max-width","closeable"]))}},sr={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},nr={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},lr={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},ur={class:"overflow-x-auto"},cr={class:"text-center"},mr={class:"text-sm leading-normal border-b border-gray-300"},gr={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},Z="xl",Q=!0,Sr={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(r){fe.use(we),fe.use(we);const d=r;function l(h){const i=new Date(h),O=new Date(i.setDate(i.getDate()-i.getDay()+1)),T=new Date(i.getFullYear(),0,1),p=Math.floor((O-T)/(24*60*60*1e3));return Math.ceil((p+T.getDay()+1)/7)}const D=new Date().toLocaleDateString(),t=S(new Date().getDay()),F=l(new Date)+1;function S(h){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][h]}const x=()=>{Be(()=>{const i=$("#formacionTablaId").DataTable().rows({search:"applied",page:"current"}).data();if(!i.length){console.warn("No hay datos para exportar.");return}const O=new Date().toISOString().split("T")[0],T=Object.fromEntries(d.ruta.map(f=>[f.idRuta,f.nombreRuta])),p=Object.fromEntries(d.rolServicio.map(f=>[f.idUnidad,f.trabajaDomingo])),a=Object.fromEntries(d.unidad.map(f=>[f.idUnidad,f.numeroUnidad])),m=Object.fromEntries(d.directivo.map(f=>[f.idDirectivo,f.nombre_completo])),I=Object.fromEntries(d.entrada.map(f=>[f.idUnidad,{horaEntrada:f.horaEntrada,tipoEntrada:f.tipoEntrada,extremo:f.extremo,created_at:f.created_at}]));Object.fromEntries(d.corte.map(f=>[f.idUnidad,[]]));const q=Object.fromEntries(d.ultimaCorrida.map(f=>[f.idUnidad,{tipoCorrida:f.idTipoUltimaCorrida,horaInicioUC:f.horaInicioUC,horaFinUC:f.horaFinUC,created_at:f.created_at}]));Object.fromEntries(d.castigo.map(f=>[f.idUnidad,[]]));const se=Object.fromEntries(d.operador.map(f=>[f.idOperador,f.nombre_completo])),ye=Object.fromEntries(d.tipoUltimaCorrida.map(f=>[f.idTipoUltimaCorrida,f.tipoUltimaCorrida])),ae=f=>{if(!f)return"";const[j,de]=f.split(":");return`${j}:${de}`},je=i.toArray().reduce((f,j)=>{var Ce,Ue;const de=I[j.idUnidad]||{},Te=d.corte.filter(W=>W.idUnidad===j.idUnidad&&W.created_at.split("T")[0]===O),ne=q[j.idUnidad]||{},ve=d.castigo.filter(W=>W.idUnidad===j.idUnidad&&W.created_at.split("T")[0]===O);p[j.idUnidad];const pe=((Ce=de.created_at)==null?void 0:Ce.split("T")[0])===O,be=((Ue=ne.created_at)==null?void 0:Ue.split("T")[0])===O;return ve.length>0,f[j.idUnidad]||(f[j.idUnidad]={ID:j.idUnidad,Ruta:T[j.idRuta]||"N/A","Trab. Domingo":p[j.idUnidad]||"Sin Asignar",Unidad:a[j.idUnidad]||"","Socio/Prestador":m[j.idDirectivo]||"","Hr. Entrada":pe&&ae(de.horaEntrada)||"","Tipo Entrada":pe&&de.tipoEntrada||"",Extremo:pe&&de.extremo||"","Hr. Corte":"",Causa:"","Hr. Regreso":"","Tipo De Corrida":be&&ye[ne.tipoCorrida]||"","Hr. Inicio UC":be&&ae(ne.horaInicioUC)||"","Hr. Regreso UC":be&&ae(ne.horaFinUC)||"","Hr. Inicio":"","Hr. Finaliza":"",Motivo:"","Otras Observaciones":"",Operador:se[j.idOperador]||"Sin Asignar"}),Te.forEach(W=>{f[j.idUnidad]["Hr. Corte"]+=(f[j.idUnidad]["Hr. Corte"]?", ":"")+ae(W.horaCorte),f[j.idUnidad].Causa+=(f[j.idUnidad].Causa?", ":"")+W.causa,f[j.idUnidad]["Hr. Regreso"]+=(f[j.idUnidad]["Hr. Regreso"]?", ":"")+ae(W.horaRegreso)}),ve.forEach(W=>{f[j.idUnidad]["Hr. Inicio"]+=(f[j.idUnidad]["Hr. Inicio"]?", ":"")+ae(W.horaInicio),f[j.idUnidad]["Hr. Finaliza"]+=(f[j.idUnidad]["Hr. Finaliza"]?", ":"")+ae(W.horaFin),f[j.idUnidad].Motivo+=(f[j.idUnidad].Motivo?", ":"")+W.castigo,f[j.idUnidad]["Otras Observaciones"]+=(f[j.idUnidad]["Otras Observaciones"]?", ":"")+W.observaciones}),f},{}),Ie=Object.values(je),He=xe.json_to_sheet(Ie),he=xe.book_new();xe.book_append_sheet(he,He,"Formación De Unidades");const _e=new Date().toISOString().split("T")[0];Le(he,`Formación_De_Unidades_${_e}.xlsx`)})},v=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>x()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],R=[{data:null,render:function(h,i,O,T){return T.row+1}},{data:"idUnidad",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.ruta.find(m=>m.idRuta===p.idRuta);return a?a.nombreRuta:""}else return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.rolServicio.filter(m=>m.idUnidad===p.idUnidad);return a.length>0?(a.sort((m,I)=>new Date(I.created_at)-new Date(m.created_at)),a[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);return p?p.numeroUnidad:""}},{data:"idUnidad",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.directivo.find(m=>m.idDirectivo===p.idDirectivo);return a?a.nombre_completo:""}else return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.entrada.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0)return a.map(I=>I.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.entrada.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0)return a.map(I=>I.tipoEntrada).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.entrada.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0)return a.map(I=>I.extremo).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.corte.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0)return a.map((I,q)=>`
            <div style="${a.length>1&&q!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${I.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.corte.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0)return a.map((I,q)=>`
            <div style="${a.length>1&&q!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${I.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.corte.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0)return a.map((I,q)=>{const se=I.horaRegreso?I.horaRegreso.substring(0,5):"";return`
            <div style="${a.length>1&&q!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${se}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.ultimaCorrida.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0){const m=d.tipoUltimaCorrida.find(I=>I.idTipoUltimaCorrida===a[0].idTipoUltimaCorrida);if(m)return m.tipoUltimaCorrida}}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.ultimaCorrida.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0){const m=a[0].horaInicioUC;return m?m.substring(0,5):""}}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.ultimaCorrida.filter(m=>m.idUnidad===p.idUnidad&&new Date(m.created_at).toLocaleDateString()===D);if(a.length>0){const m=a[0].horaFinUC;if(m)return m.substring(0,5)}}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===h&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(m=>({horaInicio:m.horaInicio?m.horaInicio.substring(0,5):""}));return a.map((m,I)=>`
          <div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${m.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===h&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(m=>({horaFin:m.horaFin?m.horaFin.substring(0,5):""}));return a.map((m,I)=>`
          <div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${m.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===h&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(m=>m.castigo||"");return a.map((m,I)=>`<div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${m}</div>`).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(h,i,O,T){const p=d.castigo.filter(a=>a.idUnidad===h&&new Date(a.created_at).toLocaleDateString()===D);if(p.length>0){const a=p.map(m=>m.observaciones||"");return a.map((m,I)=>`<div style="${a.length>1&&I!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${m}</div>`).join("")}return""}},{data:"idUnidad",render:function(h,i,O,T){const p=d.unidad.find(a=>a.idUnidad===h);if(p){const a=d.operador.find(m=>m.idOperador===p.idOperador);return a?a.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],C=k(!1),u=k(!1),g=k(!1),s=k(!1),o=k(!1),c=k(!1),_=k(!1),G=k(!1);k(!1);const U=k(!1);X({});const V=()=>{U.value=!1},N=()=>{C.value=!1},z=()=>{u.value=!1},A=()=>{g.value=!1},ge=()=>{s.value=!1},$e=()=>{o.value=!1},Re=()=>{c.value=!1},Ee=()=>{_.value=!1},ke=()=>{G.value=!1},Oe=()=>{le.fire({title:"¿Seguro de actualizar el Rol de Domingo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(h=>{h.isConfirmed&&Se.Inertia.post(route("servicio.cambiarRolServicio"),{},{onError:i=>{le.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de servicio",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de servicio:",i)}})})},De=()=>{le.fire({title:"¿Seguro de actualizar el Rol de Ruta?",text:'Las unidades que están en la ruta "LIBRAMIENTO - PLAZA DEL VALLE" se cambiarán a la ruta "ESMERALDA - COL. JARDIN" y viceversa',icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(h=>{h.isConfirmed&&Se.Inertia.post(route("servicio.actualizarRolRuta"),{_method:"PUT"},{onError:i=>{le.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de rutas",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de rutas:",i)}})})},Fe=()=>d.entrada.filter(h=>h.horaEntrada&&new Date(h.created_at).toLocaleDateString()===D).length;return(h,i)=>(y(),Y(Ae,{title:"Formar Unidades",usuario:d.usuario},{default:J(()=>[e("div",sr,[i[30]||(i[30]=e("h3",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1)),i[31]||(i[31]=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1)),B(Ve),e("div",nr,[e("button",{class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",onClick:i[0]||(i[0]=O=>C.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[9]||(i[9]=[e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),b(" Registrar Entrada ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:i[1]||(i[1]=O=>u.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[10]||(i[10]=[e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),b(" Registrar Corte ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:i[2]||(i[2]=O=>o.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[11]||(i[11]=[e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),b(" Registrar Regreso ")])),e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded",onClick:i[3]||(i[3]=O=>g.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[12]||(i[12]=[e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),b(" Registrar castigo ")])),e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded",onClick:i[4]||(i[4]=O=>s.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[13]||(i[13]=[e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),b(" Registrar Fin Castigo ")])),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:i[5]||(i[5]=O=>c.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[14]||(i[14]=[e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),b(" Registrar UC ")])),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:i[6]||(i[6]=O=>_.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[15]||(i[15]=[e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),b(" Regreso UC ")]))]),e("div",lr,[e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:i[7]||(i[7]=O=>G.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[16]||(i[16]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),b(" Rol Domingo ")])),e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:Oe},i[17]||(i[17]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),b(" Actualizar Rol Servicio ")])),e("button",{class:"bg-cyan-500 hover:bg-cyan-600 text-white font-semibold py-2 px-4 rounded",onClick:De},i[18]||(i[18]=[e("i",{class:"fa fa-map","aria-hidden":"true"},null,-1),b(" Actualizar Rol Rutas ")])),e("button",{class:"bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 px-4 rounded",onClick:i[8]||(i[8]=O=>U.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[19]||(i[19]=[e("i",{class:"fa fa-pencil","aria-hidden":"true"},null,-1),b(" Editar Registro ")]))]),e("div",ur,[e("h3",cr,[i[20]||(i[20]=b("Formaciones registradas: ")),e("strong",null,w(Fe()),1)]),B(n(fe),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:R,data:r.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[v],paging:!1,lengthMenu:[]}},{default:J(()=>[e("thead",null,[e("tr",mr,[i[21]||(i[21]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),e("th",gr,"FECHA: "+w(n(t)+", "+n(D))+" -- SEMANA: "+w(F),1),i[22]||(i[22]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),i[23]||(i[23]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),i[24]||(i[24]=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1)),i[25]||(i[25]=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1)),i[26]||(i[26]=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1)),i[27]||(i[27]=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1)),i[28]||(i[28]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1))]),i[29]||(i[29]=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Dom "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Ent "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tip. Ent "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ext "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. reg "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. ini "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. reg "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Ini "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Fin "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1))])]),_:1},8,["data","options"])])]),B(gt,{show:C.value,"max-width":Z,closeable:Q,onClose:N,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:d.entrada,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,ruta:d.ruta},null,8,["show","entrada","unidad","unidadesConOperador","ruta"]),B(_t,{show:u.value,"max-width":Z,closeable:Q,onClose:z,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:d.corte,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),B(Xt,{show:o.value,"max-width":Z,closeable:Q,onClose:$e,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,corte:d.corte},null,8,["show","unidad","unidadesConOperador","corte"]),B(wo,{show:g.value,"max-width":Z,closeable:Q,onClose:A,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,castigo:d.castigo},null,8,["show","unidad","unidadesConOperador","castigo"]),B(Ma,{show:s.value,"max-width":Z,closeable:Q,onClose:ge,title:"Registrar Fin De Castigo",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,castigo:d.castigo},null,8,["show","unidad","unidadesConOperador","castigo"]),B(Po,{show:c.value,"max-width":Z,closeable:Q,onClose:Re,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,tipoUltimaCorrida:d.tipoUltimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),B(sa,{show:_.value,"max-width":Z,closeable:Q,onClose:Ee,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","unidad"]),B(Ua,{show:G.value,"max-width":Z,closeable:Q,onClose:ke,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:d.rolServicio,unidad:d.unidad},null,8,["show","rolServicio","unidad"]),B(dr,{show:U.value,"max-width":Z,closeable:Q,onClose:V,title:"Editar Registro",op:"1",modal:"modalCreate",unidadesConOperador:d.unidadesConOperador,entrada:d.entrada,corte:d.corte,castigo:d.castigo,ultimaCorrida:d.ultimaCorrida},null,8,["show","unidadesConOperador","entrada","corte","castigo","ultimaCorrida"])]),_:1},8,["usuario"]))}};export{Sr as default};
