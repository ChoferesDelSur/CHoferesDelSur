import{u as W,i as z,r as R,o as v,j as G,e as A,a as e,g as J,t as _,w as I,d as s,k as L,b as M,K as Z,c as O,l as H,y as he,f as g,z as X,n as oe,F as ne,m as le,p as ce,L as re,D as fe,q as Re,M as De,x as Ee}from"./app-BssTUcFw.js";import"./buttons.print-DB2PTDT8.js";import{_ as Oe}from"./Mensaje-CmPHCCRa.js";import"./jspdf.plugin.autotable-Bf485zsA.js";import{S as xe}from"./sweetalert2.all-BI7Nnjjf.js";import{u as se,w as je}from"./xlsx-769MyM77.js";import{_ as Fe}from"./ServicioLayout-CW4OSyL2.js";import{_ as Q}from"./Modal-DMobyPDh.js";/* empty css                   *//* empty css                                                */const Ie={class:"mt-2 bg-white p-4 shadow rounded-lg"},He={class:"border-b border-gray-900/10 pb-12"},Te={class:"text-base font-semibold leading-7 text-gray-900"},Me=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1),Be={class:"flex flex-wrap -mx-4"},Le={class:"md:col-span-2"},Ve={class:"sm:col-span-2",hidden:""},Ne=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1),Ae={class:"mt-1"},ze=["id"],We={class:"sm:col-span-2 w-56 px-4"},Ge=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Pe={class:"mt-2"},qe={key:0,class:"text-red-500 text-xs mt-1"},Ke={class:"sm:col-span-2 px-4"},Je=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1),Xe={class:"mt-2"},Qe=["id"],Ye={key:0,class:"text-red-500 text-xs"},Ze={class:"sm:col-span-2 px-4"},et=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1),tt={class:"mt-2"},ot=e("label",{for:"si",class:"radio-label"}," Sí",-1),at=e("label",{for:"no",class:"radio-label"}," No",-1),it={key:0,class:"text-red-500 text-xs"},dt={class:"mt-6 flex items-center justify-end gap-x-6"},rt=["id"],st=e("i",{class:"fa-solid fa-ban"},null,-1),nt=["disabled"],lt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ct={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const n=i,T=d,t=W({idEntrada:n.entrada.idEntrada,unidad:n.entrada.idUnidad,horaEntrada:n.entrada.horaEntrada,extremo:n.entrada.extremo});z(()=>n.entrada,async l=>{t.idEntrada=l.idEntrada,t.unidad=l.unidad,t.horaEntrada=l.horaEntrada,t.extremo=l.extremo},{deep:!0});const E=l=>l!=null,k=l=>l!=null,b=R(""),f=R(""),y=R(""),x=async()=>{T("close"),t.reset()},C=async()=>{f.value=E(t.horaEntrada)?"":"Seleccione la hora de entrada",b.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.extremo)?"":"Seleccione una opción",!(f.value||b.value||y.value)&&t.post(X("servicio.registarHoraEntrada"),{onSuccess:()=>{x(),f.value="",b.value="",y.value=""}})};return(l,m)=>(v(),G(Q,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:x},{default:A(()=>[e("div",Ie,[e("form",{onSubmit:m[5]||(m[5]=J(a=>i.op==="1"?C():l.update(),["prevent"]))},[e("div",He,[e("h2",Te,_(i.title),1),Me,e("div",Be,[e("div",Le,[e("div",Ve,[Ne,e("div",Ae,[I(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":m[0]||(m[0]=a=>s(t).idEntrada=a),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+i.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ze),[[L,s(t).idEntrada]])])])]),e("div",We,[Ge,e("div",Pe,[M(s(Z),{modelValue:s(t).unidad,"onUpdate:modelValue":m[1]||(m[1]=a=>s(t).unidad=a),options:i.unidadesConOperador.map(a=>({label:a.numeroUnidad,value:a.idUnidad})),placeholder:"Seleccione la unidad",reduce:a=>a.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),b.value!=""?(v(),O("div",qe,_(b.value),1)):H("",!0)]),e("div",Ke,[Je,e("div",Xe,[I(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+i.op,"onUpdate:modelValue":m[2]||(m[2]=a=>s(t).horaEntrada=a),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Qe),[[L,s(t).horaEntrada]])]),f.value!=""?(v(),O("div",Ye,_(f.value),1)):H("",!0)]),e("div",Ze,[et,e("div",tt,[I(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":m[3]||(m[3]=a=>s(t).extremo=a)},null,512),[[he,s(t).extremo]]),ot,I(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":m[4]||(m[4]=a=>s(t).extremo=a)},null,512),[[he,s(t).extremo]]),at]),y.value!=""?(v(),O("div",it,_(y.value),1)):H("",!0)])])]),e("div",dt,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[st,g(" Cancelar")],8,rt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:s(t).processing},[lt,g("Guardar")],8,nt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ut={class:"mt-2 bg-white p-4 shadow rounded-lg"},mt={class:"border-b border-gray-900/10 pb-12"},gt={class:"text-base font-semibold leading-7 text-gray-900"},pt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),bt={class:"flex flex-wrap -mx-4"},ht={class:"sm:col-span-2 w-56 px-4"},ft=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),xt={class:"mt-2"},yt={key:0,class:"text-red-500 text-xs mt-1"},vt={class:"sm:col-span-2 px-4"},_t=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1),Ut={class:"mt-2"},Ct=["id"],$t={key:0,class:"text-red-500 text-xs"},St={class:"sm:col-span-2 px-4"},wt=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Causa "),e("span",{class:"text-red-500"},"*")],-1),kt={class:"mt-2"},Rt=["id"],Dt={key:0,class:"text-red-500 text-xs mt-1"},Et={class:"sm:col-span-2 px-4"},Ot=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1),jt={class:"mt-2"},Ft=["id"],It={class:"mt-6 flex items-center justify-end gap-x-6"},Ht=["id"],Tt=e("i",{class:"fa-solid fa-ban"},null,-1),Mt=["disabled"],Bt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Lt={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const n=i,T=d,t=W({idCorte:n.corte.idCorte,unidad:n.corte.idUnidad,horaCorte:n.corte.horaCorte,causa:n.corte.corte,horaRegreso:n.corte.horaRegreso});z(()=>n.corte,async l=>{t.idCorte=l.idCorte,t.unidad=l.unidad,t.horaCorte=l.horaCorte,t.causa=l.causa,t.horaRegreso=l.horaRegreso},{deep:!0});const E=l=>l!=null,k=l=>typeof l=="string"&&l.trim()!=="",b=R(""),f=R(""),y=R("");R("");const x=async()=>{T("close"),t.reset()},C=async()=>{f.value=E(t.horaCorte)?"":"Seleccione la hora de corte",b.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.causa)?"":"Ingrese la causa del corte",!(f.value||b.value||y.value)&&t.post(X("servicio.registarCorte"),{onSuccess:()=>{x(),f.value="",b.value="",y.value=""}})};return(l,m)=>(v(),G(Q,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:x},{default:A(()=>[e("div",ut,[e("form",{onSubmit:m[4]||(m[4]=J(a=>i.op==="1"?C():l.update(),["prevent"]))},[e("div",mt,[e("h2",gt,_(i.title),1),pt,e("div",bt,[e("div",ht,[ft,e("div",xt,[M(s(Z),{modelValue:s(t).unidad,"onUpdate:modelValue":m[0]||(m[0]=a=>s(t).unidad=a),options:i.unidadesConOperador.map(a=>({label:a.numeroUnidad,value:a.idUnidad})),placeholder:"Seleccione la unidad",reduce:a=>a.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),b.value!=""?(v(),O("div",yt,_(b.value),1)):H("",!0)]),e("div",vt,[_t,e("div",Ut,[I(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+i.op,"onUpdate:modelValue":m[1]||(m[1]=a=>s(t).horaCorte=a),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ct),[[L,s(t).horaCorte]])]),f.value!=""?(v(),O("div",$t,_(f.value),1)):H("",!0)]),e("div",St,[wt,e("div",kt,[I(e("input",{type:"text",name:"causa",id:"causa"+i.op,"onUpdate:modelValue":m[2]||(m[2]=a=>s(t).causa=a),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Rt),[[L,s(t).causa]])]),y.value!=""?(v(),O("div",Dt,_(y.value),1)):H("",!0)]),e("div",Et,[Ot,e("div",jt,[I(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+i.op,"onUpdate:modelValue":m[3]||(m[3]=a=>s(t).horaRegreso=a),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ft),[[L,s(t).horaRegreso]])])])])]),e("div",It,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[Tt,g(" Cancelar")],8,Ht),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:s(t).processing},[Bt,g("Guardar")],8,Mt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Vt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Nt={class:"border-b border-gray-900/10 pb-12"},At={class:"text-base font-semibold leading-7 text-gray-900"},zt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1),Wt={class:"flex flex-wrap -mx-4"},Gt={class:"sm:col-span-2 w-56 px-4"},Pt=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g(" Unidad "),e("span",{class:"text-red-500"},"*")],-1),qt={class:"mt-2"},Kt={key:0,class:"text-red-500 text-xs mt-1"},Jt={class:"sm:col-span-2 px-4"},Xt=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1),Qt={class:"mt-2"},Yt=["id"],Zt={key:0,class:"text-red-500 text-xs mt-1"},eo={class:"mt-6 flex items-center justify-end gap-x-6"},to=["id"],oo=e("i",{class:"fa-solid fa-ban"},null,-1),ao=["disabled"],io=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ro={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const n=i,T=d,t=W({idFormacionUnidades:n.formacionUnidades.idFormacionUnidades,unidad:n.formacionUnidades.idUnidad,horaRegreso:n.formacionUnidades.horaRegreso});z(()=>n.formacionUnidades,async x=>{t.idFormacionUnidades=x.idFormacionUnidades,t.unidad=x.unidad,t.horaRegreso=n.formacionUnidades.horaRegreso},{deep:!0});const E=x=>x!=null,k=R(""),b=R(""),f=async()=>{T("close"),t.reset()},y=async()=>{b.value=E(t.horaRegreso)?"":"Seleccione la hora de regreso",k.value=E(t.unidad)?"":"Seleccione una unidad",!(b.value||k.value)&&t.post(X("servicio.registrarHoraRegreso"),{onSuccess:()=>{f(),b.value="",k.value=""}})};return(x,C)=>(v(),G(Q,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:f},{default:A(()=>[e("div",Vt,[e("form",{onSubmit:C[2]||(C[2]=J(l=>i.op==="1"?y():x.update(),["prevent"]))},[e("div",Nt,[e("h2",At,_(i.title),1),zt,e("div",Wt,[e("div",Gt,[Pt,e("div",qt,[M(s(Z),{options:i.unidad,label:"numeroUnidad",modelValue:s(t).unidad,"onUpdate:modelValue":C[0]||(C[0]=l=>s(t).unidad=l),reduce:l=>l.idUnidad,class:oe({"border-red-500":k.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),k.value?(v(),O("div",Kt,_(k.value),1)):H("",!0)]),e("div",Jt,[Xt,e("div",Qt,[I(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+i.op,"onUpdate:modelValue":C[1]||(C[1]=l=>s(t).horaRegreso=l),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Yt),[[L,s(t).horaRegreso]])]),b.value!=""?(v(),O("div",Zt,_(b.value),1)):H("",!0)])])]),e("div",eo,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[oo,g(" Cancelar")],8,to),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:s(t).processing},[io,g("Guardar")],8,ao)])],32)])]),_:1},8,["show","max-width","closeable"]))}},so={class:"mt-2 bg-white p-4 shadow rounded-lg"},no={class:"border-b border-gray-900/10 pb-12"},lo={class:"text-base font-semibold leading-7 text-gray-900"},co=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),uo={class:"flex flex-wrap -mx-4"},mo={class:"sm:col-span-2 w-56 px-4"},go=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),po={class:"mt-2"},bo={key:0,class:"text-red-500 text-xs mt-1"},ho={class:"sm:col-span-2 px-4"},fo=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Castigo "),e("span",{class:"text-red-500"},"*")],-1),xo={class:"mt-2"},yo=["id"],vo={key:0,class:"text-red-500 text-xs mt-1"},_o={class:"sm:col-span-2 px-4"},Uo=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),Co={class:"mt-2"},$o=["id"],So={key:0,class:"text-red-500 text-xs"},wo={class:"sm:col-span-2 px-4"},ko=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Ro={class:"mt-2"},Do=["id"],Eo={key:0,class:"text-red-500 text-xs"},Oo={class:"sm:col-span-2 px-4"},jo=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1),Fo={class:"mt-2"},Io=["id"],Ho={class:"mt-6 flex items-center justify-end gap-x-6"},To=["id"],Mo=e("i",{class:"fa-solid fa-ban"},null,-1),Bo=["disabled"],Lo=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Vo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const n=i,T=d,t=W({idCastigo:n.castigo.idCastigo,castigo:n.castigo.castigo,observaciones:n.castigo.observaciones,horaInicio:n.castigo.horaInicio,horaFin:n.castigo.horaFin,unidad:n.castigo.idUnidad});z(()=>n.castigo,async m=>{t.idCastigo=m.idCastigo,t.castigo=m.castigo,t.observaciones=m.observaciones,t.horaInicio=m.horaInicio,t.horaFin=n.horaFin,t.unidad=n.unidad},{deep:!0});const E=m=>m!=null,k=m=>typeof m=="string"&&m.trim()!=="",b=R(""),f=R(""),y=R(""),x=R(""),C=async()=>{T("close"),t.reset()},l=async()=>{f.value=E(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",b.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.castigo)?"":"Ingrese motivo del castigo",x.value=E(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(f.value||b.value||y.value||x.value)&&t.post(X("servicio.registrarCastigo"),{onSuccess:()=>{C(),f.value="",b.value="",y.value="",x.value=""}})};return(m,a)=>(v(),G(Q,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:C},{default:A(()=>[e("div",so,[e("form",{onSubmit:a[5]||(a[5]=J(S=>i.op==="1"?l():m.update(),["prevent"]))},[e("div",no,[e("h2",lo,_(i.title),1),co,e("div",uo,[e("div",mo,[go,e("div",po,[M(s(Z),{options:i.unidad,modelValue:s(t).unidad,"onUpdate:modelValue":a[0]||(a[0]=S=>s(t).unidad=S),reduce:S=>S.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:oe({"border-red-500":b.value})},null,8,["options","modelValue","reduce","class"])]),b.value!=""?(v(),O("div",bo,_(b.value),1)):H("",!0)]),e("div",ho,[fo,e("div",xo,[I(e("input",{type:"text",name:"castigo",id:"castigo"+i.op,"onUpdate:modelValue":a[1]||(a[1]=S=>s(t).castigo=S),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,yo),[[L,s(t).castigo]])]),y.value!=""?(v(),O("div",vo,_(y.value),1)):H("",!0)]),e("div",_o,[Uo,e("div",Co,[I(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+i.op,"onUpdate:modelValue":a[2]||(a[2]=S=>s(t).horaInicio=S),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,$o),[[L,s(t).horaInicio]])]),f.value!=""?(v(),O("div",So,_(f.value),1)):H("",!0)]),e("div",wo,[ko,e("div",Ro,[I(e("input",{type:"time",name:"horaFin",id:"horaFin"+i.op,"onUpdate:modelValue":a[3]||(a[3]=S=>s(t).horaFin=S),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Do),[[L,s(t).horaFin]])]),x.value!=""?(v(),O("div",Eo,_(x.value),1)):H("",!0)]),e("div",Oo,[jo,e("div",Fo,[I(e("input",{type:"text",name:"observaciones",id:"observaciones"+i.op,"onUpdate:modelValue":a[4]||(a[4]=S=>s(t).observaciones=S),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Io),[[L,s(t).observaciones]])])])])]),e("div",Ho,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},[Mo,g(" Cancelar")],8,To),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:s(t).processing},[Lo,g("Guardar")],8,Bo)])],32)])]),_:1},8,["show","max-width","closeable"]))}},No={class:"mt-2 bg-white p-4 shadow rounded-lg"},Ao={class:"border-b border-gray-900/10 pb-12"},zo={class:"text-base font-semibold leading-7 text-gray-900"},Wo=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),Go={class:"flex flex-wrap -mx-4"},Po={class:"sm:col-span-2 w-56 px-4"},qo=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),Ko={class:"mt-2"},Jo={key:0,class:"text-red-500 text-xs mt-1"},Xo={class:"sm:col-span-2 px-4"},Qo=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1),Yo={class:"mt-2"},Zo=["id"],ea=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1),ta=["value"],oa={key:0,class:"text-red-500 text-xs mt-1"},aa={class:"sm:col-span-2 px-4"},ia=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),da={class:"mt-2"},ra=["id"],sa={key:0,class:"text-red-500 text-xs"},na={class:"sm:col-span-2 px-4"},la=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1),ca={class:"mt-2"},ua=["id"],ma={class:"mt-6 flex items-center justify-end gap-x-6"},ga=["id"],pa=e("i",{class:"fa-solid fa-ban"},null,-1),ba=["disabled"],ha=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),fa={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const n=i,T=d,t=W({idUltimaCorrida:n.ultimaCorrida.idUltimaCorrida,unidad:n.ultimaCorrida.idUnidad,tipoUltimaCorrida:n.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:n.ultimaCorrida.horaInicioUC,horaFinUC:n.ultimaCorrida.horaFinUC});z(()=>n.ultimaCorrida,async l=>{t.idUltimaCorrida=l.idUltimaCorrida,t.tipoUltimaCorrida=l.tipoUltimaCorrida,t.horaInicioUC=l.horaInicioUC,t.horaFinUC=l.horaFinUC},{deep:!0});const E=l=>l!=null,k=l=>l!=null,b=R(""),f=R(""),y=R(""),x=async()=>{T("close"),t.reset()},C=async()=>{f.value=E(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",b.value=E(t.unidad)?"":"Seleccione una unidad",y.value=k(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(f.value||b.value||y.value)&&t.post(X("servicio.registrarUC"),{onSuccess:()=>{x(),f.value="",b.value="",y.value=""}})};return(l,m)=>(v(),G(Q,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:x},{default:A(()=>[e("div",No,[e("form",{onSubmit:m[4]||(m[4]=J(a=>i.op==="1"?C():l.update(),["prevent"]))},[e("div",Ao,[e("h2",zo,_(i.title),1),Wo,e("div",Go,[e("div",Po,[qo,e("div",Ko,[M(s(Z),{options:i.unidad,modelValue:s(t).unidad,"onUpdate:modelValue":m[0]||(m[0]=a=>s(t).unidad=a),reduce:a=>a.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:oe({"border-red-500":b.value})},null,8,["options","modelValue","reduce","class"])]),b.value?(v(),O("div",Jo,_(b.value),1)):H("",!0)]),e("div",Xo,[Qo,e("div",Yo,[I(e("select",{name:"tipoCorrida",id:"tipoCorrida"+i.op,"onUpdate:modelValue":m[1]||(m[1]=a=>s(t).tipoUltimaCorrida=a),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ea,(v(!0),O(ne,null,le(i.tipoUltimaCorrida,a=>(v(),O("option",{key:a.idTipoUltimaCorrida,value:a.idTipoUltimaCorrida},_(a.tipoUltimaCorrida),9,ta))),128))],8,Zo),[[ce,s(t).tipoUltimaCorrida]])]),y.value!=""?(v(),O("div",oa,_(y.value),1)):H("",!0)]),e("div",aa,[ia,e("div",da,[I(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+i.op,"onUpdate:modelValue":m[2]||(m[2]=a=>s(t).horaInicioUC=a),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ra),[[L,s(t).horaInicioUC]])]),f.value!=""?(v(),O("div",sa,_(f.value),1)):H("",!0)]),e("div",na,[la,e("div",ca,[I(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+i.op,"onUpdate:modelValue":m[3]||(m[3]=a=>s(t).horaFinUC=a),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ua),[[L,s(t).horaFinUC]])])])])]),e("div",ma,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[pa,g(" Cancelar")],8,ga),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:s(t).processing},[ha,g("Guardar")],8,ba)])],32)])]),_:1},8,["show","max-width","closeable"]))}},xa={class:"mt-2 bg-white p-4 shadow rounded-lg"},ya={class:"border-b border-gray-900/10 pb-12"},va={class:"text-base font-semibold leading-7 text-gray-900"},_a=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),Ua={class:"flex flex-wrap -mx-4"},Ca={class:"sm:col-span-2 w-56 px-4"},$a=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),Sa={class:"mt-2"},wa={key:0,class:"text-red-500 text-xs mt-1"},ka={class:"sm:col-span-2 px-4"},Ra=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Da={class:"mt-2"},Ea=["id"],Oa={key:0,class:"text-red-500 text-xs mt-1"},ja={class:"mt-6 flex items-center justify-end gap-x-6"},Fa=["id"],Ia=e("i",{class:"fa-solid fa-ban"},null,-1),Ha=["disabled"],Ta=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Ma={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const n=i,T=d,t=W({idUltimaCorrida:n.ultimaCorrida.idUltimaCorrida,unidad:n.ultimaCorrida.idUnidad,horaFinUC:n.ultimaCorrida.horaFinUC});z(()=>n.ultimaCorrida,async x=>{t.idUltimaCorrida=x.idUltimaCorrida,t.horaFinUC=x.horaFinUC},{deep:!0});const E=x=>x!=null,k=R(""),b=R(""),f=async()=>{T("close"),t.reset()},y=async()=>{b.value=E(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",k.value=E(t.unidad)?"":"Seleccione una unidad",!(b.value||k.value)&&t.post(X("servicio.regresoUC"),{onSuccess:()=>{f(),b.value="",k.value=""}})};return(x,C)=>(v(),G(Q,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:f},{default:A(()=>[e("div",xa,[e("form",{onSubmit:C[2]||(C[2]=J(l=>i.op==="1"?y():x.update(),["prevent"]))},[e("div",ya,[e("h2",va,_(i.title),1),_a,e("div",Ua,[e("div",Ca,[$a,e("div",Sa,[M(s(Z),{options:i.unidad,modelValue:s(t).unidad,"onUpdate:modelValue":C[0]||(C[0]=l=>s(t).unidad=l),label:"numeroUnidad",reduce:l=>l.idUnidad,class:oe({"border-red-500":k.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),k.value!==""?(v(),O("div",wa,_(k.value),1)):H("",!0)]),e("div",ka,[Ra,e("div",Da,[I(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+i.op,"onUpdate:modelValue":C[1]||(C[1]=l=>s(t).horaFinUC=l),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ea),[[L,s(t).horaFinUC]])]),k.value!=""?(v(),O("div",Oa,_(k.value),1)):H("",!0)])])]),e("div",ja,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[Ia,g(" Cancelar")],8,Fa),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:s(t).processing},[Ta,g("Guardar")],8,Ha)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Ba={class:"mt-2 bg-white p-4 shadow rounded-lg"},La={class:"text-base font-semibold leading-7 text-gray-900"},Va={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},Na={class:"sm:col-span-2 px-4"},Aa=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),za={class:"mt-2"},Wa=e("option",{disabled:""},"Seleccione una o más unidades",-1),Ga=["value"],Pa={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},qa={class:"sm:col-span-2 px-4"},Ka=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Ja={class:"mt-2"},Xa=e("option",{disabled:""},"Seleccione una o más unidades",-1),Qa=["value"],Ya={key:0,class:"text-red-500 text-xs mt-1 mb-4"},Za={class:"mt-6 flex items-center justify-end gap-x-6"},ei=["id"],ti=e("i",{class:"fa-solid fa-ban"},null,-1),oi=["disabled"],ai=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ii={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const n=i,T=d,t=W({idRolServicio:n.rolServicio.idRolServicio,unidad:[],trabajaDomingo:n.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});z(()=>n.rolServicio,async a=>{t.idRolServicio=a.idRolServicio,t.trabajaDomingo=a.trabajaDomingo},{deep:!0});const E=async()=>{T("close"),t.reset()},k=(a,S)=>a.length>0||S.length>0,b=R(""),f=async()=>{b.value=k(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!b.value&&t.post(X("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{E(),b.value=""}})},y=()=>{const a=new Date,S=a.getDay(),F=S===0?7:S,N=new Date(a);return N.setDate(a.getDate()-F),N.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},x=()=>{const a=new Date,F=7-a.getDay(),N=new Date(a);return N.setDate(a.getDate()+F),N.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},C=y(),l=x();function m(a){return a.sort((S,F)=>{const N=parseInt(S.numeroUnidad.split("-")[1],10),ae=parseInt(F.numeroUnidad.split("-")[1],10);return N-ae})}return z(()=>n.unidad,a=>{t.unidad=m([...a])},{immediate:!0}),(a,S)=>(v(),G(Q,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:E},{default:A(()=>[e("div",Ba,[e("form",{onSubmit:S[2]||(S[2]=J(F=>i.op==="1"?f():a.update(),["prevent"]))},[e("h2",La,_(i.title),1),e("p",Va,[g("Seleccione las unidades que trabajaron el : "),e("strong",null,_(s(C)),1),g(". ")]),e("div",Na,[Aa,e("div",za,[I(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":S[0]||(S[0]=F=>s(t).unidadesSi=F),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Wa,(v(!0),O(ne,null,le(s(t).unidad,F=>(v(),O("option",{key:F.idUnidad,value:F.idUnidad},_(F.numeroUnidad),9,Ga))),128))],512),[[ce,s(t).unidadesSi]])])]),e("p",Pa,[g("Seleccione las unidades que trabajarán el próximo: "),e("strong",null,_(s(l)),1),g(". ")]),e("div",qa,[Ka,e("div",Ja,[I(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":S[1]||(S[1]=F=>s(t).unidadesNo=F),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Xa,(v(!0),O(ne,null,le(s(t).unidad,F=>(v(),O("option",{key:F.idUnidad,value:F.idUnidad},_(F.numeroUnidad),9,Qa))),128))],512),[[ce,s(t).unidadesNo]])])]),b.value?(v(),O("div",Ya,_(b.value),1)):H("",!0),e("div",Za,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:E},[ti,g(" Cancelar")],8,ei),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:s(t).processing},[ai,g("Guardar")],8,oi)])],32)])]),_:1},8,["show","max-width","closeable"]))}},di={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},ri=e("h2",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1),si=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1),ni={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},li=e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),ci=e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),ui=e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),mi=e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),gi=e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),pi={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},bi=e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),hi=e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),fi=e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),xi={class:"overflow-x-auto"},yi={class:"text-sm leading-normal border-b border-gray-300"},vi=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),_i={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},Ui=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Ci=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),$i=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1),Si=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1),wi=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1),ki=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1),Ri=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Di=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Trab. DOMINGO "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Extremo "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo de Corrida "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. finaliza "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1),q="xl",K=!0,Vi={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(i){re.use(fe),re.use(fe);const d=i,n=new Date().toLocaleDateString(),T=t(new Date().getDay());function t(p){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][p]}Re(()=>d.entrada.filter(p=>new Date(p.fechaRegistro).toLocaleDateString()===n));const E=()=>{Ee(()=>{const h=$("#formacionTablaId").DataTable().rows({search:"applied",page:"current"}).data();if(!h.length){console.warn("No hay datos para exportar.");return}const U=new Date().toISOString().split("T")[0],j=Object.fromEntries(d.ruta.map(u=>[u.idRuta,u.nombreRuta])),c=Object.fromEntries(d.rolServicio.map(u=>[u.idUnidad,u.trabajaDomingo])),o=Object.fromEntries(d.unidad.map(u=>[u.idUnidad,u.numeroUnidad])),r=Object.fromEntries(d.directivo.map(u=>[u.idDirectivo,u.nombre_completo])),D=Object.fromEntries(d.entrada.map(u=>[u.idUnidad,{horaEntrada:u.horaEntrada,tipoEntrada:u.tipoEntrada,extremo:u.extremo,created_at:u.created_at}]));Object.fromEntries(d.corte.map(u=>[u.idUnidad,[]]));const V=Object.fromEntries(d.ultimaCorrida.map(u=>[u.idUnidad,{tipoCorrida:u.idTipoUltimaCorrida,horaInicioUC:u.horaInicioUC,horaFinUC:u.horaFinUC,created_at:u.created_at}]));Object.fromEntries(d.castigo.map(u=>[u.idUnidad,[]]));const ee=Object.fromEntries(d.operador.map(u=>[u.idOperador,u.nombre_completo])),ue=Object.fromEntries(d.tipoUltimaCorrida.map(u=>[u.idTipoUltimaCorrida,u.tipoUltimaCorrida])),P=u=>{if(!u)return"";const[w,Y]=u.split(":");return`${w}:${Y}`},Ce=h.toArray().reduce((u,w)=>{var pe,be;const Y=D[w.idUnidad]||{},ke=d.corte.filter(B=>B.idUnidad===w.idUnidad&&B.created_at.split("T")[0]===U),te=V[w.idUnidad]||{},ge=d.castigo.filter(B=>B.idUnidad===w.idUnidad&&B.created_at.split("T")[0]===U);c[w.idUnidad];const ie=((pe=Y.created_at)==null?void 0:pe.split("T")[0])===U,de=((be=te.created_at)==null?void 0:be.split("T")[0])===U;return ge.length>0,u[w.idUnidad]||(u[w.idUnidad]={ID:w.idUnidad,Ruta:j[w.idRuta]||"N/A","Trab. Domingo":c[w.idUnidad]||"Sin Asignar",Unidad:o[w.idUnidad]||"","Socio/Prestador":r[w.idDirectivo]||"","Hr. Entrada":ie&&P(Y.horaEntrada)||"","Tipo Entrada":ie&&Y.tipoEntrada||"",Extremo:ie&&Y.extremo||"","Hr. Corte":"",Causa:"","Hr. Regreso":"","Tipo De Corrida":de&&ue[te.tipoCorrida]||"","Hr. Inicio UC":de&&P(te.horaInicioUC)||"","Hr. Regreso UC":de&&P(te.horaFinUC)||"","Hr. Inicio":"","Hr. Finaliza":"",Motivo:"","Otras Observaciones":"",Operador:ee[w.idOperador]||"Sin Asignar"}),ke.forEach(B=>{u[w.idUnidad]["Hr. Corte"]+=(u[w.idUnidad]["Hr. Corte"]?", ":"")+P(B.horaCorte),u[w.idUnidad].Causa+=(u[w.idUnidad].Causa?", ":"")+B.causa,u[w.idUnidad]["Hr. Regreso"]+=(u[w.idUnidad]["Hr. Regreso"]?", ":"")+P(B.horaRegreso)}),ge.forEach(B=>{u[w.idUnidad]["Hr. Inicio"]+=(u[w.idUnidad]["Hr. Inicio"]?", ":"")+P(B.horaInicio),u[w.idUnidad]["Hr. Finaliza"]+=(u[w.idUnidad]["Hr. Finaliza"]?", ":"")+P(B.horaFin),u[w.idUnidad].Motivo+=(u[w.idUnidad].Motivo?", ":"")+B.castigo,u[w.idUnidad]["Otras Observaciones"]+=(u[w.idUnidad]["Otras Observaciones"]?", ":"")+B.observaciones}),u},{}),$e=Object.values(Ce),Se=se.json_to_sheet($e),me=se.book_new();se.book_append_sheet(me,Se,"Formación De Unidades");const we=new Date().toISOString().split("T")[0];je(me,`Formación_De_Unidades_${we}.xlsx`)})},k=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>E()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],b=[{data:null,render:function(p,h,U,j){return j.row+1}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.ruta.find(r=>r.idRuta===c.idRuta);return o?o.nombreRuta:""}else return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.rolServicio.filter(r=>r.idUnidad===c.idUnidad);return o.length>0?(o.sort((r,D)=>new Date(D.created_at)-new Date(r.created_at)),o[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);return c?c.numeroUnidad:""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.directivo.find(r=>r.idDirectivo===c.idDirectivo);return o?o.nombre_completo:""}else return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.entrada.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0)return o.map(D=>D.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.entrada.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0)return o.map(D=>D.tipoEntrada).join(", ")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.entrada.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0)return o.map(D=>D.extremo).join(", ")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.corte.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0)return o.map((D,V)=>`
            <div style="${o.length>1&&V!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${D.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.corte.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0)return o.map((D,V)=>`
            <div style="${o.length>1&&V!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${D.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.corte.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0)return o.map((D,V)=>{const ee=D.horaRegreso?D.horaRegreso.substring(0,5):"";return`
            <div style="${o.length>1&&V!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${ee}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.ultimaCorrida.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0){const r=d.tipoUltimaCorrida.find(D=>D.idTipoUltimaCorrida===o[0].idTipoUltimaCorrida);if(r)return r.tipoUltimaCorrida}}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.ultimaCorrida.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0){const r=o[0].horaInicioUC;return r?r.substring(0,5):""}}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.ultimaCorrida.filter(r=>r.idUnidad===c.idUnidad&&new Date(r.created_at).toLocaleDateString()===n);if(o.length>0){const r=o[0].horaFinUC;if(r)return r.substring(0,5)}}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===n);if(c.length>0){const o=c.map(r=>({horaInicio:r.horaInicio?r.horaInicio.substring(0,5):""}));return o.map((r,D)=>`
          <div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${r.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===n);if(c.length>0){const o=c.map(r=>({horaFin:r.horaFin?r.horaFin.substring(0,5):""}));return o.map((r,D)=>`
          <div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${r.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===n);if(c.length>0){const o=c.map(r=>r.castigo||"");return o.map((r,D)=>`<div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${r}</div>`).join("")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===n);if(c.length>0){const o=c.map(r=>r.observaciones||"");return o.map((r,D)=>`<div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${r}</div>`).join("")}return""}},{data:"idUnidad",render:function(p,h,U,j){const c=d.unidad.find(o=>o.idUnidad===p);if(c){const o=d.operador.find(r=>r.idOperador===c.idOperador);return o?o.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],f=R(!1),y=R(!1),x=R(!1),C=R(!1),l=R(!1),m=R(!1),a=R(!1);R(!1),W({});const S=()=>{f.value=!1},F=()=>{y.value=!1},N=()=>{x.value=!1},ae=()=>{C.value=!1},ye=()=>{l.value=!1},ve=()=>{m.value=!1},_e=()=>{a.value=!1},Ue=()=>{xe.fire({title:"¿Seguro de actualizar el Rol de Domingo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(p=>{p.isConfirmed&&De.Inertia.post(route("servicio.cambiarRolServicio"),{},{onError:h=>{xe.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de servicio",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de servicio:",h)}})})};return(p,h)=>(v(),G(Fe,{title:"Formar Unidades",usuario:d.usuario},{default:A(()=>[e("div",di,[ri,si,M(Oe),e("div",ni,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:h[0]||(h[0]=U=>f.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[li,g(" Registrar Entrada ")]),e("button",{class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:h[1]||(h[1]=U=>y.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[ci,g(" Registrar Corte ")]),e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:h[2]||(h[2]=U=>C.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[ui,g(" Registrar Regreso ")]),e("button",{class:"bg-yellow-500 hover:bg-yellow-500 text-white font-semibold py-2 px-4 rounded",onClick:h[3]||(h[3]=U=>x.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[mi,g(" Registrar castigo ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:h[4]||(h[4]=U=>l.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[gi,g(" Registrar UC ")])]),e("div",pi,[e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:h[5]||(h[5]=U=>m.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[bi,g(" Regreso UC ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:h[6]||(h[6]=U=>a.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[hi,g(" Rol Domingo ")]),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:Ue},[fi,g(" Actualizar Rol Servicio ")])]),e("div",xi,[M(s(re),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:b,data:i.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[k],paging:!1,lengthMenu:[]}},{default:A(()=>[e("thead",null,[e("tr",yi,[vi,e("th",_i,"FECHA: "+_(s(T)+", "+s(n)),1),Ui,Ci,$i,Si,wi,ki,Ri]),Di])]),_:1},8,["data","options"])])]),M(ct,{show:f.value,"max-width":q,closeable:K,onClose:S,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:d.entrada,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","entrada","unidad","unidadesConOperador"]),M(Lt,{show:y.value,"max-width":q,closeable:K,onClose:F,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:d.corte,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),M(ro,{show:C.value,"max-width":q,closeable:K,onClose:ae,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:d.unidad},null,8,["show","unidad"]),M(Vo,{show:x.value,"max-width":q,closeable:K,onClose:N,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:d.unidad,castigo:d.castigo},null,8,["show","unidad","castigo"]),M(fa,{show:l.value,"max-width":q,closeable:K,onClose:ye,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,tipoUltimaCorrida:d.tipoUltimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),M(Ma,{show:m.value,"max-width":q,closeable:K,onClose:ve,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","unidad"]),M(ii,{show:a.value,"max-width":q,closeable:K,onClose:_e,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:d.rolServicio,unidad:d.unidad},null,8,["show","rolServicio","unidad"])]),_:1},8,["usuario"]))}};export{Vi as default};
