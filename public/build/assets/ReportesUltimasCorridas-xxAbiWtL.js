import{r as q,J as Q,o as i,c as l,m as f,a as n,t as b,w as x,p as h,F as v,d as u,K as O,l as W,n as K,f as X,G as Z}from"./app-HxioE4S_.js";import{S as U}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{u as P,w as ee}from"./xlsx-DjuO7_Ju.js";import{E as oe}from"./jspdf.plugin.autotable-BPtfYXkR.js";/* empty css                                                               */const ue={class:"text-lg font-bold"},me={class:"flex flex-wrap gap-4 mb-3"},ge=["value"],pe={class:"flex flex-wrap gap-4 mb-3"},fe={class:"flex flex-wrap space-x-3 mb-2"},be=["onUpdate:modelValue"],ve=["value"],xe=["value"],he=["value"],ye={class:"flex flex-wrap space-x-3"},_e=["onClick"],te=2024,Wo={__name:"ReportesEntrada",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(s,e)=>{let a="";e.tipo==="semana"?a=route("reportes.entradasSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?a=route("reportes.entradasMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(a=route("reportes.entradasAnio",{idUnidad:s,anio:e.valor}));try{const o=await Z.get(a);C.value=o.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(s,e,a,o)=>{if(!a||!o.tipo||!o.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let t={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?t.valor=m:s.periodoSeleccionado==="mes"?t.valor=g:s.periodoSeleccionado==="anio"&&(t.valor=p);try{await B(a,t),s.titulo==="Entradas"?e==="pdf"?j(s.titulo,t):e==="excel"?Y(s.titulo,t):e==="imprimir"&&imprimirReporte(s.titulo,t):U.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(s,e)=>{const a=e.tipo==="semana"?`Semana ${e.valor}`:e.tipo==="mes"?R[e.valor-1]:e.valor,o=`${s}-${a}.pdf`,t=new oe("landscape");t.setFontSize(12),t.text(`Reporte de ${s} - Período: ${a}`,14,20);const c=[{header:"Ruta",dataKey:"ruta"},{header:"Fecha",dataKey:"fecha"},{header:"Numero Unidad",dataKey:"numeroUnidad"},{header:"Socio/Prestador",dataKey:"socioPrestador"},{header:"Hora Entrada",dataKey:"horaEntrada"},{header:"Tipo Entrada",dataKey:"tipoEntrada"},{header:"Extremo",dataKey:"extremo"},{header:"Operador",dataKey:"operador"}],S=C.value.map(d=>{var $,k,N,w;return{ruta:((k=($=d.unidad)==null?void 0:$.ruta)==null?void 0:k.nombreRuta)||"N/A",fecha:d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",numeroUnidad:((N=d.unidad)==null?void 0:N.numeroUnidad)||"N/A",socioPrestador:(w=d.unidad)!=null&&w.directivo?`${d.unidad.directivo.nombre_completo}`:"N/A",horaEntrada:d.horaEntrada?d.horaEntrada.substring(0,5):"N/A",tipoEntrada:d.tipoEntrada||"Tarde",extremo:d.extremo||"N/A",operador:d.operador?`${d.operador.nombre_completo}`:"N/A"}});t.autoTable({head:[c.map(d=>d.header)],body:S.map(d=>c.map($=>d[$.dataKey])),startY:24,styles:{fontSize:10,cellPadding:4,halign:"center"}});const r=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});t.setFontSize(10),t.text(`Fecha de creación: ${r}`,14,t.internal.pageSize.height-10),t.save(o)},Y=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=`${s}-${a}.xlsx`,t=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"]];C.value.forEach(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaEntrada?r.horaEntrada.substring(0,5):"N/A",T=r.tipoEntrada,D=r.extremo||"N/A",F=r.operador?`${r.operador.nombre_completo}`:"N/A";t.push([d,$,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(t);P.book_append_sheet(c,S,"Reporte_Entradas"),ee(c,o)},L=[{titulo:"Entradas",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(s,e)=>e+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-te+1},(s,e)=>te+e);let m=1,g=1,p=V;return(s,e)=>(i(),l(v,null,f(L,a=>n("div",{key:a.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",ue,b(a.titulo),1),e[9]||(e[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",me,[e[6]||(e[6]=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>E.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=n("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(z.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,ge))),128))],512),[[h,E.unidad]])])])]),n("div",pe,[n("div",fe,[e[8]||(e[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":o=>a.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,be),[[h,a.periodoSeleccionado]]),a.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>O(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(o,t)=>(i(),l("option",{key:t,value:o},"Semana "+b(o),9,ve))),128))],512)),[[h,u(m)]]):a.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>O(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(o,t)=>n("option",{key:t,value:t+1},b(o),9,xe)),64))],512)),[[h,u(g)]]):a.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>O(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),o=>(i(),l("option",{key:o,value:o},b(o),9,he))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",ye,[(i(),l(v,null,f(G,o=>n("button",{key:o.tipo,class:K(o.clase),onClick:t=>M(a,o.tipo,E.unidad,{tipo:a.periodoSeleccionado,valor:a.periodoSeleccionado==="semana"?u(m):a.periodoSeleccionado==="mes"?u(g):a.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(o.icono+" mr-2 jump-icon")},null,2),X(" "+b(o.texto),1)],10,_e)),64))])])),64))}},$e={class:"text-lg font-bold"},Se={class:"flex flex-wrap gap-4 mb-3"},we=["value"],Ae={class:"flex flex-wrap gap-4 mb-3"},ke={class:"flex flex-wrap space-x-3 mb-2"},Ne=["onUpdate:modelValue"],Ue=["value"],Ce=["value"],Ee=["value"],Re={class:"flex flex-wrap space-x-3"},Te=["onClick"],ne=2024,Xo={__name:"ReportesCortes",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(s,e)=>{let a="";e.tipo==="semana"?a=route("reportes.cortesSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?a=route("reportes.cortesMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(a=route("reportes.cortesAnio",{idUnidad:s,anio:e.valor}));try{const o=await Z.get(a);C.value=o.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(s,e,a,o)=>{if(!a||!o.tipo||!o.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let t={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?t.valor=m:s.periodoSeleccionado==="mes"?t.valor=g:s.periodoSeleccionado==="anio"&&(t.valor=p);try{await B(a,t),s.titulo==="Cortes"?e==="pdf"?j(s.titulo,t):e==="excel"?Y(s.titulo,t):e==="imprimir"&&imprimirReporte(s.titulo,t):U.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=new oe("landscape");o.setFontSize(12),o.text(`Reporte de ${s} - Período: ${a}`,14,20);const t=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),c=C.value.map(d=>{var _,y,J;const $=(_=d.unidad)!=null&&_.ruta?d.unidad.ruta.nombreRuta:"N/A",k=d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",N=((y=d.unidad)==null?void 0:y.numeroUnidad)||"N/A",w=(J=d.unidad)!=null&&J.directivo?`${d.unidad.directivo.nombre_completo}`:"N/A",T=d.horaCorte?d.horaCorte.substring(0,5):"N/A",D=d.causa||"N/A",F=d.horaRegreso?d.horaRegreso.substring(0,5):"Sin Regreso",A=d.operador?`${d.operador.nombre_completo}`:"N/A";return[$,k,N,w,T,D,F,A]}),S=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];o.autoTable({head:S,body:c,startY:24});const r=o.internal.getNumberOfPages();o.setFontSize(10);for(let d=1;d<=r;d++)o.setPage(d),o.text(`Fecha de creación: ${t}`,14,o.internal.pageSize.height-10);o.save(`${s}-${a}.pdf`)},Y=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=`${s}-${a}.xlsx`,t=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];C.value.forEach(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaCorte?r.horaCorte.substring(0,5):"N/A",T=r.causa||"N/A",D=r.horaRegreso?r.horaRegreso.substring(0,5):"Sin Regreso",F=r.operador?`${r.operador.nombre_completo}`:"N/A";t.push([d,$,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(t);P.book_append_sheet(c,S,"Reporte_Cortes"),ee(c,o)},L=[{titulo:"Cortes",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(s,e)=>e+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-ne+1},(s,e)=>ne+e);let m=1,g=1,p=V;return(s,e)=>(i(),l(v,null,f(L,a=>n("div",{key:a.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",$e,b(a.titulo),1),e[9]||(e[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",Se,[e[6]||(e[6]=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>E.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=n("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(z.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,we))),128))],512),[[h,E.unidad]])])])]),n("div",Ae,[n("div",ke,[e[8]||(e[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":o=>a.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,Ne),[[h,a.periodoSeleccionado]]),a.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>O(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(o,t)=>(i(),l("option",{key:t,value:o},"Semana "+b(o),9,Ue))),128))],512)),[[h,u(m)]]):a.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>O(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(o,t)=>n("option",{key:t,value:t+1},b(o),9,Ce)),64))],512)),[[h,u(g)]]):a.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>O(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),o=>(i(),l("option",{key:o,value:o},b(o),9,Ee))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",Re,[(i(),l(v,null,f(G,o=>n("button",{key:o.tipo,class:K(o.clase),onClick:t=>M(a,o.tipo,E.unidad,{tipo:a.periodoSeleccionado,valor:a.periodoSeleccionado==="semana"?u(m):a.periodoSeleccionado==="mes"?u(g):a.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(o.icono+" mr-2 jump-icon")},null,2),X(" "+b(o.texto),1)],10,Te)),64))])])),64))}},De={class:"text-lg font-bold"},Fe={class:"flex flex-wrap gap-4 mb-3"},Oe=["value"],Pe={class:"flex flex-wrap gap-4 mb-3"},Ve={class:"flex flex-wrap space-x-3 mb-2"},je=["onUpdate:modelValue"],Ke=["value"],ze=["value"],Be=["value"],Me={class:"flex flex-wrap space-x-3"},Ye=["onClick"],re=2024,Zo={__name:"ReportesCortesConRegreso",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(s,e)=>{let a="";e.tipo==="semana"?a=route("reportes.cortesCRSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?a=route("reportes.cortesCRMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(a=route("reportes.cortesCRAnio",{idUnidad:s,anio:e.valor}));try{const o=await Z.get(a);C.value=o.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(s,e,a,o)=>{if(!a||!o.tipo||!o.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let t={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?t.valor=m:s.periodoSeleccionado==="mes"?t.valor=g:s.periodoSeleccionado==="anio"&&(t.valor=p);try{await B(a,t),s.titulo==="Cortes Con Regreso"?e==="pdf"?j(s.titulo,t):e==="excel"?Y(s.titulo,t):e==="imprimir"&&imprimirReporte(s.titulo,t):U.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=new oe("landscape");o.setFontSize(12),o.text(`Reporte de ${s} - Período: ${a}`,14,20);const t=C.value.map(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaCorte?r.horaCorte.substring(0,5):"N/A",T=r.causa||"N/A",D=r.horaRegreso?r.horaRegreso.substring(0,5):"Sin Regreso",F=r.operador?`${r.operador.nombre_completo}`:"N/A";return[d,$,k,N,w,T,D,F]});o.autoTable({head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]],body:t,startY:24,styles:{fontSize:10}});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});o.setFontSize(10),o.text(`Fecha de creación: ${c}`,14,o.internal.pageSize.height-10);const S=`${s}-${a}.pdf`;o.save(S)},Y=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=`${s}-${a}.xlsx`,t=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];C.value.forEach(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaCorte?r.horaCorte.substring(0,5):"N/A",T=r.causa||"N/A",D=r.horaRegreso?r.horaRegreso.substring(0,5):"Sin Regreso",F=r.operador?`${r.operador.nombre_completo}`:"N/A";t.push([d,$,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(t);P.book_append_sheet(c,S,"Reporte_Cortes_CR"),ee(c,o)},L=[{titulo:"Cortes Con Regreso",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(s,e)=>e+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-re+1},(s,e)=>re+e);let m=1,g=1,p=V;return(s,e)=>(i(),l(v,null,f(L,a=>n("div",{key:a.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",De,b(a.titulo),1),e[9]||(e[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",Fe,[e[6]||(e[6]=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>E.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=n("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(z.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,Oe))),128))],512),[[h,E.unidad]])])])]),n("div",Pe,[n("div",Ve,[e[8]||(e[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":o=>a.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,je),[[h,a.periodoSeleccionado]]),a.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>O(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(o,t)=>(i(),l("option",{key:t,value:o},"Semana "+b(o),9,Ke))),128))],512)),[[h,u(m)]]):a.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>O(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(o,t)=>n("option",{key:t,value:t+1},b(o),9,ze)),64))],512)),[[h,u(g)]]):a.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>O(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),o=>(i(),l("option",{key:o,value:o},b(o),9,Be))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",Me,[(i(),l(v,null,f(G,o=>n("button",{key:o.tipo,class:K(o.clase),onClick:t=>M(a,o.tipo,E.unidad,{tipo:a.periodoSeleccionado,valor:a.periodoSeleccionado==="semana"?u(m):a.periodoSeleccionado==="mes"?u(g):a.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(o.icono+" mr-2 jump-icon")},null,2),X(" "+b(o.texto),1)],10,Ye)),64))])])),64))}},Le={class:"text-lg font-bold"},Ge={class:"flex flex-wrap gap-4 mb-3"},He=["value"],Ie={class:"flex flex-wrap gap-4 mb-3"},Je={class:"flex flex-wrap space-x-3 mb-2"},qe=["onUpdate:modelValue"],Qe=["value"],We=["value"],Xe=["value"],Ze={class:"flex flex-wrap space-x-3"},eo=["onClick"],se=2024,ea={__name:"ReportesCortesSinRegreso",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(s,e)=>{let a="";e.tipo==="semana"?a=route("reportes.cortesSRSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?a=route("reportes.cortesSRMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(a=route("reportes.cortesSRAnio",{idUnidad:s,anio:e.valor}));try{const o=await Z.get(a);C.value=o.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(s,e,a,o)=>{if(!a||!o.tipo||!o.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let t={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?t.valor=m:s.periodoSeleccionado==="mes"?t.valor=g:s.periodoSeleccionado==="anio"&&(t.valor=p);try{await B(a,t),s.titulo==="Cortes Sin Regreso"?e==="pdf"?j(s.titulo,t):e==="excel"?Y(s.titulo,t):e==="imprimir"&&imprimirReporte(s.titulo,t):U.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=C.value.map(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaCorte?r.horaCorte.substring(0,5):"N/A",T=r.causa||"N/A",D=r.horaRegreso?r.horaRegreso.substring(0,5):"Sin Regreso",F=r.operador?`${r.operador.nombre_completo}`:"N/A";return[d,$,k,N,w,T,D,F]}),t=new oe("landscape");t.setFontSize(12),t.text(`Reporte de ${s} - Período: ${a}`,14,20),t.autoTable({head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]],body:o,startY:24,styles:{fontSize:10,halign:"center"}});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});t.setFontSize(10),t.text(`Fecha de creación: ${c}`,14,t.internal.pageSize.height-10);const S=`${s}-${a}.pdf`;t.save(S)},Y=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=`${s}-${a}.xlsx`,t=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];C.value.forEach(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaCorte?r.horaCorte.substring(0,5):"N/A",T=r.causa||"N/A",D=r.horaRegreso?r.horaRegreso.substring(0,5):"Sin Regreso",F=r.operador?`${r.operador.nombre_completo}`:"N/A";t.push([d,$,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(t);P.book_append_sheet(c,S,"Reporte_Cortes_SR"),ee(c,o)},L=[{titulo:"Cortes Sin Regreso",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(s,e)=>e+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-se+1},(s,e)=>se+e);let m=1,g=1,p=V;return(s,e)=>(i(),l(v,null,f(L,a=>n("div",{key:a.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",Le,b(a.titulo),1),e[9]||(e[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",Ge,[e[6]||(e[6]=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>E.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=n("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(z.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,He))),128))],512),[[h,E.unidad]])])])]),n("div",Ie,[n("div",Je,[e[8]||(e[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":o=>a.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,qe),[[h,a.periodoSeleccionado]]),a.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>O(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(o,t)=>(i(),l("option",{key:t,value:o},"Semana "+b(o),9,Qe))),128))],512)),[[h,u(m)]]):a.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>O(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(o,t)=>n("option",{key:t,value:t+1},b(o),9,We)),64))],512)),[[h,u(g)]]):a.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>O(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),o=>(i(),l("option",{key:o,value:o},b(o),9,Xe))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",Ze,[(i(),l(v,null,f(G,o=>n("button",{key:o.tipo,class:K(o.clase),onClick:t=>M(a,o.tipo,E.unidad,{tipo:a.periodoSeleccionado,valor:a.periodoSeleccionado==="semana"?u(m):a.periodoSeleccionado==="mes"?u(g):a.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(o.icono+" mr-2 jump-icon")},null,2),X(" "+b(o.texto),1)],10,eo)),64))])])),64))}},oo={class:"text-lg font-bold"},ao={class:"flex flex-wrap gap-4 mb-3"},to=["value"],no={class:"flex flex-wrap gap-4 mb-3"},ro={class:"flex flex-wrap space-x-3 mb-2"},so=["onUpdate:modelValue"],io=["value"],lo=["value"],co=["value"],uo={class:"flex flex-wrap space-x-3"},mo=["onClick"],ie=2024,oa={__name:"ReportesEntradasTardes",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(s,e)=>{let a="";e.tipo==="semana"?a=route("reportes.entradasTardesSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?a=route("reportes.entradasTardesMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(a=route("reportes.entradasTardesAnio",{idUnidad:s,anio:e.valor}));try{const o=await Z.get(a);C.value=o.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(s,e,a,o)=>{if(!a||!o.tipo||!o.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let t={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?t.valor=m:s.periodoSeleccionado==="mes"?t.valor=g:s.periodoSeleccionado==="anio"&&(t.valor=p);try{await B(a,t),s.titulo==="Entradas Tardes"?e==="pdf"?j(s.titulo,t):e==="excel"&&Y(s.titulo,t):U.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(s,e)=>{const a=new oe("landscape");let o;e.tipo==="semana"?o=`Semana ${e.valor}`:e.tipo==="mes"?o=R[e.valor-1]:(e.tipo,o=e.valor),a.setFontSize(12),a.text(`Reporte de ${s} - Período: ${o}`,14,20);const t=C.value.map(d=>{var _,y,J;const $=(_=d.unidad)!=null&&_.ruta?d.unidad.ruta.nombreRuta:"N/A",k=d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",N=((y=d.unidad)==null?void 0:y.numeroUnidad)||"N/A",w=(J=d.unidad)!=null&&J.directivo?`${d.unidad.directivo.nombre_completo}`:"N/A",T=d.horaEntrada?d.horaEntrada.substring(0,5):"N/A",D=d.tipoEntrada||"Tarde",F=d.extremo||"N/A",A=d.operador?`${d.operador.nombre_completo}`:"N/A";return[$,k,N,w,T,D,F,A]}),c=["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"];a.autoTable({head:[c],body:t,startY:24,styles:{fontSize:10,cellPadding:4}});const S=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});a.setFontSize(10),a.text(`Fecha de creación: ${S}`,14,a.internal.pageSize.height-10);const r=`${s}-${o}.pdf`;a.save(r)},Y=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=`${s}-${a}.xlsx`,t=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"]];C.value.forEach(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaEntrada?r.horaEntrada.substring(0,5):"N/A",T=r.tipoEntrada,D=r.extremo||"N/A",F=r.operador?`${r.operador.nombre_completo}`:"N/A";t.push([d,$,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(t);P.book_append_sheet(c,S,"Reporte_Entradas_Tardes"),ee(c,o)},L=[{titulo:"Entradas Tardes",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(s,e)=>e+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-ie+1},(s,e)=>ie+e);let m=1,g=1,p=V;return(s,e)=>(i(),l(v,null,f(L,a=>n("div",{key:a.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",oo,b(a.titulo),1),e[9]||(e[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",ao,[e[6]||(e[6]=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>E.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=n("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(z.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,to))),128))],512),[[h,E.unidad]])])])]),n("div",no,[n("div",ro,[e[8]||(e[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":o=>a.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,so),[[h,a.periodoSeleccionado]]),a.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>O(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(o,t)=>(i(),l("option",{key:t,value:o},"Semana "+b(o),9,io))),128))],512)),[[h,u(m)]]):a.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>O(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(o,t)=>n("option",{key:t,value:t+1},b(o),9,lo)),64))],512)),[[h,u(g)]]):a.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>O(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),o=>(i(),l("option",{key:o,value:o},b(o),9,co))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",uo,[(i(),l(v,null,f(G,o=>n("button",{key:o.tipo,class:K(o.clase),onClick:t=>M(a,o.tipo,E.unidad,{tipo:a.periodoSeleccionado,valor:a.periodoSeleccionado==="semana"?u(m):a.periodoSeleccionado==="mes"?u(g):a.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(o.icono+" mr-2 jump-icon")},null,2),X(" "+b(o.texto),1)],10,mo)),64))])])),64))}},go={class:"text-lg font-bold"},po={class:"flex flex-wrap gap-4 mb-3"},fo=["value"],bo={class:"flex flex-wrap gap-4 mb-3"},vo={class:"flex flex-wrap space-x-3 mb-2"},xo=["onUpdate:modelValue"],ho=["value"],yo=["value"],_o=["value"],$o={class:"flex flex-wrap space-x-3"},So=["onClick"],le=2024,aa={__name:"ReportesDiasTrabajados",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(e,a)=>{let o="";a.tipo==="semana"?o=route("reportes.diasTrabajadosSemana",{idOperador:e,semana:a.valor}):a.tipo==="mes"?o=route("reportes.diasTrabajadosMes",{idOperador:e,mes:a.valor}):a.tipo==="anio"&&(o=route("reportes.diasTrabajadosAnio",{idOperador:e,anio:a.valor}));try{const t=await Z.get(o);C.value=t.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(e,a,o,t)=>{if(!o||!t.tipo||!t.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let c={tipo:e.periodoSeleccionado,valor:""};e.periodoSeleccionado==="semana"?c.valor=m:e.periodoSeleccionado==="mes"?c.valor=g:e.periodoSeleccionado==="anio"&&(c.valor=p);try{await B(o,c),e.titulo==="Días Trabajados"?a==="pdf"?Y(e.titulo,c):a==="excel"?L(e.titulo,c):a==="imprimir"&&imprimirReporte(e.titulo,c):U.fire({title:`Generar el reporte "${e.titulo}" en ${a}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(S){console.error(S),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(e,a)=>{switch(e){case"semana":return 7;case"mes":const o=parseInt(a,10),t=new Date().getFullYear();return new Date(t,o,0).getDate();case"anio":return 365;default:return 0}},Y=(e,a)=>{let o;a.tipo==="semana"?o=`Semana ${a.valor}`:a.tipo==="mes"?o=R[a.valor-1]:(a.tipo,o=a.valor);const t=j(a.tipo,a.valor),c=new oe("landscape");c.setFontSize(12),c.text(`Reporte de ${e} - Período: ${o}`,14,20);const S=[{header:"Nombre del operador",dataKey:"nombre"},{header:"Días trabajados",dataKey:"diasTrabajados"},{header:"Días no trabajados",dataKey:"diasNoTrabajados"},{header:"Total de días",dataKey:"totalDias"},{header:"Productividad (%)",dataKey:"productividad"}],r=C.value.map(k=>{const N=k.nombre_completo||"N/A",w=k.diasTrabajados||0,T=t-w,D=(w/t*100).toFixed(2);return{nombre:N,diasTrabajados:w,diasNoTrabajados:T,totalDias:t,productividad:`${D}%`}});c.autoTable({columns:S,body:r,startY:24,styles:{fontSize:10}});const d=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});c.setFontSize(10),c.text(`Fecha de creación: ${d}`,14,c.internal.pageSize.height-10);const $=`${e}-${o}.pdf`;c.save($)},L=(e,a)=>{let o;a.tipo==="semana"?o=`Semana ${a.valor}`:a.tipo==="mes"?o=R[a.valor-1]:(a.tipo,o=a.valor);const t=`${e}-${o}.xlsx`,c=j(a.tipo,a.valor),S=[["Nombre del Operador","Días Trabajados","Días no Trabajados","Total de Días"]];C.value.forEach($=>{const k=$.nombre_completo||"N/A",N=$.diasTrabajados||"N/A",w=c-($.diasTrabajados||0),T=j(a.tipo,a.valor);S.push([k,N,w,T])});const r=P.book_new(),d=P.aoa_to_sheet(S);P.book_append_sheet(r,d,"Reporte_Dias_Trabajados"),ee(r,t)},G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(e,a)=>a+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-le+1},(e,a)=>le+a);let m=1,g=1,p=V;const s=[{titulo:"Días Trabajados",periodo:"semana",periodoSeleccionado:"semana"}];return(e,a)=>(i(),l(v,null,f(s,o=>n("div",{key:o.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",go,b(o.titulo),1),a[9]||(a[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",po,[a[6]||(a[6]=n("h2",{class:"font-semibold text-l pt-0"},"Operador: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"operador",id:"operador","onUpdate:modelValue":a[0]||(a[0]=t=>E.operador=t),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[a[4]||(a[4]=n("option",{value:"",disabled:"",selected:""},"----------- Operador -----------",-1)),a[5]||(a[5]=n("option",{value:"todas"},"Todos los operadores",-1)),(i(!0),l(v,null,f(z.operador,t=>(i(),l("option",{key:t.idOperador,value:t.idOperador},b(t.nombre_completo),9,fo))),128))],512),[[h,E.operador]])])])]),n("div",bo,[n("div",vo,[a[8]||(a[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":t=>o.periodoSeleccionado=t,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},a[7]||(a[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,xo),[[h,o.periodoSeleccionado]]),o.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":a[1]||(a[1]=t=>O(m)?m.value=t:m=t),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(t,c)=>(i(),l("option",{key:c,value:t},"Semana "+b(t),9,ho))),128))],512)),[[h,u(m)]]):o.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":a[2]||(a[2]=t=>O(g)?g.value=t:g=t),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(t,c)=>n("option",{key:c,value:c+1},b(t),9,yo)),64))],512)),[[h,u(g)]]):o.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":a[3]||(a[3]=t=>O(p)?p.value=t:p=t),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),t=>(i(),l("option",{key:t,value:t},b(t),9,_o))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",$o,[(i(),l(v,null,f(G,t=>n("button",{key:t.tipo,class:K(t.clase),onClick:c=>M(o,t.tipo,E.operador,{tipo:o.periodoSeleccionado,valor:o.periodoSeleccionado==="semana"?u(m):o.periodoSeleccionado==="mes"?u(g):o.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(t.icono+" mr-2 jump-icon")},null,2),X(" "+b(t.texto),1)],10,So)),64))])])),64))}},wo={class:"text-lg font-bold"},Ao={class:"flex flex-wrap gap-4 mb-3"},ko=["value"],No={class:"flex flex-wrap gap-4 mb-3"},Uo={class:"flex flex-wrap space-x-3 mb-2"},Co=["onUpdate:modelValue"],Eo=["value"],Ro=["value"],To=["value"],Do={class:"flex flex-wrap space-x-3"},Fo=["onClick"],de=2024,ta={__name:"ReportesCastigos",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(s,e)=>{let a="";e.tipo==="semana"?a=route("reportes.castigosSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?a=route("reportes.castigosMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(a=route("reportes.castigosAnio",{idUnidad:s,anio:e.valor}));try{const o=await Z.get(a);C.value=o.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(s,e,a,o)=>{if(!a||!o.tipo||!o.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let t={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?t.valor=m:s.periodoSeleccionado==="mes"?t.valor=g:s.periodoSeleccionado==="anio"&&(t.valor=p);try{await B(a,t),s.titulo==="Castigos"?e==="pdf"?j(s.titulo,t):e==="excel"?Y(s.titulo,t):e==="imprimir"&&imprimirReporte(s.titulo,t):U.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(s,e)=>{const a=new oe({orientation:"landscape"});let o;e.tipo==="semana"?o=`Semana ${e.valor}`:e.tipo==="mes"?o=R[e.valor-1]:(e.tipo,o=e.valor),a.setFontSize(12),a.text(`Reporte de ${s} - Período: ${o}`,14,20);const t=["Ruta","Fecha","Número Unidad","Socio/Prestador","Hora Inicio","Castigo","Hora Fin","Observaciones","Operador"],c=C.value.map(d=>{var y,J,ae;const $=(y=d.unidad)!=null&&y.ruta?d.unidad.ruta.nombreRuta:"N/A",k=d.created_at?new Date(d.created_at).toLocaleDateString():"N/A",N=((J=d.unidad)==null?void 0:J.numeroUnidad)||"N/A",w=(ae=d.unidad)!=null&&ae.directivo?`${d.unidad.directivo.nombre_completo}`:"N/A",T=d.horaInicio?d.horaInicio.substring(0,5):"N/A",D=d.castigo||"N/A",F=d.horaFin?d.horaFin.substring(0,5):"N/A",A=d.observaciones,_=d.operador?`${d.operador.nombre_completo}`:"N/A";return[$,k,N,w,T,D,F,A,_]});a.autoTable({head:[t],body:c,startY:24});const S=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});a.setFontSize(10),a.text(`Fecha de creación: ${S}`,14,a.internal.pageSize.height-10);const r=`${s}-${o}.pdf`;a.save(r)},Y=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=`${s}-${a}.xlsx`,t=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Inicio","Castigo","Hora Fin","Observaciones","Operador"]];C.value.forEach(r=>{var _,y,J;const d=(_=r.unidad)!=null&&_.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((y=r.unidad)==null?void 0:y.numeroUnidad)||"N/A",N=(J=r.unidad)!=null&&J.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.horaInicio?r.horaInicio.substring(0,5):"N/A",T=r.castigo||"N/A",D=r.horaFin?r.horaFin.substring(0,5):"N/A",F=r.observaciones,A=r.operador?`${r.operador.nombre_completo}`:"N/A";t.push([d,$,k,N,w,T,D,F,A])});const c=P.book_new(),S=P.aoa_to_sheet(t);P.book_append_sheet(c,S,"Reporte_Castigos"),ee(c,o)},L=[{titulo:"Castigos",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(s,e)=>e+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-de+1},(s,e)=>de+e);let m=1,g=1,p=V;return(s,e)=>(i(),l(v,null,f(L,a=>n("div",{key:a.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",wo,b(a.titulo),1),e[9]||(e[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",Ao,[e[6]||(e[6]=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>E.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=n("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(z.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,ko))),128))],512),[[h,E.unidad]])])])]),n("div",No,[n("div",Uo,[e[8]||(e[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":o=>a.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,Co),[[h,a.periodoSeleccionado]]),a.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>O(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(o,t)=>(i(),l("option",{key:t,value:o},"Semana "+b(o),9,Eo))),128))],512)),[[h,u(m)]]):a.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>O(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(o,t)=>n("option",{key:t,value:t+1},b(o),9,Ro)),64))],512)),[[h,u(g)]]):a.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>O(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),o=>(i(),l("option",{key:o,value:o},b(o),9,To))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",Do,[(i(),l(v,null,f(G,o=>n("button",{key:o.tipo,class:K(o.clase),onClick:t=>M(a,o.tipo,E.unidad,{tipo:a.periodoSeleccionado,valor:a.periodoSeleccionado==="semana"?u(m):a.periodoSeleccionado==="mes"?u(g):a.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(o.icono+" mr-2 jump-icon")},null,2),X(" "+b(o.texto),1)],10,Fo)),64))])])),64))}},Oo={class:"text-lg font-bold"},Po={class:"flex flex-wrap gap-4 mb-3"},Vo=["value"],jo={class:"flex flex-wrap gap-4 mb-3"},Ko={class:"flex flex-wrap space-x-3 mb-2"},zo=["onUpdate:modelValue"],Bo=["value"],Mo=["value"],Yo=["value"],Lo={class:"flex flex-wrap space-x-3"},Go=["onClick"],ce=2024,na={__name:"ReportesUltimasCorridas",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})}},setup(z){const C=q([]),E=Q({unidad:null,operador:null}),B=async(s,e)=>{let a="";e.tipo==="semana"?a=route("reportes.UCSemana",{idUnidad:s,semana:e.valor}):e.tipo==="mes"||typeof e=="number"?a=route("reportes.UCMes",{idUnidad:s,mes:e.valor}):e.tipo==="anio"&&(a=route("reportes.UCAnio",{idUnidad:s,anio:e.valor}));try{const o=await Z.get(a);C.value=o.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(s,e,a,o)=>{if(!a||!o.tipo||!o.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let t={tipo:s.periodoSeleccionado,valor:""};s.periodoSeleccionado==="semana"?t.valor=m:s.periodoSeleccionado==="mes"?t.valor=g:s.periodoSeleccionado==="anio"&&(t.valor=p);try{await B(a,t),s.titulo==="Últimas Corridas"?e==="pdf"?j(s.titulo,t):e==="excel"?Y(s.titulo,t):e==="imprimir"&&imprimirReporte(s.titulo,t):U.fire({title:`Generar el reporte "${s.titulo}" en ${e}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=new oe({orientation:"landscape"});o.setFontSize(12),o.text(`Reporte de ${s} - Período: ${a}`,14,20);const t=C.value.map(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.tipo_ultima_corrida?r.tipo_ultima_corrida.tipoUltimaCorrida:"N/A",T=r.horaInicioUC?r.horaInicioUC.substring(0,5):"N/A",D=r.horaFinUC?r.horaFinUC.substring(0,5):"N/A",F=r.operador?`${r.operador.nombre_completo}`:"N/A";return[d,$,k,N,w,T,D,F]});o.autoTable({startY:24,head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Tipo Última Corrida","Hora Inicio","Hora Fin","Operador"]],body:t});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});o.setFontSize(10),o.text(`Fecha de creación: ${c}`,14,o.internal.pageSize.height-10);const S=`${s}-${a}.pdf`;o.save(S)},Y=(s,e)=>{let a;e.tipo==="semana"?a=`Semana ${e.valor}`:e.tipo==="mes"?a=R[e.valor-1]:(e.tipo,a=e.valor);const o=`${s}-${a}.xlsx`,t=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Tipo Última Corrida","Hora Inicio","Hora Fin","Operador"]];C.value.forEach(r=>{var A,_,y;const d=(A=r.unidad)!=null&&A.ruta?r.unidad.ruta.nombreRuta:"N/A",$=r.created_at?new Date(r.created_at).toLocaleDateString():"N/A",k=((_=r.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(y=r.unidad)!=null&&y.directivo?`${r.unidad.directivo.nombre_completo}`:"N/A",w=r.tipo_ultima_corrida?r.tipo_ultima_corrida.tipoUltimaCorrida:"N/A",T=r.horaInicioUC?r.horaInicioUC.substring(0,5):"N/A",D=r.horaFinUC?r.horaFinUC.substring(0,5):"N/A",F=r.operador?`${r.operador.nombre_completo}`:"N/A";t.push([d,$,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(t);P.book_append_sheet(c,S,"Reporte_Últimas_Corridas"),ee(c,o)},L=[{titulo:"Últimas Corridas",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(s,e)=>e+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-ce+1},(s,e)=>ce+e);let m=1,g=1,p=V;return(s,e)=>(i(),l(v,null,f(L,a=>n("div",{key:a.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",Oo,b(a.titulo),1),e[9]||(e[9]=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1)),n("div",Po,[e[6]||(e[6]=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1)),n("div",null,[n("div",null,[x(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":e[0]||(e[0]=o=>E.unidad=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[e[4]||(e[4]=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1)),e[5]||(e[5]=n("option",{value:"todas"},"Todas las unidades",-1)),(i(!0),l(v,null,f(z.unidad,o=>(i(),l("option",{key:o.idUnidad,value:o.idUnidad},b(o.numeroUnidad),9,Vo))),128))],512),[[h,E.unidad]])])])]),n("div",jo,[n("div",Ko,[e[8]||(e[8]=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1)),x(n("select",{"onUpdate:modelValue":o=>a.periodoSeleccionado=o,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},e[7]||(e[7]=[n("option",{value:"semana"},"Semanal",-1),n("option",{value:"mes"},"Mensual",-1),n("option",{value:"anio"},"Anual",-1)]),8,zo),[[h,a.periodoSeleccionado]]),a.periodoSeleccionado==="semana"?x((i(),l("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>O(m)?m.value=o:m=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(H),(o,t)=>(i(),l("option",{key:t,value:o},"Semana "+b(o),9,Bo))),128))],512)),[[h,u(m)]]):a.periodoSeleccionado==="mes"?x((i(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>O(g)?g.value=o:g=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),l(v,null,f(R,(o,t)=>n("option",{key:t,value:t+1},b(o),9,Mo)),64))],512)),[[h,u(g)]]):a.periodoSeleccionado==="anio"?x((i(),l("select",{key:2,"onUpdate:modelValue":e[3]||(e[3]=o=>O(p)?p.value=o:p=o),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),l(v,null,f(u(I),o=>(i(),l("option",{key:o,value:o},b(o),9,Yo))),128))],512)),[[h,u(p)]]):W("",!0)])]),n("div",Lo,[(i(),l(v,null,f(G,o=>n("button",{key:o.tipo,class:K(o.clase),onClick:t=>M(a,o.tipo,E.unidad,{tipo:a.periodoSeleccionado,valor:a.periodoSeleccionado==="semana"?u(m):a.periodoSeleccionado==="mes"?u(g):a.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:K(o.icono+" mr-2 jump-icon")},null,2),X(" "+b(o.texto),1)],10,Go)),64))])])),64))}};export{Wo as _,oa as a,Xo as b,Zo as c,ea as d,na as e,ta as f,aa as g};
