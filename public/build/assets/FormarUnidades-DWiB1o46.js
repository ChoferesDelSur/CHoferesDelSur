import{u as J,i as ee,r as k,o as g,j as X,e as z,a as e,g as te,t as v,w as F,d as u,k as N,c as _,F as G,m as q,p as P,l as I,y as ue,f as m,L as de,D as me,q as Ee,b as V,x as je}from"./app-2HR5oQ8c.js";import"./buttons.print-y0zNFMct.js";import{_ as Oe}from"./Mensaje-CuW9Lt87.js";import"./jspdf.plugin.autotable-B403eXP8.js";import{u as ie,w as Ie}from"./xlsx-769MyM77.js";import{_ as He}from"./ServicioLayout-syvvUNqy.js";import{_ as oe}from"./Modal-D_M_LKXS.js";import{r as ae}from"./index-DLbc3Hmf.js";/* empty css                                                */const Te={class:"mt-2 bg-white p-4 shadow rounded-lg"},Me={class:"border-b border-gray-900/10 pb-12"},Le={class:"text-base font-semibold leading-7 text-gray-900"},Ne=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1),Be={class:"flex flex-wrap -mx-4"},Ae={class:"md:col-span-2"},We={class:"sm:col-span-2",hidden:""},Ve=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1),ze={class:"mt-1"},Ge=["id"],qe={class:"sm:col-span-2 px-4"},Pe=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Je={class:"mt-2"},Xe=["id"],Ye=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Ke=["value"],Qe={key:0,class:"text-red-500 text-xs mt-1"},Ze={class:"sm:col-span-2 px-4"},et=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1),tt={class:"mt-2"},ot=["id"],at={key:0,class:"text-red-500 text-xs"},dt={class:"sm:col-span-2 px-4"},it=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1),st={class:"mt-2"},nt=e("label",{for:"si",class:"radio-label"}," Sí",-1),rt=e("label",{for:"no",class:"radio-label"}," No",-1),lt={key:0,class:"text-red-500 text-xs"},ct={class:"mt-6 flex items-center justify-end gap-x-6"},ut=["id"],mt=e("i",{class:"fa-solid fa-ban"},null,-1),gt=["disabled"],pt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ht={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const c=a,H=d,t=J({idEntrada:c.entrada.idEntrada,unidad:c.entrada.idUnidad,horaEntrada:c.entrada.horaEntrada,extremo:c.entrada.extremo});ee(()=>c.entrada,async r=>{t.idEntrada=r.idEntrada,t.unidad=r.unidad,t.horaEntrada=r.horaEntrada,t.extremo=r.extremo},{deep:!0});const R=r=>r!=null,D=r=>r!=null,h=k(""),f=k(""),U=k(""),y=async()=>{H("close"),t.reset()},w=async()=>{f.value=R(t.horaEntrada)?"":"Seleccione la hora de entrada",h.value=R(t.unidad)?"":"Seleccione una unidad",U.value=D(t.extremo)?"":"Seleccione una opción",!(f.value||h.value||U.value)&&t.post(ae("servicio.registarHoraEntrada"),{onSuccess:()=>{y(),f.value="",h.value="",U.value=""}})};return(r,n)=>(g(),X(oe,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:y},{default:z(()=>[e("div",Te,[e("form",{onSubmit:n[5]||(n[5]=te(i=>a.op==="1"?w():r.update(),["prevent"]))},[e("div",Me,[e("h2",Le,v(a.title),1),Ne,e("div",Be,[e("div",Ae,[e("div",We,[Ve,e("div",ze,[F(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":n[0]||(n[0]=i=>u(t).idEntrada=i),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+a.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ge),[[N,u(t).idEntrada]])])])]),e("div",qe,[Pe,e("div",Je,[F(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":n[1]||(n[1]=i=>u(t).unidad=i),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Ye,(g(!0),_(G,null,q(a.unidadesConOperador,i=>(g(),_("option",{key:i.idUnidad,value:i.idUnidad},v(i.numeroUnidad),9,Ke))),128))],8,Xe),[[P,u(t).unidad]])]),h.value!=""?(g(),_("div",Qe,v(h.value),1)):I("",!0)]),e("div",Ze,[et,e("div",tt,[F(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+a.op,"onUpdate:modelValue":n[2]||(n[2]=i=>u(t).horaEntrada=i),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ot),[[N,u(t).horaEntrada]])]),f.value!=""?(g(),_("div",at,v(f.value),1)):I("",!0)]),e("div",dt,[it,e("div",st,[F(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":n[3]||(n[3]=i=>u(t).extremo=i)},null,512),[[ue,u(t).extremo]]),nt,F(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":n[4]||(n[4]=i=>u(t).extremo=i)},null,512),[[ue,u(t).extremo]]),rt]),U.value!=""?(g(),_("div",lt,v(U.value),1)):I("",!0)])])]),e("div",ct,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:y},[mt,m(" Cancelar")],8,ut),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:u(t).processing},[pt,m("Guardar")],8,gt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},bt={class:"mt-2 bg-white p-4 shadow rounded-lg"},ft={class:"border-b border-gray-900/10 pb-12"},yt={class:"text-base font-semibold leading-7 text-gray-900"},xt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),vt={class:"flex flex-wrap -mx-4"},_t={class:"sm:col-span-2 px-4"},Ut=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),$t={class:"mt-2"},Ct=["id"],wt=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),St=["value"],kt={key:0,class:"text-red-500 text-xs mt-1"},Dt={class:"sm:col-span-2 px-4"},Rt=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1),Ft={class:"mt-2"},Et=["id"],jt={key:0,class:"text-red-500 text-xs"},Ot={class:"sm:col-span-2 px-4"},It=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Causa "),e("span",{class:"text-red-500"},"*")],-1),Ht={class:"mt-2"},Tt=["id"],Mt={key:0,class:"text-red-500 text-xs mt-1"},Lt={class:"sm:col-span-2 px-4"},Nt=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1),Bt={class:"mt-2"},At=["id"],Wt={class:"mt-6 flex items-center justify-end gap-x-6"},Vt=["id"],zt=e("i",{class:"fa-solid fa-ban"},null,-1),Gt=["disabled"],qt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Pt={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const c=a,H=d,t=J({idCorte:c.corte.idCorte,unidad:c.corte.idUnidad,horaCorte:c.corte.horaCorte,causa:c.corte.corte,horaRegreso:c.corte.horaRegreso});ee(()=>c.corte,async r=>{t.idCorte=r.idCorte,t.unidad=r.unidad,t.horaCorte=r.horaCorte,t.causa=r.causa,t.horaRegreso=r.horaRegreso},{deep:!0});const R=r=>r!=null,D=r=>typeof r=="string"&&r.trim()!=="",h=k(""),f=k(""),U=k("");k("");const y=async()=>{H("close"),t.reset()},w=async()=>{f.value=R(t.horaCorte)?"":"Seleccione la hora de corte",h.value=R(t.unidad)?"":"Seleccione una unidad",U.value=D(t.causa)?"":"Ingrese la causa del corte",!(f.value||h.value||U.value)&&t.post(ae("servicio.registarCorte"),{onSuccess:()=>{y(),f.value="",h.value="",U.value=""}})};return(r,n)=>(g(),X(oe,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:y},{default:z(()=>[e("div",bt,[e("form",{onSubmit:n[4]||(n[4]=te(i=>a.op==="1"?w():r.update(),["prevent"]))},[e("div",ft,[e("h2",yt,v(a.title),1),xt,e("div",vt,[e("div",_t,[Ut,e("div",$t,[F(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":n[0]||(n[0]=i=>u(t).unidad=i),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[wt,(g(!0),_(G,null,q(a.unidadesConOperador,i=>(g(),_("option",{key:i.idUnidad,value:i.idUnidad},v(i.numeroUnidad),9,St))),128))],8,Ct),[[P,u(t).unidad]])]),h.value!=""?(g(),_("div",kt,v(h.value),1)):I("",!0)]),e("div",Dt,[Rt,e("div",Ft,[F(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+a.op,"onUpdate:modelValue":n[1]||(n[1]=i=>u(t).horaCorte=i),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Et),[[N,u(t).horaCorte]])]),f.value!=""?(g(),_("div",jt,v(f.value),1)):I("",!0)]),e("div",Ot,[It,e("div",Ht,[F(e("input",{type:"text",name:"causa",id:"causa"+a.op,"onUpdate:modelValue":n[2]||(n[2]=i=>u(t).causa=i),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Tt),[[N,u(t).causa]])]),U.value!=""?(g(),_("div",Mt,v(U.value),1)):I("",!0)]),e("div",Lt,[Nt,e("div",Bt,[F(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+a.op,"onUpdate:modelValue":n[3]||(n[3]=i=>u(t).horaRegreso=i),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,At),[[N,u(t).horaRegreso]])])])])]),e("div",Wt,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:y},[zt,m(" Cancelar")],8,Vt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:u(t).processing},[qt,m("Guardar")],8,Gt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Jt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Xt={class:"border-b border-gray-900/10 pb-12"},Yt={class:"text-base font-semibold leading-7 text-gray-900"},Kt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1),Qt={class:"flex flex-wrap -mx-4"},Zt={class:"sm:col-span-2 px-4"},eo=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),to={class:"mt-2"},oo=["id"],ao=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),io=["value"],so={key:0,class:"text-red-500 text-xs mt-1"},no={class:"sm:col-span-2 px-4"},ro=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1),lo={class:"mt-2"},co=["id"],uo={key:0,class:"text-red-500 text-xs mt-1"},mo={class:"mt-6 flex items-center justify-end gap-x-6"},go=["id"],po=e("i",{class:"fa-solid fa-ban"},null,-1),ho=["disabled"],bo=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),fo={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const c=a,H=d,t=J({idFormacionUnidades:c.formacionUnidades.idFormacionUnidades,unidad:c.formacionUnidades.idUnidad,horaRegreso:c.formacionUnidades.horaRegreso});ee(()=>c.formacionUnidades,async y=>{t.idFormacionUnidades=y.idFormacionUnidades,t.unidad=y.unidad,t.horaRegreso=c.formacionUnidades.horaRegreso},{deep:!0});const R=y=>y!=null,D=k(""),h=k(""),f=async()=>{H("close"),t.reset()},U=async()=>{h.value=R(t.horaRegreso)?"":"Seleccione la hora de regreso",D.value=R(t.unidad)?"":"Seleccione una unidad",!(h.value||D.value)&&t.post(ae("servicio.registrarHoraRegreso"),{onSuccess:()=>{f(),h.value="",D.value=""}})};return(y,w)=>(g(),X(oe,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:f},{default:z(()=>[e("div",Jt,[e("form",{onSubmit:w[2]||(w[2]=te(r=>a.op==="1"?U():y.update(),["prevent"]))},[e("div",Xt,[e("h2",Yt,v(a.title),1),Kt,e("div",Qt,[e("div",Zt,[eo,e("div",to,[F(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":w[0]||(w[0]=r=>u(t).unidad=r),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ao,(g(!0),_(G,null,q(a.unidad,r=>(g(),_("option",{key:r.idUnidad,value:r.idUnidad},v(r.numeroUnidad),9,io))),128))],8,oo),[[P,u(t).unidad]])]),D.value!=""?(g(),_("div",so,v(D.value),1)):I("",!0)]),e("div",no,[ro,e("div",lo,[F(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+a.op,"onUpdate:modelValue":w[1]||(w[1]=r=>u(t).horaRegreso=r),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,co),[[N,u(t).horaRegreso]])]),h.value!=""?(g(),_("div",uo,v(h.value),1)):I("",!0)])])]),e("div",mo,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[po,m(" Cancelar")],8,go),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:u(t).processing},[bo,m("Guardar")],8,ho)])],32)])]),_:1},8,["show","max-width","closeable"]))}},yo={class:"mt-2 bg-white p-4 shadow rounded-lg"},xo={class:"border-b border-gray-900/10 pb-12"},vo={class:"text-base font-semibold leading-7 text-gray-900"},_o=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),Uo={class:"flex flex-wrap -mx-4"},$o={class:"sm:col-span-2 px-4"},Co=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),wo={class:"mt-2"},So=["id"],ko=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Do=["value"],Ro={key:0,class:"text-red-500 text-xs mt-1"},Fo={class:"sm:col-span-2 px-4"},Eo=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Castigo "),e("span",{class:"text-red-500"},"*")],-1),jo={class:"mt-2"},Oo=["id"],Io={key:0,class:"text-red-500 text-xs mt-1"},Ho={class:"sm:col-span-2 px-4"},To=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),Mo={class:"mt-2"},Lo=["id"],No={key:0,class:"text-red-500 text-xs"},Bo={class:"sm:col-span-2 px-4"},Ao=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Wo={class:"mt-2"},Vo=["id"],zo={key:0,class:"text-red-500 text-xs"},Go={class:"sm:col-span-2 px-4"},qo=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1),Po={class:"mt-2"},Jo=["id"],Xo={class:"mt-6 flex items-center justify-end gap-x-6"},Yo=["id"],Ko=e("i",{class:"fa-solid fa-ban"},null,-1),Qo=["disabled"],Zo=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ea={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const c=a,H=d,t=J({idCastigo:c.castigo.idCastigo,castigo:c.castigo.castigo,observaciones:c.castigo.observaciones,horaInicio:c.castigo.horaInicio,horaFin:c.castigo.horaFin,unidad:c.castigo.idUnidad});ee(()=>c.castigo,async n=>{t.idCastigo=n.idCastigo,t.castigo=n.castigo,t.observaciones=n.observaciones,t.horaInicio=n.horaInicio,t.horaFin=c.horaFin,t.unidad=c.unidad},{deep:!0});const R=n=>n!=null,D=n=>typeof n=="string"&&n.trim()!=="",h=k(""),f=k(""),U=k(""),y=k(""),w=async()=>{H("close"),t.reset()},r=async()=>{f.value=R(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",h.value=R(t.unidad)?"":"Seleccione una unidad",U.value=D(t.castigo)?"":"Ingrese motivo del castigo",y.value=R(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(f.value||h.value||U.value||y.value)&&t.post(ae("servicio.registrarCastigo"),{onSuccess:()=>{w(),f.value="",h.value="",U.value="",y.value=""}})};return(n,i)=>(g(),X(oe,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:w},{default:z(()=>[e("div",yo,[e("form",{onSubmit:i[5]||(i[5]=te(C=>a.op==="1"?r():n.update(),["prevent"]))},[e("div",xo,[e("h2",vo,v(a.title),1),_o,e("div",Uo,[e("div",$o,[Co,e("div",wo,[F(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":i[0]||(i[0]=C=>u(t).unidad=C),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ko,(g(!0),_(G,null,q(a.unidad,C=>(g(),_("option",{key:C.idUnidad,value:C.idUnidad},v(C.numeroUnidad),9,Do))),128))],8,So),[[P,u(t).unidad]])]),h.value!=""?(g(),_("div",Ro,v(h.value),1)):I("",!0)]),e("div",Fo,[Eo,e("div",jo,[F(e("input",{type:"text",name:"castigo",id:"castigo"+a.op,"onUpdate:modelValue":i[1]||(i[1]=C=>u(t).castigo=C),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Oo),[[N,u(t).castigo]])]),U.value!=""?(g(),_("div",Io,v(U.value),1)):I("",!0)]),e("div",Ho,[To,e("div",Mo,[F(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+a.op,"onUpdate:modelValue":i[2]||(i[2]=C=>u(t).horaInicio=C),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Lo),[[N,u(t).horaInicio]])]),f.value!=""?(g(),_("div",No,v(f.value),1)):I("",!0)]),e("div",Bo,[Ao,e("div",Wo,[F(e("input",{type:"time",name:"horaFin",id:"horaFin"+a.op,"onUpdate:modelValue":i[3]||(i[3]=C=>u(t).horaFin=C),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Vo),[[N,u(t).horaFin]])]),y.value!=""?(g(),_("div",zo,v(y.value),1)):I("",!0)]),e("div",Go,[qo,e("div",Po,[F(e("input",{type:"text",name:"observaciones",id:"observaciones"+a.op,"onUpdate:modelValue":i[4]||(i[4]=C=>u(t).observaciones=C),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Jo),[[N,u(t).observaciones]])])])])]),e("div",Xo,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:w},[Ko,m(" Cancelar")],8,Yo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:u(t).processing},[Zo,m("Guardar")],8,Qo)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ta={class:"mt-2 bg-white p-4 shadow rounded-lg"},oa={class:"border-b border-gray-900/10 pb-12"},aa={class:"text-base font-semibold leading-7 text-gray-900"},da=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),ia={class:"flex flex-wrap -mx-4"},sa={class:"sm:col-span-2 px-4"},na=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),ra={class:"mt-2"},la=["id"],ca=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),ua=["value"],ma={key:0,class:"text-red-500 text-xs mt-1"},ga={class:"sm:col-span-2 px-4"},pa=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1),ha={class:"mt-2"},ba=["id"],fa=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1),ya=["value"],xa={key:0,class:"text-red-500 text-xs mt-1"},va={class:"sm:col-span-2 px-4"},_a=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),Ua={class:"mt-2"},$a=["id"],Ca={key:0,class:"text-red-500 text-xs"},wa={class:"sm:col-span-2 px-4"},Sa=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1),ka={class:"mt-2"},Da=["id"],Ra={class:"mt-6 flex items-center justify-end gap-x-6"},Fa=["id"],Ea=e("i",{class:"fa-solid fa-ban"},null,-1),ja=["disabled"],Oa=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Ia={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const c=a,H=d,t=J({idUltimaCorrida:c.ultimaCorrida.idUltimaCorrida,unidad:c.ultimaCorrida.idUnidad,tipoUltimaCorrida:c.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:c.ultimaCorrida.horaInicioUC,horaFinUC:c.ultimaCorrida.horaFinUC});ee(()=>c.ultimaCorrida,async r=>{t.idUltimaCorrida=r.idUltimaCorrida,t.tipoUltimaCorrida=r.tipoUltimaCorrida,t.horaInicioUC=r.horaInicioUC,t.horaFinUC=r.horaFinUC},{deep:!0});const R=r=>r!=null,D=r=>r!=null,h=k(""),f=k(""),U=k(""),y=async()=>{H("close"),t.reset()},w=async()=>{f.value=R(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",h.value=R(t.unidad)?"":"Seleccione una unidad",U.value=D(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(f.value||h.value||U.value)&&t.post(ae("servicio.registrarUC"),{onSuccess:()=>{y(),f.value="",h.value="",U.value=""}})};return(r,n)=>(g(),X(oe,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:y},{default:z(()=>[e("div",ta,[e("form",{onSubmit:n[4]||(n[4]=te(i=>a.op==="1"?w():r.update(),["prevent"]))},[e("div",oa,[e("h2",aa,v(a.title),1),da,e("div",ia,[e("div",sa,[na,e("div",ra,[F(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":n[0]||(n[0]=i=>u(t).unidad=i),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ca,(g(!0),_(G,null,q(a.unidad,i=>(g(),_("option",{key:i.idUnidad,value:i.idUnidad},v(i.numeroUnidad),9,ua))),128))],8,la),[[P,u(t).unidad]])]),h.value!=""?(g(),_("div",ma,v(h.value),1)):I("",!0)]),e("div",ga,[pa,e("div",ha,[F(e("select",{name:"tipoCorrida",id:"tipoCorrida"+a.op,"onUpdate:modelValue":n[1]||(n[1]=i=>u(t).tipoUltimaCorrida=i),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[fa,(g(!0),_(G,null,q(a.tipoUltimaCorrida,i=>(g(),_("option",{key:i.idTipoUltimaCorrida,value:i.idTipoUltimaCorrida},v(i.tipoUltimaCorrida),9,ya))),128))],8,ba),[[P,u(t).tipoUltimaCorrida]])]),U.value!=""?(g(),_("div",xa,v(U.value),1)):I("",!0)]),e("div",va,[_a,e("div",Ua,[F(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+a.op,"onUpdate:modelValue":n[2]||(n[2]=i=>u(t).horaInicioUC=i),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,$a),[[N,u(t).horaInicioUC]])]),f.value!=""?(g(),_("div",Ca,v(f.value),1)):I("",!0)]),e("div",wa,[Sa,e("div",ka,[F(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+a.op,"onUpdate:modelValue":n[3]||(n[3]=i=>u(t).horaFinUC=i),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Da),[[N,u(t).horaFinUC]])])])])]),e("div",Ra,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:y},[Ea,m(" Cancelar")],8,Fa),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:u(t).processing},[Oa,m("Guardar")],8,ja)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Ha={class:"mt-2 bg-white p-4 shadow rounded-lg"},Ta={class:"border-b border-gray-900/10 pb-12"},Ma={class:"text-base font-semibold leading-7 text-gray-900"},La=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),Na={class:"flex flex-wrap -mx-4"},Ba={class:"sm:col-span-2 px-4"},Aa=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),Wa={class:"mt-2"},Va=["id"],za=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Ga=["value"],qa={key:0,class:"text-red-500 text-xs mt-1"},Pa={class:"sm:col-span-2 px-4"},Ja=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Xa={class:"mt-2"},Ya=["id"],Ka={key:0,class:"text-red-500 text-xs mt-1"},Qa={class:"mt-6 flex items-center justify-end gap-x-6"},Za=["id"],ed=e("i",{class:"fa-solid fa-ban"},null,-1),td=["disabled"],od=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),ad={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const c=a,H=d,t=J({idUltimaCorrida:c.ultimaCorrida.idUltimaCorrida,unidad:c.ultimaCorrida.idUnidad,horaFinUC:c.ultimaCorrida.horaFinUC});ee(()=>c.ultimaCorrida,async y=>{t.idUltimaCorrida=y.idUltimaCorrida,t.horaFinUC=y.horaFinUC},{deep:!0});const R=y=>y!=null,D=k(""),h=k(""),f=async()=>{H("close"),t.reset()},U=async()=>{h.value=R(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",D.value=R(t.unidad)?"":"Seleccione una unidad",!(h.value||D.value)&&t.post(ae("servicio.regresoUC"),{onSuccess:()=>{f(),h.value="",D.value=""}})};return(y,w)=>(g(),X(oe,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:f},{default:z(()=>[e("div",Ha,[e("form",{onSubmit:w[2]||(w[2]=te(r=>a.op==="1"?U():y.update(),["prevent"]))},[e("div",Ta,[e("h2",Ma,v(a.title),1),La,e("div",Na,[e("div",Ba,[Aa,e("div",Wa,[F(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":w[0]||(w[0]=r=>u(t).unidad=r),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[za,(g(!0),_(G,null,q(a.unidad,r=>(g(),_("option",{key:r.idUnidad,value:r.idUnidad},v(r.numeroUnidad),9,Ga))),128))],8,Va),[[P,u(t).unidad]])]),D.value!=""?(g(),_("div",qa,v(D.value),1)):I("",!0)]),e("div",Pa,[Ja,e("div",Xa,[F(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+a.op,"onUpdate:modelValue":w[1]||(w[1]=r=>u(t).horaFinUC=r),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ya),[[N,u(t).horaFinUC]])]),D.value!=""?(g(),_("div",Ka,v(D.value),1)):I("",!0)])])]),e("div",Qa,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[ed,m(" Cancelar")],8,Za),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:u(t).processing},[od,m("Guardar")],8,td)])],32)])]),_:1},8,["show","max-width","closeable"]))}},dd={class:"mt-2 bg-white p-4 shadow rounded-lg"},id={class:"text-base font-semibold leading-7 text-gray-900"},sd={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},nd={class:"sm:col-span-2 px-4"},rd=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),ld={class:"mt-2"},cd=e("option",{disabled:""},"Seleccione una o más unidades",-1),ud=["value"],md={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},gd={class:"sm:col-span-2 px-4"},pd=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),hd={class:"mt-2"},bd=e("option",{disabled:""},"Seleccione una o más unidades",-1),fd=["value"],yd={key:0,class:"text-red-500 text-xs mt-1 mb-4"},xd={class:"mt-6 flex items-center justify-end gap-x-6"},vd=["id"],_d=e("i",{class:"fa-solid fa-ban"},null,-1),Ud=["disabled"],$d=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Cd={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:d}){const c=a,H=d,t=J({idRolServicio:c.rolServicio.idRolServicio,unidad:[],trabajaDomingo:c.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});ee(()=>c.rolServicio,async n=>{t.idRolServicio=n.idRolServicio,t.trabajaDomingo=n.trabajaDomingo},{deep:!0});const R=async()=>{H("close"),t.reset()},D=(n,i)=>n.length>0||i.length>0,h=k(""),f=async()=>{h.value=D(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!h.value&&t.post(ae("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{R(),h.value=""}})},U=()=>{const n=new Date,i=n.getDay(),C=i===0?7:i,Y=new Date(n);return Y.setDate(n.getDate()-C),Y.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},y=()=>{const n=new Date,C=7-n.getDay(),Y=new Date(n);return Y.setDate(n.getDate()+C),Y.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},w=U(),r=y();return(n,i)=>(g(),X(oe,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:R},{default:z(()=>[e("div",dd,[e("form",{onSubmit:i[2]||(i[2]=te(C=>a.op==="1"?f():n.update(),["prevent"]))},[e("h2",id,v(a.title),1),e("p",sd,[m("Seleccione las unidades que trabajaron el : "),e("strong",null,v(u(w)),1),m(". ")]),e("div",nd,[rd,e("div",ld,[F(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":i[0]||(i[0]=C=>u(t).unidadesSi=C),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[cd,(g(!0),_(G,null,q(a.unidad,C=>(g(),_("option",{key:C.idUnidad,value:C.idUnidad},v(C.numeroUnidad),9,ud))),128))],512),[[P,u(t).unidadesSi]])])]),e("p",md,[m("Seleccione las unidades que trabajarán el próximo: "),e("strong",null,v(u(r)),1),m(". ")]),e("div",gd,[pd,e("div",hd,[F(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":i[1]||(i[1]=C=>u(t).unidadesNo=C),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[bd,(g(!0),_(G,null,q(a.unidad,C=>(g(),_("option",{key:C.idUnidad,value:C.idUnidad},v(C.numeroUnidad),9,fd))),128))],512),[[P,u(t).unidadesNo]])])]),h.value?(g(),_("div",yd,v(h.value),1)):I("",!0),e("div",xd,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:R},[_d,m(" Cancelar")],8,vd),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:u(t).processing},[$d,m("Guardar")],8,Ud)])],32)])]),_:1},8,["show","max-width","closeable"]))}},wd={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},Sd=e("h2",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1),kd=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1),Dd={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},Rd=e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),Fd=e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),Ed=e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),jd=e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),Od=e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),Id={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},Hd=e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),Td=e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),Md={class:"overflow-x-auto"},Ld={class:"text-sm leading-normal border-b border-gray-300"},Nd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Bd={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},Ad=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Wd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Vd=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1),zd=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1),Gd=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1),qd=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1),Pd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Jd=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Trab. DOMINGO "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Extremo "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo de Corrida "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. finaliza "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1),Q="xl",Z=!0,di={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(a){de.use(me),de.use(me);const d=a,c=new Date().toLocaleDateString(),H=t(new Date().getDay());function t(p){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][p]}Ee(()=>d.entrada.filter(p=>new Date(p.fechaRegistro).toLocaleDateString()===c));const R=()=>{je(()=>{const x=$("#formacionTablaId").DataTable().rows({search:"applied"}).data(),b=new Date().toLocaleDateString("es-ES"),E=()=>{const j=new Date,T=j.getFullYear(),K=String(j.getMonth()+1).padStart(2,"0"),M=String(j.getDate()).padStart(2,"0");return`${T}-${K}-${M}`},l=j=>{if(!j)return"";const[T,K]=j.split(":");return`${T}:${K}`},o=x.toArray().map(j=>{var se,ne,re,le,ce;const T=d.ultimaCorrida.find(O=>O.idUnidad===j.idUnidad),K=d.tipoUltimaCorrida.find(O=>O.idTipoUltimaCorrida===(T==null?void 0:T.idTipoUltimaCorrida)),M=d.entrada.find(O=>O.idUnidad===j.idUnidad),W=d.corte.find(O=>O.idUnidad===j.idUnidad),B=d.castigo.find(O=>O.idUnidad===j.idUnidad),L=new Date(M==null?void 0:M.fechaRegistro).toLocaleDateString("es-ES"),ye=L===b?l(M==null?void 0:M.horaEntrada):"",xe=L===b?M==null?void 0:M.tipoEntrada:"",ve=L===b?M==null?void 0:M.extremo:"",_e=L===b?l(W==null?void 0:W.horaCorte):"",Ue=L===b?W==null?void 0:W.causa:"",$e=L===b?l(W==null?void 0:W.horaRegreso):"",Ce=L===b?K==null?void 0:K.tipoUltimaCorrida:"",we=L===b?l(T==null?void 0:T.horaInicioUC):"",Se=L===b?l(T==null?void 0:T.horaFinUC):"",ke=L===b?l(B==null?void 0:B.horaInicio):"",De=L===b?l(B==null?void 0:B.horaFin):"",Re=L===b?B==null?void 0:B.castigo:"",Fe=L===b?B==null?void 0:B.observaciones:"";return{ID:j.idUnidad,Ruta:(se=d.ruta.find(O=>O.idRuta===j.idRuta))==null?void 0:se.nombreRuta,"Trab. Domingo":(ne=d.rolServicio.find(O=>O.idRolServicio===j.idUnidad))==null?void 0:ne.trabajaDomingo,Unidad:(re=d.unidad.find(O=>O.idUnidad===j.idUnidad))==null?void 0:re.numeroUnidad,"Socio/Prestador":((le=d.directivo.find(O=>O.idDirectivo===j.idDirectivo))==null?void 0:le.nombre_completo)||"","Hr. Entrada":ye,"Tipo Entrada":xe,Extremo:ve,"Hr. Corte":_e,Causa:Ue,"Hr. Regreso":$e,"Tipo De Corrida":Ce,"Hr. Inicio UC":we,"Hr. Regreso UC":Se,"Hr. Inicio":ke,"Hr. Finaliza":De,Motivo:Re,"Otras Observaciones":Fe,Operador:(ce=d.operador.find(O=>O.idOperador===j.idOperador))==null?void 0:ce.nombre_completo}}),s=ie.json_to_sheet(o),S=ie.book_new();ie.book_append_sheet(S,s,"Formación De Unidades");const A=E();Ie(S,`Formación_De_Unidades_${A}.xlsx`)})},D=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>R()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],h=[{data:null,render:function(p,x,b,E){return E.row+1}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.ruta.find(s=>s.idRuta===l.idRuta);return o?o.nombreRuta:""}else return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.rolServicio.filter(s=>s.idUnidad===l.idUnidad);return o.length>0?(o.sort((s,S)=>new Date(S.created_at)-new Date(s.created_at)),o[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);return l?l.numeroUnidad:""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.directivo.find(s=>s.idDirectivo===l.idDirectivo);return o?o.nombre_completo:""}else return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.entrada.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0)return o.map(S=>S.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.entrada.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0)return o.map(S=>S.tipoEntrada).join(", ")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.entrada.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0)return o.map(S=>S.extremo).join(", ")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.corte.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0)return o.map((S,A)=>`
            <div style="${o.length>1&&A!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${S.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.corte.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0)return o.map((S,A)=>`
            <div style="${o.length>1&&A!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${S.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.corte.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0)return o.map((S,A)=>{const j=S.horaRegreso?S.horaRegreso.substring(0,5):"";return`
            <div style="${o.length>1&&A!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${j}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.ultimaCorrida.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0){const s=d.tipoUltimaCorrida.find(S=>S.idTipoUltimaCorrida===o[0].idTipoUltimaCorrida);if(s)return s.tipoUltimaCorrida}}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.ultimaCorrida.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0){const s=o[0].horaInicioUC;return s?s.substring(0,5):""}}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.ultimaCorrida.filter(s=>s.idUnidad===l.idUnidad&&new Date(s.created_at).toLocaleDateString()===c);if(o.length>0){const s=o[0].horaFinUC;if(s)return s.substring(0,5)}}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===c);if(l.length>0){const o=l.map(s=>({horaInicio:s.horaInicio?s.horaInicio.substring(0,5):""}));return o.map((s,S)=>`
          <div style="${o.length>1&&S!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${s.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===c);if(l.length>0){const o=l.map(s=>({horaFin:s.horaFin?s.horaFin.substring(0,5):""}));return o.map((s,S)=>`
          <div style="${o.length>1&&S!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${s.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===c);if(l.length>0){const o=l.map(s=>s.castigo||"");return o.map((s,S)=>`<div style="${o.length>1&&S!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${s}</div>`).join("")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===c);if(l.length>0){const o=l.map(s=>s.observaciones||"");return o.map((s,S)=>`<div style="${o.length>1&&S!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${s}</div>`).join("")}return""}},{data:"idUnidad",render:function(p,x,b,E){const l=d.unidad.find(o=>o.idUnidad===p);if(l){const o=d.operador.find(s=>s.idOperador===l.idOperador);return o?o.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],f=k(!1),U=k(!1),y=k(!1),w=k(!1),r=k(!1),n=k(!1),i=k(!1);k(!1),J({});const C=()=>{f.value=!1},Y=()=>{U.value=!1},ge=()=>{y.value=!1},pe=()=>{w.value=!1},he=()=>{r.value=!1},be=()=>{n.value=!1},fe=()=>{i.value=!1};return(p,x)=>(g(),X(He,{title:"Formar Unidades",usuario:d.usuario},{default:z(()=>[e("div",wd,[Sd,kd,V(Oe),e("div",Dd,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:x[0]||(x[0]=b=>f.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Rd,m(" Registrar Entrada ")]),e("button",{class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:x[1]||(x[1]=b=>U.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Fd,m(" Registrar Corte ")]),e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:x[2]||(x[2]=b=>w.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Ed,m(" Registrar Regreso ")]),e("button",{class:"bg-yellow-500 hover:bg-yellow-500 text-white font-semibold py-2 px-4 rounded",onClick:x[3]||(x[3]=b=>y.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[jd,m(" Registrar castigo ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:x[4]||(x[4]=b=>r.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Od,m(" Registrar UC ")])]),e("div",Id,[e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:x[5]||(x[5]=b=>n.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Hd,m(" Regreso UC ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:x[6]||(x[6]=b=>i.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Td,m(" Rol domingo ")])]),e("div",Md,[V(u(de),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:h,data:a.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[D],paging:!1,lengthMenu:[]}},{default:z(()=>[e("thead",null,[e("tr",Ld,[Nd,e("th",Bd,"FECHA: "+v(u(H)+", "+u(c)),1),Ad,Wd,Vd,zd,Gd,qd,Pd]),Jd])]),_:1},8,["data","options"])])]),V(ht,{show:f.value,"max-width":Q,closeable:Z,onClose:C,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:d.entrada,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","entrada","unidad","unidadesConOperador"]),V(Pt,{show:U.value,"max-width":Q,closeable:Z,onClose:Y,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:d.corte,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),V(fo,{show:w.value,"max-width":Q,closeable:Z,onClose:pe,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:d.unidad},null,8,["show","unidad"]),V(ea,{show:y.value,"max-width":Q,closeable:Z,onClose:ge,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:d.unidad,castigo:d.castigo},null,8,["show","unidad","castigo"]),V(Ia,{show:r.value,"max-width":Q,closeable:Z,onClose:he,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,tipoUltimaCorrida:d.tipoUltimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),V(ad,{show:n.value,"max-width":Q,closeable:Z,onClose:be,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","unidad"]),V(Cd,{show:i.value,"max-width":Q,closeable:Z,onClose:fe,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:d.rolServicio,unidad:d.unidad},null,8,["show","rolServicio","unidad"])]),_:1},8,["usuario"]))}};export{di as default};
