import{u as G,i as K,r as R,o as p,j as q,e as B,a as e,g as Q,t as v,w as j,d as c,k as T,c as _,F as A,m as W,p as V,l as I,y as ue,f as g,L as de,D as me,q as Ce,b as N,x as $e}from"./app-BclnmHRG.js";import"./buttons.print-BQQS0hpc.js";import{_ as Se}from"./Mensaje-Dhq2K6lH.js";import"./jspdf.plugin.autotable-C2pAemS9.js";import{u as se,w as we}from"./xlsx-769MyM77.js";import{_ as ke}from"./ServicioLayout-DWZip0Is.js";import{_ as Y}from"./Modal-BhUxfpJL.js";import{r as Z}from"./index-Daap-1E1.js";/* empty css                                                */const Re={class:"mt-2 bg-white p-4 shadow rounded-lg"},De={class:"border-b border-gray-900/10 pb-12"},Ee={class:"text-base font-semibold leading-7 text-gray-900"},Oe=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1),je={class:"flex flex-wrap -mx-4"},Fe={class:"md:col-span-2"},Ie={class:"sm:col-span-2",hidden:""},He=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1),Me={class:"mt-1"},Te=["id"],Le={class:"sm:col-span-2 px-4"},Ne=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Be={class:"mt-2"},Ae=["id"],We=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Ve=["value"],ze={key:0,class:"text-red-500 text-xs mt-1"},Ge={class:"sm:col-span-2 px-4"},qe=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1),Pe={class:"mt-2"},Je=["id"],Xe={key:0,class:"text-red-500 text-xs"},Ke={class:"sm:col-span-2 px-4"},Qe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1),Ye={class:"mt-2"},Ze=e("label",{for:"si",class:"radio-label"}," Sí",-1),et=e("label",{for:"no",class:"radio-label"}," No",-1),tt={key:0,class:"text-red-500 text-xs"},ot={class:"mt-6 flex items-center justify-end gap-x-6"},at=["id"],it=e("i",{class:"fa-solid fa-ban"},null,-1),dt=["disabled"],st=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),rt={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:i}){const l=a,H=i,t=G({idEntrada:l.entrada.idEntrada,unidad:l.entrada.idUnidad,horaEntrada:l.entrada.horaEntrada,extremo:l.entrada.extremo});K(()=>l.entrada,async n=>{t.idEntrada=n.idEntrada,t.unidad=n.unidad,t.horaEntrada=n.horaEntrada,t.extremo=n.extremo},{deep:!0});const O=n=>n!=null,E=n=>n!=null,h=R(""),x=R(""),U=R(""),y=async()=>{H("close"),t.reset()},w=async()=>{x.value=O(t.horaEntrada)?"":"Seleccione la hora de entrada",h.value=O(t.unidad)?"":"Seleccione una unidad",U.value=E(t.extremo)?"":"Seleccione una opción",!(x.value||h.value||U.value)&&t.post(Z("servicio.registarHoraEntrada"),{onSuccess:()=>{y(),x.value="",h.value="",U.value=""}})};return(n,r)=>(p(),q(Y,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:y},{default:B(()=>[e("div",Re,[e("form",{onSubmit:r[5]||(r[5]=Q(d=>a.op==="1"?w():n.update(),["prevent"]))},[e("div",De,[e("h2",Ee,v(a.title),1),Oe,e("div",je,[e("div",Fe,[e("div",Ie,[He,e("div",Me,[j(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":r[0]||(r[0]=d=>c(t).idEntrada=d),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+a.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Te),[[T,c(t).idEntrada]])])])]),e("div",Le,[Ne,e("div",Be,[j(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":r[1]||(r[1]=d=>c(t).unidad=d),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[We,(p(!0),_(A,null,W(a.unidadesConOperador,d=>(p(),_("option",{key:d.idUnidad,value:d.idUnidad},v(d.numeroUnidad),9,Ve))),128))],8,Ae),[[V,c(t).unidad]])]),h.value!=""?(p(),_("div",ze,v(h.value),1)):I("",!0)]),e("div",Ge,[qe,e("div",Pe,[j(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+a.op,"onUpdate:modelValue":r[2]||(r[2]=d=>c(t).horaEntrada=d),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Je),[[T,c(t).horaEntrada]])]),x.value!=""?(p(),_("div",Xe,v(x.value),1)):I("",!0)]),e("div",Ke,[Qe,e("div",Ye,[j(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":r[3]||(r[3]=d=>c(t).extremo=d)},null,512),[[ue,c(t).extremo]]),Ze,j(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":r[4]||(r[4]=d=>c(t).extremo=d)},null,512),[[ue,c(t).extremo]]),et]),U.value!=""?(p(),_("div",tt,v(U.value),1)):I("",!0)])])]),e("div",ot,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:y},[it,g(" Cancelar")],8,at),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[st,g("Guardar")],8,dt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},nt={class:"mt-2 bg-white p-4 shadow rounded-lg"},lt={class:"border-b border-gray-900/10 pb-12"},ct={class:"text-base font-semibold leading-7 text-gray-900"},ut=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),mt={class:"flex flex-wrap -mx-4"},gt={class:"sm:col-span-2 px-4"},pt=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),bt={class:"mt-2"},ht=["id"],ft=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),xt=["value"],yt={key:0,class:"text-red-500 text-xs mt-1"},vt={class:"sm:col-span-2 px-4"},_t=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1),Ut={class:"mt-2"},Ct=["id"],$t={key:0,class:"text-red-500 text-xs"},St={class:"sm:col-span-2 px-4"},wt=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Causa "),e("span",{class:"text-red-500"},"*")],-1),kt={class:"mt-2"},Rt=["id"],Dt={key:0,class:"text-red-500 text-xs mt-1"},Et={class:"sm:col-span-2 px-4"},Ot=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1),jt={class:"mt-2"},Ft=["id"],It={class:"mt-6 flex items-center justify-end gap-x-6"},Ht=["id"],Mt=e("i",{class:"fa-solid fa-ban"},null,-1),Tt=["disabled"],Lt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Nt={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:i}){const l=a,H=i,t=G({idCorte:l.corte.idCorte,unidad:l.corte.idUnidad,horaCorte:l.corte.horaCorte,causa:l.corte.corte,horaRegreso:l.corte.horaRegreso});K(()=>l.corte,async n=>{t.idCorte=n.idCorte,t.unidad=n.unidad,t.horaCorte=n.horaCorte,t.causa=n.causa,t.horaRegreso=n.horaRegreso},{deep:!0});const O=n=>n!=null,E=n=>typeof n=="string"&&n.trim()!=="",h=R(""),x=R(""),U=R("");R("");const y=async()=>{H("close"),t.reset()},w=async()=>{x.value=O(t.horaCorte)?"":"Seleccione la hora de corte",h.value=O(t.unidad)?"":"Seleccione una unidad",U.value=E(t.causa)?"":"Ingrese la causa del corte",!(x.value||h.value||U.value)&&t.post(Z("servicio.registarCorte"),{onSuccess:()=>{y(),x.value="",h.value="",U.value=""}})};return(n,r)=>(p(),q(Y,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:y},{default:B(()=>[e("div",nt,[e("form",{onSubmit:r[4]||(r[4]=Q(d=>a.op==="1"?w():n.update(),["prevent"]))},[e("div",lt,[e("h2",ct,v(a.title),1),ut,e("div",mt,[e("div",gt,[pt,e("div",bt,[j(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":r[0]||(r[0]=d=>c(t).unidad=d),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ft,(p(!0),_(A,null,W(a.unidadesConOperador,d=>(p(),_("option",{key:d.idUnidad,value:d.idUnidad},v(d.numeroUnidad),9,xt))),128))],8,ht),[[V,c(t).unidad]])]),h.value!=""?(p(),_("div",yt,v(h.value),1)):I("",!0)]),e("div",vt,[_t,e("div",Ut,[j(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+a.op,"onUpdate:modelValue":r[1]||(r[1]=d=>c(t).horaCorte=d),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ct),[[T,c(t).horaCorte]])]),x.value!=""?(p(),_("div",$t,v(x.value),1)):I("",!0)]),e("div",St,[wt,e("div",kt,[j(e("input",{type:"text",name:"causa",id:"causa"+a.op,"onUpdate:modelValue":r[2]||(r[2]=d=>c(t).causa=d),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Rt),[[T,c(t).causa]])]),U.value!=""?(p(),_("div",Dt,v(U.value),1)):I("",!0)]),e("div",Et,[Ot,e("div",jt,[j(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+a.op,"onUpdate:modelValue":r[3]||(r[3]=d=>c(t).horaRegreso=d),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ft),[[T,c(t).horaRegreso]])])])])]),e("div",It,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:y},[Mt,g(" Cancelar")],8,Ht),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[Lt,g("Guardar")],8,Tt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Bt={class:"mt-2 bg-white p-4 shadow rounded-lg"},At={class:"border-b border-gray-900/10 pb-12"},Wt={class:"text-base font-semibold leading-7 text-gray-900"},Vt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1),zt={class:"flex flex-wrap -mx-4"},Gt={class:"sm:col-span-2 px-4"},qt=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),Pt={class:"mt-2"},Jt=["id"],Xt=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Kt=["value"],Qt={key:0,class:"text-red-500 text-xs mt-1"},Yt={class:"sm:col-span-2 px-4"},Zt=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1),eo={class:"mt-2"},to=["id"],oo={key:0,class:"text-red-500 text-xs mt-1"},ao={class:"mt-6 flex items-center justify-end gap-x-6"},io=["id"],so=e("i",{class:"fa-solid fa-ban"},null,-1),ro=["disabled"],no=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),lo={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:i}){const l=a,H=i,t=G({idFormacionUnidades:l.formacionUnidades.idFormacionUnidades,unidad:l.formacionUnidades.idUnidad,horaRegreso:l.formacionUnidades.horaRegreso});K(()=>l.formacionUnidades,async y=>{t.idFormacionUnidades=y.idFormacionUnidades,t.unidad=y.unidad,t.horaRegreso=l.formacionUnidades.horaRegreso},{deep:!0});const O=y=>y!=null,E=R(""),h=R(""),x=async()=>{H("close"),t.reset()},U=async()=>{h.value=O(t.horaRegreso)?"":"Seleccione la hora de regreso",E.value=O(t.unidad)?"":"Seleccione una unidad",!(h.value||E.value)&&t.post(Z("servicio.registrarHoraRegreso"),{onSuccess:()=>{x(),h.value="",E.value=""}})};return(y,w)=>(p(),q(Y,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:x},{default:B(()=>[e("div",Bt,[e("form",{onSubmit:w[2]||(w[2]=Q(n=>a.op==="1"?U():y.update(),["prevent"]))},[e("div",At,[e("h2",Wt,v(a.title),1),Vt,e("div",zt,[e("div",Gt,[qt,e("div",Pt,[j(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":w[0]||(w[0]=n=>c(t).unidad=n),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Xt,(p(!0),_(A,null,W(a.unidad,n=>(p(),_("option",{key:n.idUnidad,value:n.idUnidad},v(n.numeroUnidad),9,Kt))),128))],8,Jt),[[V,c(t).unidad]])]),E.value!=""?(p(),_("div",Qt,v(E.value),1)):I("",!0)]),e("div",Yt,[Zt,e("div",eo,[j(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+a.op,"onUpdate:modelValue":w[1]||(w[1]=n=>c(t).horaRegreso=n),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,to),[[T,c(t).horaRegreso]])]),h.value!=""?(p(),_("div",oo,v(h.value),1)):I("",!0)])])]),e("div",ao,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[so,g(" Cancelar")],8,io),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[no,g("Guardar")],8,ro)])],32)])]),_:1},8,["show","max-width","closeable"]))}},co={class:"mt-2 bg-white p-4 shadow rounded-lg"},uo={class:"border-b border-gray-900/10 pb-12"},mo={class:"text-base font-semibold leading-7 text-gray-900"},go=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),po={class:"flex flex-wrap -mx-4"},bo={class:"sm:col-span-2 px-4"},ho=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),fo={class:"mt-2"},xo=["id"],yo=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),vo=["value"],_o={key:0,class:"text-red-500 text-xs mt-1"},Uo={class:"sm:col-span-2 px-4"},Co=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Castigo "),e("span",{class:"text-red-500"},"*")],-1),$o={class:"mt-2"},So=["id"],wo={key:0,class:"text-red-500 text-xs mt-1"},ko={class:"sm:col-span-2 px-4"},Ro=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),Do={class:"mt-2"},Eo=["id"],Oo={key:0,class:"text-red-500 text-xs"},jo={class:"sm:col-span-2 px-4"},Fo=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Io={class:"mt-2"},Ho=["id"],Mo={key:0,class:"text-red-500 text-xs"},To={class:"sm:col-span-2 px-4"},Lo=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1),No={class:"mt-2"},Bo=["id"],Ao={class:"mt-6 flex items-center justify-end gap-x-6"},Wo=["id"],Vo=e("i",{class:"fa-solid fa-ban"},null,-1),zo=["disabled"],Go=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),qo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:i}){const l=a,H=i,t=G({idCastigo:l.castigo.idCastigo,castigo:l.castigo.castigo,observaciones:l.castigo.observaciones,horaInicio:l.castigo.horaInicio,horaFin:l.castigo.horaFin,unidad:l.castigo.idUnidad});K(()=>l.castigo,async r=>{t.idCastigo=r.idCastigo,t.castigo=r.castigo,t.observaciones=r.observaciones,t.horaInicio=r.horaInicio,t.horaFin=l.horaFin,t.unidad=l.unidad},{deep:!0});const O=r=>r!=null,E=r=>typeof r=="string"&&r.trim()!=="",h=R(""),x=R(""),U=R(""),y=R(""),w=async()=>{H("close"),t.reset()},n=async()=>{x.value=O(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",h.value=O(t.unidad)?"":"Seleccione una unidad",U.value=E(t.castigo)?"":"Ingrese motivo del castigo",y.value=O(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(x.value||h.value||U.value||y.value)&&t.post(Z("servicio.registrarCastigo"),{onSuccess:()=>{w(),x.value="",h.value="",U.value="",y.value=""}})};return(r,d)=>(p(),q(Y,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:w},{default:B(()=>[e("div",co,[e("form",{onSubmit:d[5]||(d[5]=Q(C=>a.op==="1"?n():r.update(),["prevent"]))},[e("div",uo,[e("h2",mo,v(a.title),1),go,e("div",po,[e("div",bo,[ho,e("div",fo,[j(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":d[0]||(d[0]=C=>c(t).unidad=C),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[yo,(p(!0),_(A,null,W(a.unidad,C=>(p(),_("option",{key:C.idUnidad,value:C.idUnidad},v(C.numeroUnidad),9,vo))),128))],8,xo),[[V,c(t).unidad]])]),h.value!=""?(p(),_("div",_o,v(h.value),1)):I("",!0)]),e("div",Uo,[Co,e("div",$o,[j(e("input",{type:"text",name:"castigo",id:"castigo"+a.op,"onUpdate:modelValue":d[1]||(d[1]=C=>c(t).castigo=C),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,So),[[T,c(t).castigo]])]),U.value!=""?(p(),_("div",wo,v(U.value),1)):I("",!0)]),e("div",ko,[Ro,e("div",Do,[j(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+a.op,"onUpdate:modelValue":d[2]||(d[2]=C=>c(t).horaInicio=C),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Eo),[[T,c(t).horaInicio]])]),x.value!=""?(p(),_("div",Oo,v(x.value),1)):I("",!0)]),e("div",jo,[Fo,e("div",Io,[j(e("input",{type:"time",name:"horaFin",id:"horaFin"+a.op,"onUpdate:modelValue":d[3]||(d[3]=C=>c(t).horaFin=C),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ho),[[T,c(t).horaFin]])]),y.value!=""?(p(),_("div",Mo,v(y.value),1)):I("",!0)]),e("div",To,[Lo,e("div",No,[j(e("input",{type:"text",name:"observaciones",id:"observaciones"+a.op,"onUpdate:modelValue":d[4]||(d[4]=C=>c(t).observaciones=C),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Bo),[[T,c(t).observaciones]])])])])]),e("div",Ao,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:w},[Vo,g(" Cancelar")],8,Wo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[Go,g("Guardar")],8,zo)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Po={class:"mt-2 bg-white p-4 shadow rounded-lg"},Jo={class:"border-b border-gray-900/10 pb-12"},Xo={class:"text-base font-semibold leading-7 text-gray-900"},Ko=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),Qo={class:"flex flex-wrap -mx-4"},Yo={class:"sm:col-span-2 px-4"},Zo=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),ea={class:"mt-2"},ta=["id"],oa=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),aa=["value"],ia={key:0,class:"text-red-500 text-xs mt-1"},da={class:"sm:col-span-2 px-4"},sa=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1),ra={class:"mt-2"},na=["id"],la=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1),ca=["value"],ua={key:0,class:"text-red-500 text-xs mt-1"},ma={class:"sm:col-span-2 px-4"},ga=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),pa={class:"mt-2"},ba=["id"],ha={key:0,class:"text-red-500 text-xs"},fa={class:"sm:col-span-2 px-4"},xa=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1),ya={class:"mt-2"},va=["id"],_a={class:"mt-6 flex items-center justify-end gap-x-6"},Ua=["id"],Ca=e("i",{class:"fa-solid fa-ban"},null,-1),$a=["disabled"],Sa=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),wa={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:i}){const l=a,H=i,t=G({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,tipoUltimaCorrida:l.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:l.ultimaCorrida.horaInicioUC,horaFinUC:l.ultimaCorrida.horaFinUC});K(()=>l.ultimaCorrida,async n=>{t.idUltimaCorrida=n.idUltimaCorrida,t.tipoUltimaCorrida=n.tipoUltimaCorrida,t.horaInicioUC=n.horaInicioUC,t.horaFinUC=n.horaFinUC},{deep:!0});const O=n=>n!=null,E=n=>n!=null,h=R(""),x=R(""),U=R(""),y=async()=>{H("close"),t.reset()},w=async()=>{x.value=O(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",h.value=O(t.unidad)?"":"Seleccione una unidad",U.value=E(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(x.value||h.value||U.value)&&t.post(Z("servicio.registrarUC"),{onSuccess:()=>{y(),x.value="",h.value="",U.value=""}})};return(n,r)=>(p(),q(Y,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:y},{default:B(()=>[e("div",Po,[e("form",{onSubmit:r[4]||(r[4]=Q(d=>a.op==="1"?w():n.update(),["prevent"]))},[e("div",Jo,[e("h2",Xo,v(a.title),1),Ko,e("div",Qo,[e("div",Yo,[Zo,e("div",ea,[j(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":r[0]||(r[0]=d=>c(t).unidad=d),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[oa,(p(!0),_(A,null,W(a.unidad,d=>(p(),_("option",{key:d.idUnidad,value:d.idUnidad},v(d.numeroUnidad),9,aa))),128))],8,ta),[[V,c(t).unidad]])]),h.value!=""?(p(),_("div",ia,v(h.value),1)):I("",!0)]),e("div",da,[sa,e("div",ra,[j(e("select",{name:"tipoCorrida",id:"tipoCorrida"+a.op,"onUpdate:modelValue":r[1]||(r[1]=d=>c(t).tipoUltimaCorrida=d),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[la,(p(!0),_(A,null,W(a.tipoUltimaCorrida,d=>(p(),_("option",{key:d.idTipoUltimaCorrida,value:d.idTipoUltimaCorrida},v(d.tipoUltimaCorrida),9,ca))),128))],8,na),[[V,c(t).tipoUltimaCorrida]])]),U.value!=""?(p(),_("div",ua,v(U.value),1)):I("",!0)]),e("div",ma,[ga,e("div",pa,[j(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+a.op,"onUpdate:modelValue":r[2]||(r[2]=d=>c(t).horaInicioUC=d),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ba),[[T,c(t).horaInicioUC]])]),x.value!=""?(p(),_("div",ha,v(x.value),1)):I("",!0)]),e("div",fa,[xa,e("div",ya,[j(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+a.op,"onUpdate:modelValue":r[3]||(r[3]=d=>c(t).horaFinUC=d),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,va),[[T,c(t).horaFinUC]])])])])]),e("div",_a,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:y},[Ca,g(" Cancelar")],8,Ua),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[Sa,g("Guardar")],8,$a)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ka={class:"mt-2 bg-white p-4 shadow rounded-lg"},Ra={class:"border-b border-gray-900/10 pb-12"},Da={class:"text-base font-semibold leading-7 text-gray-900"},Ea=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[g("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),g(" son obligatorios. ")],-1),Oa={class:"flex flex-wrap -mx-4"},ja={class:"sm:col-span-2 px-4"},Fa=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Unidad "),e("span",{class:"text-red-500"},"*")],-1),Ia={class:"mt-2"},Ha=["id"],Ma=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Ta=["value"],La={key:0,class:"text-red-500 text-xs mt-1"},Na={class:"sm:col-span-2 px-4"},Ba=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[g("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Aa={class:"mt-2"},Wa=["id"],Va={key:0,class:"text-red-500 text-xs mt-1"},za={class:"mt-6 flex items-center justify-end gap-x-6"},Ga=["id"],qa=e("i",{class:"fa-solid fa-ban"},null,-1),Pa=["disabled"],Ja=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Xa={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:i}){const l=a,H=i,t=G({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,horaFinUC:l.ultimaCorrida.horaFinUC});K(()=>l.ultimaCorrida,async y=>{t.idUltimaCorrida=y.idUltimaCorrida,t.horaFinUC=y.horaFinUC},{deep:!0});const O=y=>y!=null,E=R(""),h=R(""),x=async()=>{H("close"),t.reset()},U=async()=>{h.value=O(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",E.value=O(t.unidad)?"":"Seleccione una unidad",!(h.value||E.value)&&t.post(Z("servicio.regresoUC"),{onSuccess:()=>{x(),h.value="",E.value=""}})};return(y,w)=>(p(),q(Y,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:x},{default:B(()=>[e("div",ka,[e("form",{onSubmit:w[2]||(w[2]=Q(n=>a.op==="1"?U():y.update(),["prevent"]))},[e("div",Ra,[e("h2",Da,v(a.title),1),Ea,e("div",Oa,[e("div",ja,[Fa,e("div",Ia,[j(e("select",{name:"unidad",id:"unidad"+a.op,"onUpdate:modelValue":w[0]||(w[0]=n=>c(t).unidad=n),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Ma,(p(!0),_(A,null,W(a.unidad,n=>(p(),_("option",{key:n.idUnidad,value:n.idUnidad},v(n.numeroUnidad),9,Ta))),128))],8,Ha),[[V,c(t).unidad]])]),E.value!=""?(p(),_("div",La,v(E.value),1)):I("",!0)]),e("div",Na,[Ba,e("div",Aa,[j(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+a.op,"onUpdate:modelValue":w[1]||(w[1]=n=>c(t).horaFinUC=n),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Wa),[[T,c(t).horaFinUC]])]),E.value!=""?(p(),_("div",Va,v(E.value),1)):I("",!0)])])]),e("div",za,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:x},[qa,g(" Cancelar")],8,Ga),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[Ja,g("Guardar")],8,Pa)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Ka={class:"mt-2 bg-white p-4 shadow rounded-lg"},Qa={class:"text-base font-semibold leading-7 text-gray-900"},Ya={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},Za={class:"sm:col-span-2 px-4"},ei=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),ti={class:"mt-2"},oi=e("option",{disabled:""},"Seleccione una o más unidades",-1),ai=["value"],ii={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},di={class:"sm:col-span-2 px-4"},si=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),ri={class:"mt-2"},ni=e("option",{disabled:""},"Seleccione una o más unidades",-1),li=["value"],ci={key:0,class:"text-red-500 text-xs mt-1 mb-4"},ui={class:"mt-6 flex items-center justify-end gap-x-6"},mi=["id"],gi=e("i",{class:"fa-solid fa-ban"},null,-1),pi=["disabled"],bi=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),hi={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(a,{emit:i}){const l=a,H=i,t=G({idRolServicio:l.rolServicio.idRolServicio,unidad:[],trabajaDomingo:l.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});K(()=>l.rolServicio,async r=>{t.idRolServicio=r.idRolServicio,t.trabajaDomingo=r.trabajaDomingo},{deep:!0});const O=async()=>{H("close"),t.reset()},E=(r,d)=>r.length>0||d.length>0,h=R(""),x=async()=>{h.value=E(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!h.value&&t.post(Z("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{O(),h.value=""}})},U=()=>{const r=new Date,d=r.getDay(),C=d===0?7:d,P=new Date(r);return P.setDate(r.getDate()-C),P.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},y=()=>{const r=new Date,C=7-r.getDay(),P=new Date(r);return P.setDate(r.getDate()+C),P.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},w=U(),n=y();return(r,d)=>(p(),q(Y,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:O},{default:B(()=>[e("div",Ka,[e("form",{onSubmit:d[2]||(d[2]=Q(C=>a.op==="1"?x():r.update(),["prevent"]))},[e("h2",Qa,v(a.title),1),e("p",Ya,[g("Seleccione las unidades que trabajaron el : "),e("strong",null,v(c(w)),1),g(". ")]),e("div",Za,[ei,e("div",ti,[j(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":d[0]||(d[0]=C=>c(t).unidadesSi=C),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[oi,(p(!0),_(A,null,W(a.unidad,C=>(p(),_("option",{key:C.idUnidad,value:C.idUnidad},v(C.numeroUnidad),9,ai))),128))],512),[[V,c(t).unidadesSi]])])]),e("p",ii,[g("Seleccione las unidades que trabajarán el próximo: "),e("strong",null,v(c(n)),1),g(". ")]),e("div",di,[si,e("div",ri,[j(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":d[1]||(d[1]=C=>c(t).unidadesNo=C),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ni,(p(!0),_(A,null,W(a.unidad,C=>(p(),_("option",{key:C.idUnidad,value:C.idUnidad},v(C.numeroUnidad),9,li))),128))],512),[[V,c(t).unidadesNo]])])]),h.value?(p(),_("div",ci,v(h.value),1)):I("",!0),e("div",ui,[e("button",{type:"button",id:"cerrar"+a.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:O},[gi,g(" Cancelar")],8,mi),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[bi,g("Guardar")],8,pi)])],32)])]),_:1},8,["show","max-width","closeable"]))}},fi={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},xi=e("h2",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1),yi=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1),vi={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},_i=e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),Ui=e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),Ci=e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),$i=e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),Si=e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),wi={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},ki=e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),Ri=e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),Di={class:"overflow-x-auto"},Ei={class:"text-sm leading-normal border-b border-gray-300"},Oi=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),ji={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},Fi=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Ii=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Hi=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1),Mi=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1),Ti=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1),Li=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1),Ni=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Bi=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Trab. DOMINGO "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Extremo "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo de Corrida "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. finaliza "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1),J="xl",X=!0,Ki={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(a){de.use(me),de.use(me);const i=a,l=new Date().toLocaleDateString(),H=t(new Date().getDay());function t(b){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][b]}Ce(()=>i.entrada.filter(b=>new Date(b.fechaRegistro).toLocaleDateString()===l));const O=()=>{$e(()=>{const f=$("#formacionTablaId").DataTable().rows({search:"applied",page:"current"}).data();if(!f.length){console.warn("No hay datos para exportar.");return}const S=new Date().toISOString().split("T")[0],F=Object.fromEntries(i.ruta.map(m=>[m.idRuta,m.nombreRuta])),u=Object.fromEntries(i.rolServicio.map(m=>[m.idRolServicio,m.trabajaDomingo])),o=Object.fromEntries(i.unidad.map(m=>[m.idUnidad,m.numeroUnidad])),s=Object.fromEntries(i.directivo.map(m=>[m.idDirectivo,m.nombre_completo])),D=Object.fromEntries(i.entrada.map(m=>[m.idUnidad,{horaEntrada:m.horaEntrada,tipoEntrada:m.tipoEntrada,extremo:m.extremo,created_at:m.created_at}]));Object.fromEntries(i.corte.map(m=>[m.idUnidad,[]]));const L=Object.fromEntries(i.ultimaCorrida.map(m=>[m.idUnidad,{tipoCorrida:m.idTipoUltimaCorrida,horaInicioUC:m.horaInicioUC,horaFinUC:m.horaFinUC,created_at:m.created_at}]));Object.fromEntries(i.castigo.map(m=>[m.idUnidad,[]]));const te=Object.fromEntries(i.operador.map(m=>[m.idOperador,m.nombre_completo])),z=m=>{if(!m)return"";const[k,ee]=m.split(":");return`${k}:${ee}`},xe=f.toArray().reduce((m,k)=>{var le,ce;const ee=D[k.idUnidad]||{},Ue=i.corte.filter(M=>M.idUnidad===k.idUnidad&&M.created_at.split("T")[0]===S),oe=L[k.idUnidad]||{},ne=i.castigo.filter(M=>M.idUnidad===k.idUnidad&&M.created_at.split("T")[0]===S),ae=((le=ee.created_at)==null?void 0:le.split("T")[0])===S,ie=((ce=oe.created_at)==null?void 0:ce.split("T")[0])===S;return ne.length>0,m[k.idUnidad]||(m[k.idUnidad]={ID:k.idUnidad,Ruta:F[k.idRuta]||"N/A","Trab. Domingo":u[k.idRolServicio]||"Sin Asignar",Unidad:o[k.idUnidad]||"","Socio/Prestador":s[k.idDirectivo]||"","Hr. Entrada":ae&&z(ee.horaEntrada)||"","Tipo Entrada":ae&&ee.tipoEntrada||"",Extremo:ae&&ee.extremo||"","Hr. Corte":"",Causa:"","Hr. Regreso":"","Tipo De Corrida":ie&&oe.tipoCorrida||"","Hr. Inicio UC":ie&&z(oe.horaInicioUC)||"","Hr. Regreso UC":ie&&z(oe.horaFinUC)||"","Hr. Inicio":"","Hr. Finaliza":"",Motivo:"","Otras Observaciones":"",Operador:te[k.idOperador]||"Sin Asignar"}),Ue.forEach(M=>{m[k.idUnidad]["Hr. Corte"]+=(m[k.idUnidad]["Hr. Corte"]?", ":"")+z(M.horaCorte),m[k.idUnidad].Causa+=(m[k.idUnidad].Causa?", ":"")+M.causa,m[k.idUnidad]["Hr. Regreso"]+=(m[k.idUnidad]["Hr. Regreso"]?", ":"")+z(M.horaRegreso)}),ne.forEach(M=>{m[k.idUnidad]["Hr. Inicio"]+=(m[k.idUnidad]["Hr. Inicio"]?", ":"")+z(M.horaInicio),m[k.idUnidad]["Hr. Finaliza"]+=(m[k.idUnidad]["Hr. Finaliza"]?", ":"")+z(M.horaFin),m[k.idUnidad].Motivo+=(m[k.idUnidad].Motivo?", ":"")+M.castigo,m[k.idUnidad]["Otras Observaciones"]+=(m[k.idUnidad]["Otras Observaciones"]?", ":"")+M.observaciones}),m},{}),ye=Object.values(xe),ve=se.json_to_sheet(ye),re=se.book_new();se.book_append_sheet(re,ve,"Formación De Unidades");const _e=new Date().toISOString().split("T")[0];we(re,`Formación_De_Unidades_${_e}.xlsx`)})},E=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>O()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],h=[{data:null,render:function(b,f,S,F){return F.row+1}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.ruta.find(s=>s.idRuta===u.idRuta);return o?o.nombreRuta:""}else return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.rolServicio.filter(s=>s.idUnidad===u.idUnidad);return o.length>0?(o.sort((s,D)=>new Date(D.created_at)-new Date(s.created_at)),o[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);return u?u.numeroUnidad:""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.directivo.find(s=>s.idDirectivo===u.idDirectivo);return o?o.nombre_completo:""}else return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.entrada.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(D=>D.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.entrada.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(D=>D.tipoEntrada).join(", ")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.entrada.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(D=>D.extremo).join(", ")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.corte.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((D,L)=>`
            <div style="${o.length>1&&L!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${D.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.corte.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((D,L)=>`
            <div style="${o.length>1&&L!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${D.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.corte.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((D,L)=>{const te=D.horaRegreso?D.horaRegreso.substring(0,5):"";return`
            <div style="${o.length>1&&L!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${te}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.ultimaCorrida.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0){const s=i.tipoUltimaCorrida.find(D=>D.idTipoUltimaCorrida===o[0].idTipoUltimaCorrida);if(s)return s.tipoUltimaCorrida}}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.ultimaCorrida.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0){const s=o[0].horaInicioUC;return s?s.substring(0,5):""}}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.ultimaCorrida.filter(s=>s.idUnidad===u.idUnidad&&new Date(s.created_at).toLocaleDateString()===l);if(o.length>0){const s=o[0].horaFinUC;if(s)return s.substring(0,5)}}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>({horaInicio:s.horaInicio?s.horaInicio.substring(0,5):""}));return o.map((s,D)=>`
          <div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${s.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>({horaFin:s.horaFin?s.horaFin.substring(0,5):""}));return o.map((s,D)=>`
          <div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${s.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>s.castigo||"");return o.map((s,D)=>`<div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${s}</div>`).join("")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.castigo.filter(o=>o.idUnidad===b&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(s=>s.observaciones||"");return o.map((s,D)=>`<div style="${o.length>1&&D!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${s}</div>`).join("")}return""}},{data:"idUnidad",render:function(b,f,S,F){const u=i.unidad.find(o=>o.idUnidad===b);if(u){const o=i.operador.find(s=>s.idOperador===u.idOperador);return o?o.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],x=R(!1),U=R(!1),y=R(!1),w=R(!1),n=R(!1),r=R(!1),d=R(!1);R(!1),G({});const C=()=>{x.value=!1},P=()=>{U.value=!1},ge=()=>{y.value=!1},pe=()=>{w.value=!1},be=()=>{n.value=!1},he=()=>{r.value=!1},fe=()=>{d.value=!1};return(b,f)=>(p(),q(ke,{title:"Formar Unidades",usuario:i.usuario},{default:B(()=>[e("div",fi,[xi,yi,N(Se),e("div",vi,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:f[0]||(f[0]=S=>x.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[_i,g(" Registrar Entrada ")]),e("button",{class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:f[1]||(f[1]=S=>U.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Ui,g(" Registrar Corte ")]),e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:f[2]||(f[2]=S=>w.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Ci,g(" Registrar Regreso ")]),e("button",{class:"bg-yellow-500 hover:bg-yellow-500 text-white font-semibold py-2 px-4 rounded",onClick:f[3]||(f[3]=S=>y.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[$i,g(" Registrar castigo ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:f[4]||(f[4]=S=>n.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Si,g(" Registrar UC ")])]),e("div",wi,[e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:f[5]||(f[5]=S=>r.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[ki,g(" Regreso UC ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:f[6]||(f[6]=S=>d.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Ri,g(" Rol domingo ")])]),e("div",Di,[N(c(de),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:h,data:a.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[E],paging:!1,lengthMenu:[]}},{default:B(()=>[e("thead",null,[e("tr",Ei,[Oi,e("th",ji,"FECHA: "+v(c(H)+", "+c(l)),1),Fi,Ii,Hi,Mi,Ti,Li,Ni]),Bi])]),_:1},8,["data","options"])])]),N(rt,{show:x.value,"max-width":J,closeable:X,onClose:C,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:i.entrada,unidad:i.unidad,unidadesConOperador:i.unidadesConOperador},null,8,["show","entrada","unidad","unidadesConOperador"]),N(Nt,{show:U.value,"max-width":J,closeable:X,onClose:P,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:i.corte,unidad:i.unidad,unidadesConOperador:i.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),N(lo,{show:w.value,"max-width":J,closeable:X,onClose:pe,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:i.unidad},null,8,["show","unidad"]),N(qo,{show:y.value,"max-width":J,closeable:X,onClose:ge,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:i.unidad,castigo:i.castigo},null,8,["show","unidad","castigo"]),N(wa,{show:n.value,"max-width":J,closeable:X,onClose:be,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:i.ultimaCorrida,tipoUltimaCorrida:i.tipoUltimaCorrida,unidad:i.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),N(Xa,{show:r.value,"max-width":J,closeable:X,onClose:he,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:i.ultimaCorrida,unidad:i.unidad},null,8,["show","ultimaCorrida","unidad"]),N(hi,{show:d.value,"max-width":J,closeable:X,onClose:fe,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:i.rolServicio,unidad:i.unidad},null,8,["show","rolServicio","unidad"])]),_:1},8,["usuario"]))}};export{Ki as default};
