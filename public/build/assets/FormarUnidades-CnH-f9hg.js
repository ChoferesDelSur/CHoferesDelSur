import{u as J,q as Me,i as z,r as k,o as h,j as K,e as q,a as e,g as Q,t as w,w as N,d as n,k as L,b as B,L as Z,c as E,l as _,y as ne,f,z as G,n as ue,F as oe,m as ae,p as le,G as Ne,C as pe,D as Ce,M as Ue,x as Be}from"./app-rRhl06t3.js";import"./buttons.print-CddyeSNB.js";import{_ as Le}from"./Mensaje-fgKVnvPz.js";import"./jspdf.plugin.autotable-DFsutX7P.js";import{S as se}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{u as be,w as Ae}from"./xlsx-DjuO7_Ju.js";import{_ as ze}from"./ServicioLayout-Bvu-t_GT.js";import{_ as ee}from"./Modal-Do11BPmC.js";/* empty css                   *//* empty css                                                */const Ve={class:"mt-2 bg-white p-4 shadow rounded-lg"},We={class:"border-b border-gray-900/10 pb-12"},Ge={class:"text-base font-semibold leading-7 text-gray-900"},Pe={class:"flex flex-wrap -mx-4"},qe={class:"md:col-span-2"},Je={class:"sm:col-span-2",hidden:""},Ke={class:"mt-1"},Xe=["id"],Ye={class:"sm:col-span-2 w-56 px-4"},Ze={class:"mt-2"},Qe={key:0,class:"text-red-500 text-xs mt-1"},et={class:"sm:col-span-2 px-4"},tt={class:"mt-2"},ot=["id"],at={key:0,class:"text-red-500 text-xs"},rt={class:"sm:col-span-2 px-4"},it={class:"mt-2"},dt={key:0,class:"text-red-500 text-xs"},st={class:"sm:col-span-2 px-4"},nt={class:"mt-2"},lt={class:"block w-72 rounded-md border border-gray-300 px-1.5 py-1.5 text-gray-900 bg-gray-100 shadow-sm sm:text-sm sm:leading-6"},ut={class:"mt-6 flex items-center justify-end gap-x-6"},ct=["id"],mt=["disabled"],gt={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},ruta:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idEntrada:u.entrada.idEntrada,unidad:u.entrada.idUnidad,horaEntrada:u.entrada.horaEntrada,extremo:u.entrada.extremo}),j=Me(()=>{const s=u.unidadesConOperador.find(o=>o.idUnidad===t.unidad);return s&&s.ruta?s.ruta.nombreRuta:"Nombre de ruta"});z(()=>u.entrada,async s=>{t.idEntrada=s.idEntrada,t.unidad=s.unidad,t.horaEntrada=s.horaEntrada,t.extremo=s.extremo},{deep:!0});const S=s=>s!=null,y=s=>s!=null,C=k(""),R=k(""),U=k(""),c=async()=>{F("close"),t.reset()},p=async()=>{R.value=S(t.horaEntrada)?"":"Seleccione la hora de entrada",C.value=S(t.unidad)?"":"Seleccione una unidad",U.value=y(t.extremo)?"":"Seleccione una opción",!(R.value||C.value||U.value)&&t.post(G("servicio.registarHoraEntrada"),{onSuccess:()=>{c(),R.value="",C.value="",U.value=""}})};return(s,o)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:c},{default:q(()=>[e("div",Ve,[e("form",{onSubmit:o[5]||(o[5]=Q(g=>i.op==="1"?p():s.update(),["prevent"]))},[e("div",We,[e("h2",Ge,w(i.title),1),o[13]||(o[13]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1)),e("div",Pe,[e("div",qe,[e("div",Je,[o[6]||(o[6]=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1)),e("div",Ke,[N(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":o[0]||(o[0]=g=>n(t).idEntrada=g),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+i.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Xe),[[L,n(t).idEntrada]])])])]),e("div",Ye,[o[7]||(o[7]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",Ze,[B(n(Z),{modelValue:n(t).unidad,"onUpdate:modelValue":o[1]||(o[1]=g=>n(t).unidad=g),options:i.unidadesConOperador.map(g=>({label:g.numeroUnidad,value:g.idUnidad})),placeholder:"Seleccione la unidad",reduce:g=>g.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),C.value!=""?(h(),E("div",Qe,w(C.value),1)):_("",!0)]),e("div",et,[o[8]||(o[8]=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1)),e("div",tt,[N(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+i.op,"onUpdate:modelValue":o[2]||(o[2]=g=>n(t).horaEntrada=g),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ot),[[L,n(t).horaEntrada]])]),R.value!=""?(h(),E("div",at,w(R.value),1)):_("",!0)]),e("div",rt,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1)),e("div",it,[N(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":o[3]||(o[3]=g=>n(t).extremo=g)},null,512),[[ne,n(t).extremo]]),o[9]||(o[9]=e("label",{for:"si",class:"radio-label"}," Sí",-1)),N(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":o[4]||(o[4]=g=>n(t).extremo=g)},null,512),[[ne,n(t).extremo]]),o[10]||(o[10]=e("label",{for:"no",class:"radio-label"}," No",-1))]),U.value!=""?(h(),E("div",dt,w(U.value),1)):_("",!0)]),e("div",st,[o[12]||(o[12]=e("label",{for:"ruta",class:"block text-sm font-medium leading-6 text-gray-900"},"Ruta",-1)),e("div",nt,[e("span",lt,w(j.value),1)])])])]),e("div",ut,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:c},o[14]||(o[14]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,ct),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},o[15]||(o[15]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,mt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},pt={class:"mt-2 bg-white p-4 shadow rounded-lg"},bt={class:"border-b border-gray-900/10 pb-12"},ft={class:"text-base font-semibold leading-7 text-gray-900"},xt={class:"flex flex-wrap -mx-4"},yt={class:"sm:col-span-2 w-56 px-4"},ht={class:"mt-2"},vt={key:0,class:"text-red-500 text-xs mt-1"},Ct={class:"sm:col-span-2 px-4"},Ut={class:"mt-2"},wt=["id"],St={key:0,class:"text-red-500 text-xs"},$t={class:"sm:col-span-2 px-4"},Rt={class:"mt-2"},Et=["id"],kt={key:0,class:"text-red-500 text-xs mt-1"},Ot={class:"sm:col-span-2 px-4"},Dt={class:"mt-2"},Ft=["id"],jt={class:"mt-6 flex items-center justify-end gap-x-6"},It=["id"],Ht=["disabled"],Tt={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idCorte:u.corte.idCorte,unidad:u.corte.idUnidad,horaCorte:u.corte.horaCorte,causa:u.corte.corte,horaRegreso:u.corte.horaRegreso});z(()=>u.corte,async p=>{t.idCorte=p.idCorte,t.unidad=p.unidad,t.horaCorte=p.horaCorte,t.causa=p.causa,t.horaRegreso=p.horaRegreso},{deep:!0});const j=p=>p!=null,S=p=>typeof p=="string"&&p.trim()!=="",y=k(""),C=k(""),R=k("");k("");const U=async()=>{F("close"),t.reset()},c=async()=>{C.value=j(t.horaCorte)?"":"Seleccione la hora de corte",y.value=j(t.unidad)?"":"Seleccione una unidad",R.value=S(t.causa)?"":"Ingrese la causa del corte",!(C.value||y.value||R.value)&&t.post(G("servicio.registarCorte"),{onSuccess:()=>{U(),C.value="",y.value="",R.value=""}})};return(p,s)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:U},{default:q(()=>[e("div",pt,[e("form",{onSubmit:s[4]||(s[4]=Q(o=>i.op==="1"?c():p.update(),["prevent"]))},[e("div",bt,[e("h2",ft,w(i.title),1),s[9]||(s[9]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",xt,[e("div",yt,[s[5]||(s[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ht,[B(n(Z),{modelValue:n(t).unidad,"onUpdate:modelValue":s[0]||(s[0]=o=>n(t).unidad=o),options:i.unidadesConOperador.map(o=>({label:o.numeroUnidad,value:o.idUnidad})),placeholder:"Seleccione la unidad",reduce:o=>o.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),y.value!=""?(h(),E("div",vt,w(y.value),1)):_("",!0)]),e("div",Ct,[s[6]||(s[6]=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ut,[N(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+i.op,"onUpdate:modelValue":s[1]||(s[1]=o=>n(t).horaCorte=o),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,wt),[[L,n(t).horaCorte]])]),C.value!=""?(h(),E("div",St,w(C.value),1)):_("",!0)]),e("div",$t,[s[7]||(s[7]=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Causa "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Rt,[N(e("input",{type:"text",name:"causa",id:"causa"+i.op,"onUpdate:modelValue":s[2]||(s[2]=o=>n(t).causa=o),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Et),[[L,n(t).causa]])]),R.value!=""?(h(),E("div",kt,w(R.value),1)):_("",!0)]),e("div",Ot,[s[8]||(s[8]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1)),e("div",Dt,[N(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+i.op,"onUpdate:modelValue":s[3]||(s[3]=o=>n(t).horaRegreso=o),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ft),[[L,n(t).horaRegreso]])])])])]),e("div",jt,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:U},s[10]||(s[10]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,It),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},s[11]||(s[11]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Ht)])],32)])]),_:1},8,["show","max-width","closeable"]))}},_t={class:"mt-2 bg-white p-4 shadow rounded-lg"},Mt={class:"border-b border-gray-900/10 pb-12"},Nt={class:"text-base font-semibold leading-7 text-gray-900"},Bt={class:"flex flex-wrap -mx-4"},Lt={class:"sm:col-span-2 w-56 px-4"},At={class:"mt-2"},zt={key:0,class:"text-red-500 text-xs mt-1"},Vt={class:"sm:col-span-2 px-4"},Wt={class:"mt-2"},Gt=["id"],Pt={key:0,class:"text-red-500 text-xs mt-1"},qt={class:"mt-6 flex items-center justify-end gap-x-6"},Jt=["id"],Kt=["disabled"],Xt={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idCorte:u.corte.idCorte,unidad:u.corte.idUnidad,horaRegreso:u.corte.horaRegreso});z(()=>u.corte,async U=>{t.idCorte=U.idCorte,t.unidad=U.unidad,t.horaRegreso=u.corte.horaRegreso},{deep:!0});const j=U=>U!=null,S=k(""),y=k(""),C=async()=>{F("close"),t.reset()},R=async()=>{y.value=j(t.horaRegreso)?"":"Seleccione la hora de regreso",S.value=j(t.unidad)?"":"Seleccione una unidad",!(y.value||S.value)&&t.post(G("servicio.registrarHoraRegreso"),{onSuccess:()=>{C(),y.value="",S.value=""}})};return(U,c)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:C},{default:q(()=>[e("div",_t,[e("form",{onSubmit:c[2]||(c[2]=Q(p=>i.op==="1"?R():U.update(),["prevent"]))},[e("div",Mt,[e("h2",Nt,w(i.title),1),c[5]||(c[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1)),e("div",Bt,[e("div",Lt,[c[3]||(c[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",At,[B(n(Z),{modelValue:n(t).unidad,"onUpdate:modelValue":c[0]||(c[0]=p=>n(t).unidad=p),options:i.unidadesConOperador.map(p=>({label:p.numeroUnidad,value:p.idUnidad})),placeholder:"Seleccione la unidad",reduce:p=>p.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),S.value!=""?(h(),E("div",zt,w(S.value),1)):_("",!0)]),e("div",Vt,[c[4]||(c[4]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Wt,[N(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+i.op,"onUpdate:modelValue":c[1]||(c[1]=p=>n(t).horaRegreso=p),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Gt),[[L,n(t).horaRegreso]])]),y.value!=""?(h(),E("div",Pt,w(y.value),1)):_("",!0)])])]),e("div",qt,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},c[6]||(c[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Jt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},c[7]||(c[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Kt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Yt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Zt={class:"border-b border-gray-900/10 pb-12"},Qt={class:"text-base font-semibold leading-7 text-gray-900"},eo={class:"flex flex-wrap -mx-4"},to={class:"sm:col-span-2 w-56 px-4"},oo={class:"mt-2"},ao={key:0,class:"text-red-500 text-xs mt-1"},ro={class:"sm:col-span-2 px-4"},io={class:"mt-2"},so=["id"],no={key:0,class:"text-red-500 text-xs mt-1"},lo={class:"sm:col-span-2 px-4"},uo={class:"mt-2"},co=["id"],mo={key:0,class:"text-red-500 text-xs"},go={class:"sm:col-span-2 px-4"},po={class:"mt-2"},bo=["id"],fo={key:0,class:"text-red-500 text-xs"},xo={class:"sm:col-span-2 px-4"},yo={class:"mt-2"},ho=["id"],vo={class:"mt-6 flex items-center justify-end gap-x-6"},Co=["id"],Uo=["disabled"],wo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idCastigo:u.castigo.idCastigo,castigo:u.castigo.castigo,observaciones:u.castigo.observaciones,horaInicio:u.castigo.horaInicio,horaFin:u.castigo.horaFin,unidad:u.castigo.idUnidad});z(()=>u.castigo,async s=>{t.idCastigo=s.idCastigo,t.castigo=s.castigo,t.observaciones=s.observaciones,t.horaInicio=s.horaInicio,t.horaFin=u.horaFin,t.unidad=u.unidad},{deep:!0});const j=s=>s!=null,S=s=>typeof s=="string"&&s.trim()!=="",y=k(""),C=k(""),R=k(""),U=k(""),c=async()=>{F("close"),t.reset()},p=async()=>{C.value=j(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",y.value=j(t.unidad)?"":"Seleccione una unidad",R.value=S(t.castigo)?"":"Ingrese motivo del castigo",!(C.value||y.value||R.value)&&t.post(G("servicio.registrarCastigo"),{onSuccess:()=>{c(),C.value="",y.value="",R.value=""}})};return(s,o)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:c},{default:q(()=>[e("div",Yt,[e("form",{onSubmit:o[5]||(o[5]=Q(g=>i.op==="1"?p():s.update(),["prevent"]))},[e("div",Zt,[e("h2",Qt,w(i.title),1),o[11]||(o[11]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",eo,[e("div",to,[o[6]||(o[6]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",oo,[B(n(Z),{options:i.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":o[0]||(o[0]=g=>n(t).unidad=g),reduce:g=>g.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ue({"border-red-500":y.value})},null,8,["options","modelValue","reduce","class"])]),y.value!=""?(h(),E("div",ao,w(y.value),1)):_("",!0)]),e("div",ro,[o[7]||(o[7]=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Castigo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",io,[N(e("input",{type:"text",name:"castigo",id:"castigo"+i.op,"onUpdate:modelValue":o[1]||(o[1]=g=>n(t).castigo=g),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,so),[[L,n(t).castigo]])]),R.value!=""?(h(),E("div",no,w(R.value),1)):_("",!0)]),e("div",lo,[o[8]||(o[8]=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",uo,[N(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+i.op,"onUpdate:modelValue":o[2]||(o[2]=g=>n(t).horaInicio=g),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,co),[[L,n(t).horaInicio]])]),C.value!=""?(h(),E("div",mo,w(C.value),1)):_("",!0)]),e("div",go,[o[9]||(o[9]=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin ",-1)),e("div",po,[N(e("input",{type:"time",name:"horaFin",id:"horaFin"+i.op,"onUpdate:modelValue":o[3]||(o[3]=g=>n(t).horaFin=g),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,bo),[[L,n(t).horaFin]])]),U.value!=""?(h(),E("div",fo,w(U.value),1)):_("",!0)]),e("div",xo,[o[10]||(o[10]=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1)),e("div",yo,[N(e("input",{type:"text",name:"observaciones",id:"observaciones"+i.op,"onUpdate:modelValue":o[4]||(o[4]=g=>n(t).observaciones=g),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ho),[[L,n(t).observaciones]])])])])]),e("div",vo,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:c},o[12]||(o[12]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Co),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},o[13]||(o[13]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Uo)])],32)])]),_:1},8,["show","max-width","closeable"]))}},So={class:"mt-2 bg-white p-4 shadow rounded-lg"},$o={class:"border-b border-gray-900/10 pb-12"},Ro={class:"text-base font-semibold leading-7 text-gray-900"},Eo={class:"flex flex-wrap -mx-4"},ko={class:"sm:col-span-2 w-56 px-4"},Oo={class:"mt-2"},Do={key:0,class:"text-red-500 text-xs mt-1"},Fo={class:"sm:col-span-2 px-4"},jo={class:"mt-2"},Io=["id"],Ho=["value"],To={key:0,class:"text-red-500 text-xs mt-1"},_o={class:"sm:col-span-2 px-4"},Mo={class:"mt-2"},No=["id"],Bo={key:0,class:"text-red-500 text-xs"},Lo={class:"sm:col-span-2 px-4"},Ao={class:"mt-2"},zo=["id"],Vo={class:"mt-6 flex items-center justify-end gap-x-6"},Wo=["id"],Go=["disabled"],Po={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idUltimaCorrida:u.ultimaCorrida.idUltimaCorrida,unidad:u.ultimaCorrida.idUnidad,tipoUltimaCorrida:u.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:u.ultimaCorrida.horaInicioUC,horaFinUC:u.ultimaCorrida.horaFinUC});z(()=>u.ultimaCorrida,async p=>{t.idUltimaCorrida=p.idUltimaCorrida,t.tipoUltimaCorrida=p.tipoUltimaCorrida,t.horaInicioUC=p.horaInicioUC,t.horaFinUC=p.horaFinUC},{deep:!0});const j=p=>p!=null,S=p=>p!=null,y=k(""),C=k(""),R=k(""),U=async()=>{F("close"),t.reset()},c=async()=>{C.value=j(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",y.value=j(t.unidad)?"":"Seleccione una unidad",R.value=S(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(C.value||y.value||R.value)&&t.post(G("servicio.registrarUC"),{onSuccess:()=>{U(),C.value="",y.value="",R.value=""}})};return(p,s)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:U},{default:q(()=>[e("div",So,[e("form",{onSubmit:s[4]||(s[4]=Q(o=>i.op==="1"?c():p.update(),["prevent"]))},[e("div",$o,[e("h2",Ro,w(i.title),1),s[10]||(s[10]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",Eo,[e("div",ko,[s[5]||(s[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Oo,[B(n(Z),{options:i.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":s[0]||(s[0]=o=>n(t).unidad=o),reduce:o=>o.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ue({"border-red-500":y.value})},null,8,["options","modelValue","reduce","class"])]),y.value?(h(),E("div",Do,w(y.value),1)):_("",!0)]),e("div",Fo,[s[7]||(s[7]=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1)),e("div",jo,[N(e("select",{name:"tipoCorrida",id:"tipoCorrida"+i.op,"onUpdate:modelValue":s[1]||(s[1]=o=>n(t).tipoUltimaCorrida=o),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[s[6]||(s[6]=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1)),(h(!0),E(oe,null,ae(i.tipoUltimaCorrida,o=>(h(),E("option",{key:o.idTipoUltimaCorrida,value:o.idTipoUltimaCorrida},w(o.tipoUltimaCorrida),9,Ho))),128))],8,Io),[[le,n(t).tipoUltimaCorrida]])]),R.value!=""?(h(),E("div",To,w(R.value),1)):_("",!0)]),e("div",_o,[s[8]||(s[8]=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Mo,[N(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+i.op,"onUpdate:modelValue":s[2]||(s[2]=o=>n(t).horaInicioUC=o),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,No),[[L,n(t).horaInicioUC]])]),C.value!=""?(h(),E("div",Bo,w(C.value),1)):_("",!0)]),e("div",Lo,[s[9]||(s[9]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1)),e("div",Ao,[N(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+i.op,"onUpdate:modelValue":s[3]||(s[3]=o=>n(t).horaFinUC=o),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,zo),[[L,n(t).horaFinUC]])])])])]),e("div",Vo,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:U},s[11]||(s[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Wo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},s[12]||(s[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Go)])],32)])]),_:1},8,["show","max-width","closeable"]))}},qo={class:"mt-2 bg-white p-4 shadow rounded-lg"},Jo={class:"border-b border-gray-900/10 pb-12"},Ko={class:"text-base font-semibold leading-7 text-gray-900"},Xo={class:"flex flex-wrap -mx-4"},Yo={class:"sm:col-span-2 w-56 px-4"},Zo={class:"mt-2"},Qo={key:0,class:"text-red-500 text-xs mt-1"},ea={class:"sm:col-span-2 px-4"},ta={class:"mt-2"},oa=["id"],aa={key:0,class:"text-red-500 text-xs mt-1"},ra={class:"mt-6 flex items-center justify-end gap-x-6"},ia=["id"],da=["disabled"],sa={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idUltimaCorrida:u.ultimaCorrida.idUltimaCorrida,unidad:u.ultimaCorrida.idUnidad,horaFinUC:u.ultimaCorrida.horaFinUC});z(()=>u.ultimaCorrida,async U=>{t.idUltimaCorrida=U.idUltimaCorrida,t.horaFinUC=U.horaFinUC},{deep:!0});const j=U=>U!=null,S=k(""),y=k(""),C=async()=>{F("close"),t.reset()},R=async()=>{y.value=j(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",S.value=j(t.unidad)?"":"Seleccione una unidad",!(y.value||S.value)&&t.post(G("servicio.regresoUC"),{onSuccess:()=>{C(),y.value="",S.value=""}})};return(U,c)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:C},{default:q(()=>[e("div",qo,[e("form",{onSubmit:c[2]||(c[2]=Q(p=>i.op==="1"?R():U.update(),["prevent"]))},[e("div",Jo,[e("h2",Ko,w(i.title),1),c[5]||(c[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",Xo,[e("div",Yo,[c[3]||(c[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Zo,[B(n(Z),{options:i.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":c[0]||(c[0]=p=>n(t).unidad=p),label:"numeroUnidad",reduce:p=>p.idUnidad,class:ue({"border-red-500":S.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),S.value!==""?(h(),E("div",Qo,w(S.value),1)):_("",!0)]),e("div",ea,[c[4]||(c[4]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ta,[N(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+i.op,"onUpdate:modelValue":c[1]||(c[1]=p=>n(t).horaFinUC=p),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,oa),[[L,n(t).horaFinUC]])]),S.value!=""?(h(),E("div",aa,w(S.value),1)):_("",!0)])])]),e("div",ra,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},c[6]||(c[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,ia),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},c[7]||(c[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,da)])],32)])]),_:1},8,["show","max-width","closeable"]))}},na={class:"mt-2 bg-white p-4 shadow rounded-lg"},la={class:"text-base font-semibold leading-7 text-gray-900"},ua={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ca={class:"sm:col-span-2 px-4"},ma={class:"mt-2"},ga=["value"],pa={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ba={class:"sm:col-span-2 px-4"},fa={class:"mt-2"},xa=["value"],ya={key:0,class:"text-red-500 text-xs mt-1 mb-4"},ha={class:"mt-6 flex items-center justify-end gap-x-6"},va=["id"],Ca=["disabled"],Ua={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idRolServicio:u.rolServicio.idRolServicio,unidad:[],trabajaDomingo:u.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});z(()=>u.rolServicio,async o=>{t.idRolServicio=o.idRolServicio,t.trabajaDomingo=o.trabajaDomingo},{deep:!0});const j=async()=>{F("close"),t.reset()},S=(o,g)=>o.length>0||g.length>0,y=k(""),C=async()=>{y.value=S(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!y.value&&t.post(G("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{j(),y.value=""}})},R=()=>{const o=new Date,g=o.getDay(),l=g===0?7:g,D=new Date(o);return D.setDate(o.getDate()-l),D.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},U=()=>{const o=new Date,l=7-o.getDay(),D=new Date(o);return D.setDate(o.getDate()+l),D.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},c=R(),p=U();function s(o){return o.sort((g,l)=>{const D=parseInt(g.numeroUnidad.split("-")[1],10),H=parseInt(l.numeroUnidad.split("-")[1],10);return D-H})}return z(()=>u.unidad,o=>{t.unidad=s([...o])},{immediate:!0}),(o,g)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:j},{default:q(()=>[e("div",na,[e("form",{onSubmit:g[2]||(g[2]=Q(l=>i.op==="1"?C():o.update(),["prevent"]))},[e("h2",la,w(i.title),1),e("p",ua,[g[3]||(g[3]=f("Seleccione las unidades que trabajaron el : ")),e("strong",null,w(n(c)),1),g[4]||(g[4]=f(". "))]),e("div",ca,[g[6]||(g[6]=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ma,[N(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":g[0]||(g[0]=l=>n(t).unidadesSi=l),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[g[5]||(g[5]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(h(!0),E(oe,null,ae(n(t).unidad,l=>(h(),E("option",{key:l.idUnidad,value:l.idUnidad},w(l.numeroUnidad),9,ga))),128))],512),[[le,n(t).unidadesSi]])])]),e("p",pa,[g[7]||(g[7]=f("Seleccione las unidades que trabajarán el próximo: ")),e("strong",null,w(n(p)),1),g[8]||(g[8]=f(". "))]),e("div",ba,[g[10]||(g[10]=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",fa,[N(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":g[1]||(g[1]=l=>n(t).unidadesNo=l),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[g[9]||(g[9]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(h(!0),E(oe,null,ae(n(t).unidad,l=>(h(),E("option",{key:l.idUnidad,value:l.idUnidad},w(l.numeroUnidad),9,xa))),128))],512),[[le,n(t).unidadesNo]])])]),y.value?(h(),E("div",ya,w(y.value),1)):_("",!0),e("div",ha,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:j},g[11]||(g[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,va),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},g[12]||(g[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Ca)])],32)])]),_:1},8,["show","max-width","closeable"]))}},wa={class:"mt-2 bg-white p-4 shadow rounded-lg"},Sa={class:"border-b border-gray-900/10 pb-12"},$a={class:"text-base font-semibold leading-7 text-gray-900"},Ra={class:"flex flex-wrap -mx-4"},Ea={class:"sm:col-span-2 w-56 px-4"},ka={class:"mt-2"},Oa={key:0,class:"text-red-500 text-xs mt-1"},Da={class:"sm:col-span-2 px-4"},Fa={class:"mt-2"},ja=["id"],Ia={key:0,class:"text-red-500 text-xs"},Ha={class:"mt-6 flex items-center justify-end gap-x-6"},Ta=["id"],_a=["disabled"],Ma={__name:"FormularioFinCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({idCastigo:u.castigo.idCastigo,horaFin:u.castigo.horaFin,unidad:u.castigo.idUnidad});z(()=>u.castigo,async U=>{t.idCastigo=U.idCastigo,t.horaFin=u.horaFin,t.unidad=u.unidad},{deep:!0});const j=U=>U!=null,S=k(""),y=k(""),C=async()=>{F("close"),t.reset()},R=async()=>{S.value=j(t.unidad)?"":"Seleccione una unidad",y.value=j(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(S.value||y.value)&&t.post(G("servicio.registrarFinCastigo"),{onSuccess:()=>{C(),S.value="",y.value=""}})};return(U,c)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:C},{default:q(()=>[e("div",wa,[e("form",{onSubmit:c[2]||(c[2]=Q(p=>i.op==="1"?R():U.update(),["prevent"]))},[e("div",Sa,[e("h2",$a,w(i.title),1),c[5]||(c[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",Ra,[e("div",Ea,[c[3]||(c[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ka,[B(n(Z),{options:i.unidad,modelValue:n(t).unidad,"onUpdate:modelValue":c[0]||(c[0]=p=>n(t).unidad=p),reduce:p=>p.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ue({"border-red-500":S.value})},null,8,["options","modelValue","reduce","class"])]),S.value!=""?(h(),E("div",Oa,w(S.value),1)):_("",!0)]),e("div",Da,[c[4]||(c[4]=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin ",-1)),e("div",Fa,[N(e("input",{type:"time",name:"horaFin",id:"horaFin"+i.op,"onUpdate:modelValue":c[1]||(c[1]=p=>n(t).horaFin=p),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ja),[[L,n(t).horaFin]])]),y.value!=""?(h(),E("div",Ia,w(y.value),1)):_("",!0)])])]),e("div",Ha,[e("button",{type:"button",id:"cerrar"+i.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:C},c[6]||(c[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Ta),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},c[7]||(c[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,_a)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Na={class:"mt-2 bg-white p-4 shadow rounded-lg"},Ba={class:"border-b border-gray-900/10 pb-12"},La={class:"text-base font-bold leading-7 text-gray-900"},Aa={class:"flex flex-wrap -mx-4"},za={class:"sm:col-span-2 w-64 px-4"},Va={class:"mt-2"},Wa={class:"sm:col-span-2 w-72 px-4"},Ga={class:"mt-2"},Pa={key:0,class:"mt-4"},qa=["value"],Ja={class:"mt-4"},Ka={key:0},Xa=["for"],Ya={class:"mt-2"},Za=["onUpdate:modelValue"],Qa=["onUpdate:modelValue"],er={key:2},tr=["value","onUpdate:modelValue"],or=["onUpdate:modelValue"],ar=["value"],rr={class:"mt-6 flex items-center justify-end gap-x-6"},ir=["disabled"],dr={__name:"FormularioEditarRegistro",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},corte:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},ultimaCorrida:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(i,{emit:d}){const u=i,F=d,t=J({_method:"PUT",idEntrada:u.entrada.idEntrada,horaEntrada:u.entrada.horaEntrada,extremo:u.entrada.extremo,idCorte:u.corte.idCorte,horaCorte:u.corte.horaCorte,causa:u.corte.causa,horaRegreso:u.corte.horaRegreso,idCastigo:u.castigo.idCastigo,castigo:u.castigo.castigo,observaciones:u.castigo.observaciones,horaInicio:u.castigo.horaInicio,horaFin:u.castigo.horaFin,idUltimaCorrida:u.ultimaCorrida.idUltimaCorrida,horaInicioUC:u.ultimaCorrida.horaInicioUC,horaFinUC:u.ultimaCorrida.horaFinUC,tipoUltimaCorrida:u.ultimaCorrida.idTipoUltimaCorrida}),j=k(null),S=k(null),y=k([]);k({});const C=k([]),R=k(null),U=l=>{switch(l){case"entradas":return{horaEntrada:{label:"Hora de Entrada",type:"time"},extremo:{label:"Extremo",type:"radio",options:["SI","NO"]}};case"cortes":return{horaCorte:{label:"Hora de Corte",type:"time"},causa:{label:"Causa",type:"text"},horaRegreso:{label:"Hora de Regreso",type:"time"}};case"castigos":return{castigo:{label:"Motivo",type:"text"},observaciones:{label:"Observaciones",type:"text"},horaInicio:{label:"Hora de Inicio",type:"time"},horaFin:{label:"Hora de Fin",type:"time"}};case"ultima_corrida":return{horaInicioUC:{label:"Hora de Inicio de Última Corrida",type:"time"},horaFinUC:{label:"Hora de Fin de Última Corrida",type:"time"},tipoUltimaCorrida:{label:"Tipo de Última Corrida",type:"select",options:u.tipoUltimaCorrida.map(D=>({value:D.idTipoUltimaCorrida,label:D.tipoUltimaCorrida}))}}}};z(()=>R.value,l=>{l&&(c(l),console.log("Registro seleccionado:",R.value))});const c=l=>{t.idEntrada=l.idEntrada,t.horaEntrada=l.horaEntrada,t.extremo=l.extremo,t.idCorte=l.idCorte,t.horaCorte=l.horaCorte,t.causa=l.causa,t.horaRegreso=l.horaRegreso,t.idCastigo=l.idCastigo,t.castigo=l.castigo,t.observaciones=l.observaciones,t.horaInicio=l.horaInicio,t.horaFin=l.horaFin,t.idUltimaCorrida=l.idUltimaCorrida,t.horaInicioUC=l.horaInicioUC,t.horaFinUC=l.horaFinUC,t.tipoUltimaCorrida=l.idTipoUltimaCorrida};z(()=>u.entrada,async l=>{t.idEntrada=l.idEntrada,t.horaEntrada=l.horaEntrada,t.extremo=l.extremo},{deep:!0}),z(()=>u.corte,async l=>{t.idCorte=l.idCorte,t.horaCorte=l.horaCorte,t.causa=l.causa,t.horaRegreso=l.horaRegreso}),z(()=>u.castigo,async l=>{t.idCastigo=l.idCastigo,t.castigo=l.castigo,t.observaciones=l.observaciones,t.horaInicio=l.horaInicio,t.horaFin=l.horaFin}),z(()=>u.ultimaCorrida,async l=>{t.idUltimaCorrida=l.idUltimaCorrida,t.horaInicioUC=l.horaInicioUC,t.horaFinUC=l.horaFinUC,t.idTipoUltimaCorrida=l.idTipoUltimaCorrida}),z(()=>S,l=>{l&&(y.value=U(l))});const p=[{label:"Entrada",value:"entradas"},{label:"Corte",value:"cortes"},{label:"Castigo",value:"castigos"},{label:"Ultima Corrida",value:"ultima_corrida"}];k(""),k(""),k("");const s=async()=>{F("close"),t.reset()},o=async()=>{if(j.value&&S.value)try{const l=await Ne.get(G("servicio.obtenerRegistros",{tipoRegistro:S.value.value}),{params:{idUnidad:j.value.value}});C.value=l.data,C.value.length===1?(R.value=C.value[0],c(R.value)):R.value=null,y.value=U(S.value.value)}catch(l){console.error("Error fetching records:",l)}},g=async()=>{console.log("Estoy dentro de la funcion editarRegistro");let l;const D=S.value.value;switch(console.log("Tipo registo:",D),D){case"entradas":l=G("servicio.actualizarEntrada",{id:t.idEntrada});break;case"cortes":l=G("servicio.actualizarCorte",{id:t.idCorte});break;case"castigos":l=G("servicio.actualizarCastigo",{id:t.idCastigo});break;case"ultima_corrida":l=G("servicio.actualizarUltimaCorrida",{id:t.idUltimaCorrida});break;default:console.error("Tipo de registro no válido");return}try{t.post(l,{onSuccess:()=>{s()}})}catch(H){console.error("Error al actualizar el registro:",H)}};return(l,D)=>(h(),K(ee,{show:i.show,"max-width":i.maxWidth,closeable:i.closeable,onClose:s},{default:q(()=>[e("div",Na,[e("form",{onSubmit:Q(g,["prevent"])},[e("div",Ba,[e("h2",La,w(i.title),1),e("div",Aa,[e("div",za,[D[3]||(D[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",Va,[B(n(Z),{modelValue:j.value,"onUpdate:modelValue":D[0]||(D[0]=H=>j.value=H),options:i.unidadesConOperador.map(H=>({label:H.numeroUnidad,value:H.idUnidad})),placeholder:"Seleccione la unidad",onChange:o,class:"w-full"},null,8,["modelValue","options"])])]),e("div",Wa,[D[4]||(D[4]=e("label",{for:"tipoRegistro",class:"block text-sm font-medium leading-6 text-gray-900"},"Tipo de Registro",-1)),e("div",Ga,[B(n(Z),{modelValue:S.value,"onUpdate:modelValue":D[1]||(D[1]=H=>S.value=H),options:p,placeholder:"Seleccione un tipo de registro",onChange:o,class:"w-full"},null,8,["modelValue"])])])])]),C.value.length>1?(h(),E("div",Pa,[D[5]||(D[5]=e("label",{class:"block text-md font-bold leading-6 text-gray-900"},"Registros Disponibles",-1)),(h(!0),E(oe,null,ae(C.value,H=>(h(),E("div",{key:H.idEntrada,class:"flex items-center mb-2"},[N(e("input",{type:"radio",value:H,"onUpdate:modelValue":D[2]||(D[2]=V=>R.value=V),class:"mr-2"},null,8,qa),[[ne,R.value]]),e("span",null,w(H.horaCorte)+" - "+w(H.causa),1)]))),128))])):_("",!0),e("div",Ja,[y.value?(h(),E("div",Ka,[(h(!0),E(oe,null,ae(y.value,(H,V)=>(h(),E("div",{key:V,class:"mb-4"},[e("label",{for:V,class:"block text-sm font-medium leading-6 text-gray-900"},w(H.label),9,Xa),e("div",Ya,[H.type==="time"?N((h(),E("input",{key:0,type:"time","onUpdate:modelValue":A=>n(t)[V]=A,class:"border rounded p-1 w-full"},null,8,Za)),[[L,n(t)[V]]]):_("",!0),H.type==="text"?N((h(),E("input",{key:1,type:"text","onUpdate:modelValue":A=>n(t)[V]=A,class:"border rounded p-1 w-full"},null,8,Qa)),[[L,n(t)[V]]]):_("",!0),H.type==="radio"?(h(),E("div",er,[(h(!0),E(oe,null,ae(H.options,A=>(h(),E("div",{key:A,class:"flex items-center"},[N(e("input",{type:"radio",value:A,"onUpdate:modelValue":ce=>n(t)[V]=ce,class:"mr-2"},null,8,tr),[[ne,n(t)[V]]]),e("label",null,w(A),1)]))),128))])):_("",!0),H.type==="select"?N((h(),E("select",{key:3,"onUpdate:modelValue":A=>n(t)[V]=A,class:"border rounded p-1 w-full"},[(h(!0),E(oe,null,ae(H.options,A=>(h(),E("option",{key:A.value,value:A.value},w(A.label),9,ar))),128))],8,or)),[[le,n(t)[V]]]):_("",!0)])]))),128))])):_("",!0)]),e("div",rr,[e("button",{type:"button",class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded",onClick:s},D[6]||(D[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar ")])),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:n(t).processing},D[7]||(D[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar ")]),8,ir)])],32)])]),_:1},8,["show","max-width","closeable"]))}},sr={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},nr={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},lr={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},ur={class:"overflow-x-auto"},cr={class:"text-center"},mr={class:"text-sm leading-normal border-b border-gray-300"},gr={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},X="xl",Y=!0,Sr={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(i){pe.use(Ce),pe.use(Ce);const d=i;function u(v){const r=new Date(v),O=new Date(r.setDate(r.getDate()-r.getDay()+1)),M=new Date(r.getFullYear(),0,1),b=Math.floor((O-M)/(24*60*60*1e3));return Math.ceil((b+M.getDay()+1)/7)}const F=new Date().toLocaleDateString(),t=S(new Date().getDay()),j=u(new Date)+1;function S(v){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][v]}const y=()=>{Be(()=>{const r=$("#formacionTablaId").DataTable().rows({search:"applied",page:"current"}).data();if(!r.length){console.warn("No hay datos para exportar.");return}const O=new Date().toISOString().split("T")[0],M=Object.fromEntries(d.ruta.map(x=>[x.idRuta,x.nombreRuta])),b=Object.fromEntries(d.rolServicio.map(x=>[x.idUnidad,x.trabajaDomingo])),a=Object.fromEntries(d.unidad.map(x=>[x.idUnidad,x.numeroUnidad])),m=Object.fromEntries(d.directivo.map(x=>[x.idDirectivo,x.nombre_completo])),T=Object.fromEntries(d.entrada.map(x=>[x.idUnidad,{horaEntrada:x.horaEntrada,tipoEntrada:x.tipoEntrada,extremo:x.extremo,created_at:x.created_at}]));Object.fromEntries(d.corte.map(x=>[x.idUnidad,[]]));const P=Object.fromEntries(d.ultimaCorrida.map(x=>[x.idUnidad,{tipoCorrida:x.idTipoUltimaCorrida,horaInicioUC:x.horaInicioUC,horaFinUC:x.horaFinUC,created_at:x.created_at}]));Object.fromEntries(d.castigo.map(x=>[x.idUnidad,[]]));const ie=Object.fromEntries(d.operador.map(x=>[x.idOperador,x.nombre_completo])),fe=Object.fromEntries(d.tipoUltimaCorrida.map(x=>[x.idTipoUltimaCorrida,x.tipoUltimaCorrida])),te=x=>{if(!x)return"";const[I,re]=x.split(":");return`${I}:${re}`},je=r.toArray().reduce((x,I)=>{var he,ve;const re=T[I.idUnidad]||{},_e=d.corte.filter(W=>W.idUnidad===I.idUnidad&&W.created_at.split("T")[0]===O),de=P[I.idUnidad]||{},ye=d.castigo.filter(W=>W.idUnidad===I.idUnidad&&W.created_at.split("T")[0]===O);b[I.idUnidad];const me=((he=re.created_at)==null?void 0:he.split("T")[0])===O,ge=((ve=de.created_at)==null?void 0:ve.split("T")[0])===O;return ye.length>0,x[I.idUnidad]||(x[I.idUnidad]={ID:I.idUnidad,Ruta:M[I.idRuta]||"N/A","Trab. Domingo":b[I.idUnidad]||"Sin Asignar",Unidad:a[I.idUnidad]||"","Socio/Prestador":m[I.idDirectivo]||"","Hr. Entrada":me&&te(re.horaEntrada)||"","Tipo Entrada":me&&re.tipoEntrada||"",Extremo:me&&re.extremo||"","Hr. Corte":"",Causa:"","Hr. Regreso":"","Tipo De Corrida":ge&&fe[de.tipoCorrida]||"","Hr. Inicio UC":ge&&te(de.horaInicioUC)||"","Hr. Regreso UC":ge&&te(de.horaFinUC)||"","Hr. Inicio":"","Hr. Finaliza":"",Motivo:"","Otras Observaciones":"",Operador:ie[I.idOperador]||"Sin Asignar"}),_e.forEach(W=>{x[I.idUnidad]["Hr. Corte"]+=(x[I.idUnidad]["Hr. Corte"]?", ":"")+te(W.horaCorte),x[I.idUnidad].Causa+=(x[I.idUnidad].Causa?", ":"")+W.causa,x[I.idUnidad]["Hr. Regreso"]+=(x[I.idUnidad]["Hr. Regreso"]?", ":"")+te(W.horaRegreso)}),ye.forEach(W=>{x[I.idUnidad]["Hr. Inicio"]+=(x[I.idUnidad]["Hr. Inicio"]?", ":"")+te(W.horaInicio),x[I.idUnidad]["Hr. Finaliza"]+=(x[I.idUnidad]["Hr. Finaliza"]?", ":"")+te(W.horaFin),x[I.idUnidad].Motivo+=(x[I.idUnidad].Motivo?", ":"")+W.castigo,x[I.idUnidad]["Otras Observaciones"]+=(x[I.idUnidad]["Otras Observaciones"]?", ":"")+W.observaciones}),x},{}),Ie=Object.values(je),He=be.json_to_sheet(Ie),xe=be.book_new();be.book_append_sheet(xe,He,"Formación De Unidades");const Te=new Date().toISOString().split("T")[0];Ae(xe,`Formación_De_Unidades_${Te}.xlsx`)})},C=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>y()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],R=[{data:null,render:function(v,r,O,M){return M.row+1}},{data:"idUnidad",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.ruta.find(m=>m.idRuta===b.idRuta);return a?a.nombreRuta:""}else return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.rolServicio.filter(m=>m.idUnidad===b.idUnidad);return a.length>0?(a.sort((m,T)=>new Date(T.created_at)-new Date(m.created_at)),a[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);return b?b.numeroUnidad:""}},{data:"idUnidad",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.directivo.find(m=>m.idDirectivo===b.idDirectivo);return a?a.nombre_completo:""}else return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.entrada.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0)return a.map(T=>T.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.entrada.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0)return a.map(T=>T.tipoEntrada).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.entrada.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0)return a.map(T=>T.extremo).join(", ")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.corte.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0)return a.map((T,P)=>`
            <div style="${a.length>1&&P!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${T.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.corte.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0)return a.map((T,P)=>`
            <div style="${a.length>1&&P!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${T.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.corte.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0)return a.map((T,P)=>{const ie=T.horaRegreso?T.horaRegreso.substring(0,5):"";return`
            <div style="${a.length>1&&P!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${ie}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.ultimaCorrida.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0){const m=d.tipoUltimaCorrida.find(T=>T.idTipoUltimaCorrida===a[0].idTipoUltimaCorrida);if(m)return m.tipoUltimaCorrida}}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.ultimaCorrida.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0){const m=a[0].horaInicioUC;return m?m.substring(0,5):""}}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.ultimaCorrida.filter(m=>m.idUnidad===b.idUnidad&&new Date(m.created_at).toLocaleDateString()===F);if(a.length>0){const m=a[0].horaFinUC;if(m)return m.substring(0,5)}}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.castigo.filter(a=>a.idUnidad===v&&new Date(a.created_at).toLocaleDateString()===F);if(b.length>0){const a=b.map(m=>({horaInicio:m.horaInicio?m.horaInicio.substring(0,5):""}));return a.map((m,T)=>`
          <div style="${a.length>1&&T!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${m.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.castigo.filter(a=>a.idUnidad===v&&new Date(a.created_at).toLocaleDateString()===F);if(b.length>0){const a=b.map(m=>({horaFin:m.horaFin?m.horaFin.substring(0,5):""}));return a.map((m,T)=>`
          <div style="${a.length>1&&T!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${m.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.castigo.filter(a=>a.idUnidad===v&&new Date(a.created_at).toLocaleDateString()===F);if(b.length>0){const a=b.map(m=>m.castigo||"");return a.map((m,T)=>`<div style="${a.length>1&&T!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${m}</div>`).join("")}return""}},{data:"idUnidad",className:"text-center",render:function(v,r,O,M){const b=d.castigo.filter(a=>a.idUnidad===v&&new Date(a.created_at).toLocaleDateString()===F);if(b.length>0){const a=b.map(m=>m.observaciones||"");return a.map((m,T)=>`<div style="${a.length>1&&T!==a.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${m}</div>`).join("")}return""}},{data:"idUnidad",render:function(v,r,O,M){const b=d.unidad.find(a=>a.idUnidad===v);if(b){const a=d.operador.find(m=>m.idOperador===b.idOperador);return a?a.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],U=k(!1),c=k(!1),p=k(!1),s=k(!1),o=k(!1),g=k(!1),l=k(!1),D=k(!1);k(!1);const H=k(!1);J({});const V=()=>{H.value=!1},A=()=>{U.value=!1},ce=()=>{c.value=!1},we=()=>{p.value=!1},Se=()=>{s.value=!1},$e=()=>{o.value=!1},Re=()=>{g.value=!1},Ee=()=>{l.value=!1},ke=()=>{D.value=!1},Oe=()=>{se.fire({title:"¿Seguro de actualizar el Rol de Domingo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(v=>{v.isConfirmed&&Ue.Inertia.post(route("servicio.cambiarRolServicio"),{},{onError:r=>{se.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de servicio",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de servicio:",r)}})})},De=()=>{se.fire({title:"¿Seguro de actualizar el Rol de Ruta?",text:'Las unidades que están en la ruta "LIBRAMIENTO - PLAZA DEL VALLE" se cambiarán a la ruta "ESMERALDA - COL. JARDIN" y viceversa',icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(v=>{v.isConfirmed&&Ue.Inertia.post(route("servicio.actualizarRolRuta"),{_method:"PUT"},{onError:r=>{se.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de rutas",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de rutas:",r)}})})},Fe=()=>d.entrada.filter(v=>v.horaEntrada&&new Date(v.created_at).toLocaleDateString()===F).length;return(v,r)=>(h(),K(ze,{title:"Formar Unidades",usuario:d.usuario},{default:q(()=>[e("div",sr,[r[32]||(r[32]=e("h3",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1)),r[33]||(r[33]=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1)),B(Le),e("div",nr,[e("button",{class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",onClick:r[0]||(r[0]=O=>U.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[10]||(r[10]=[e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),f(" Registrar Entrada ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:r[1]||(r[1]=O=>c.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[11]||(r[11]=[e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),f(" Registrar Corte ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:r[2]||(r[2]=O=>o.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[12]||(r[12]=[e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),f(" Registrar Regreso ")])),e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded",onClick:r[3]||(r[3]=O=>p.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[13]||(r[13]=[e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),f(" Registrar castigo ")])),e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded",onClick:r[4]||(r[4]=O=>s.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[14]||(r[14]=[e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),f(" Registrar Fin Castigo ")])),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:r[5]||(r[5]=O=>g.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[15]||(r[15]=[e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),f(" Registrar UC ")])),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:r[6]||(r[6]=O=>l.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[16]||(r[16]=[e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),f(" Regreso UC ")]))]),e("div",lr,[e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:r[7]||(r[7]=O=>D.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[17]||(r[17]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),f(" Rol Domingo ")])),e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:Oe},r[18]||(r[18]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),f(" Actualizar Rol Servicio ")])),e("button",{class:"bg-cyan-500 hover:bg-cyan-600 text-white font-semibold py-2 px-4 rounded",onClick:De},r[19]||(r[19]=[e("i",{class:"fa fa-map","aria-hidden":"true"},null,-1),f(" Actualizar Rol Rutas ")])),e("button",{class:"bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 px-4 rounded",onClick:r[8]||(r[8]=O=>H.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[20]||(r[20]=[e("i",{class:"fa fa-pencil","aria-hidden":"true"},null,-1),f(" Editar Registro ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:r[9]||(r[9]=O=>H.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},r[21]||(r[21]=[e("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1),f(" Eliminar Registro ")]))]),e("div",ur,[e("h3",cr,[r[22]||(r[22]=f("Formaciones registradas: ")),e("strong",null,w(Fe()),1)]),B(n(pe),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:R,data:i.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[C],paging:!1,lengthMenu:[]}},{default:q(()=>[e("thead",null,[e("tr",mr,[r[23]||(r[23]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),e("th",gr,"FECHA: "+w(n(t)+", "+n(F))+" -- SEMANA: "+w(j),1),r[24]||(r[24]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),r[25]||(r[25]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),r[26]||(r[26]=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1)),r[27]||(r[27]=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1)),r[28]||(r[28]=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1)),r[29]||(r[29]=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1)),r[30]||(r[30]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1))]),r[31]||(r[31]=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Dom "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Ent "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tip. Ent "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ext "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Cor "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. reg "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. ini "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. reg "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Ini "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Fin "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1))])]),_:1},8,["data","options"])])]),B(gt,{show:U.value,"max-width":X,closeable:Y,onClose:A,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:d.entrada,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,ruta:d.ruta},null,8,["show","entrada","unidad","unidadesConOperador","ruta"]),B(Tt,{show:c.value,"max-width":X,closeable:Y,onClose:ce,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:d.corte,unidad:d.unidad,unidadesConOperador:d.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),B(Xt,{show:o.value,"max-width":X,closeable:Y,onClose:$e,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,corte:d.corte},null,8,["show","unidad","unidadesConOperador","corte"]),B(wo,{show:p.value,"max-width":X,closeable:Y,onClose:we,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,castigo:d.castigo},null,8,["show","unidad","unidadesConOperador","castigo"]),B(Ma,{show:s.value,"max-width":X,closeable:Y,onClose:Se,title:"Registrar Fin De Castigo",op:"1",modal:"modalCreate",unidad:d.unidad,unidadesConOperador:d.unidadesConOperador,castigo:d.castigo},null,8,["show","unidad","unidadesConOperador","castigo"]),B(Po,{show:g.value,"max-width":X,closeable:Y,onClose:Re,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,tipoUltimaCorrida:d.tipoUltimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),B(sa,{show:l.value,"max-width":X,closeable:Y,onClose:Ee,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:d.ultimaCorrida,unidad:d.unidad},null,8,["show","ultimaCorrida","unidad"]),B(Ua,{show:D.value,"max-width":X,closeable:Y,onClose:ke,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:d.rolServicio,unidad:d.unidad},null,8,["show","rolServicio","unidad"]),B(dr,{show:H.value,"max-width":X,closeable:Y,onClose:V,title:"Editar Registro",op:"1",modal:"modalCreate",unidadesConOperador:d.unidadesConOperador,entrada:d.entrada,corte:d.corte,castigo:d.castigo,ultimaCorrida:d.ultimaCorrida,tipoUltimaCorrida:d.tipoUltimaCorrida},null,8,["show","unidadesConOperador","entrada","corte","castigo","ultimaCorrida","tipoUltimaCorrida"])]),_:1},8,["usuario"]))}};export{Sr as default};
