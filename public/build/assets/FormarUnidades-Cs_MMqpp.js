import{_ as _e}from"./PrincipalLayout-lGkTuxxa.js";import{u as A,i as P,r as R,o as g,j as V,e as L,a as e,g as J,t as x,w as F,d as c,k as T,c as _,F as N,m as B,p as W,l as O,y as pe,f as m,z as X,L as Z,D as be,q as Ue,b as M,x as $e}from"./app-GjlyjCeG.js";import"./buttons.print-QOsL-VdO.js";import{_ as K}from"./Modal-CmM44F1X.js";import{_ as Ce}from"./Mensaje-lc-3iseO.js";import"./jspdf.plugin.autotable-DmkYXTd5.js";import{u as ee,w as we}from"./xlsx-769MyM77.js";/* empty css                                                */const Se={class:"mt-2 bg-white p-4 shadow rounded-lg"},ke={class:"border-b border-gray-900/10 pb-12"},Re={class:"text-base font-semibold leading-7 text-gray-900"},De=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1),Ee={class:"flex flex-wrap -mx-4"},Fe={class:"md:col-span-2"},je={class:"sm:col-span-2",hidden:""},Oe=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1),Ie={class:"mt-1"},He=["id"],Te={class:"sm:col-span-2 px-4"},Me=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Le={class:"mt-2"},Ne=["id"],Be=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),We=["value"],Ae={key:0,class:"text-red-500 text-xs mt-1"},Ve={class:"sm:col-span-2 px-4"},ze=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1),Ge={class:"mt-2"},qe=["id"],Pe={key:0,class:"text-red-500 text-xs"},Je={class:"sm:col-span-2 px-4"},Xe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1),Ke={class:"mt-2"},Qe=e("label",{for:"si",class:"radio-label"}," Sí",-1),Ye=e("label",{for:"no",class:"radio-label"}," No",-1),Ze={key:0,class:"text-red-500 text-xs"},et={class:"mt-6 flex items-center justify-end gap-x-6"},tt=["id"],ot=e("i",{class:"fa-solid fa-ban"},null,-1),at=["disabled"],dt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),it={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:i}){const l=d,I=i,t=A({idEntrada:l.entrada.idEntrada,unidad:l.entrada.idUnidad,horaEntrada:l.entrada.horaEntrada,extremo:l.entrada.extremo});P(()=>l.entrada,async r=>{t.idEntrada=r.idEntrada,t.unidad=r.unidad,t.horaEntrada=r.horaEntrada,t.extremo=r.extremo},{deep:!0});const E=r=>r!=null,D=r=>r!=null,b=R(""),h=R(""),U=R(""),f=async()=>{I("close"),t.reset()},k=async()=>{h.value=E(t.horaEntrada)?"":"Seleccione la hora de entrada",b.value=E(t.unidad)?"":"Seleccione una unidad",U.value=D(t.extremo)?"":"Seleccione una opción",!(h.value||b.value||U.value)&&t.post(X("principal.registarHoraEntrada"),{onSuccess:()=>{f(),h.value="",b.value="",U.value=""}})};return(r,n)=>(g(),V(K,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:f},{default:L(()=>[e("div",Se,[e("form",{onSubmit:n[5]||(n[5]=J(s=>d.op==="1"?k():r.update(),["prevent"]))},[e("div",ke,[e("h2",Re,x(d.title),1),De,e("div",Ee,[e("div",Fe,[e("div",je,[Oe,e("div",Ie,[F(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":n[0]||(n[0]=s=>c(t).idEntrada=s),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+d.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,He),[[T,c(t).idEntrada]])])])]),e("div",Te,[Me,e("div",Le,[F(e("select",{name:"unidad",id:"unidad"+d.op,"onUpdate:modelValue":n[1]||(n[1]=s=>c(t).unidad=s),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Be,(g(!0),_(N,null,B(d.unidadesConOperador,s=>(g(),_("option",{key:s.idUnidad,value:s.idUnidad},x(s.numeroUnidad),9,We))),128))],8,Ne),[[W,c(t).unidad]])]),b.value!=""?(g(),_("div",Ae,x(b.value),1)):O("",!0)]),e("div",Ve,[ze,e("div",Ge,[F(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+d.op,"onUpdate:modelValue":n[2]||(n[2]=s=>c(t).horaEntrada=s),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,qe),[[T,c(t).horaEntrada]])]),h.value!=""?(g(),_("div",Pe,x(h.value),1)):O("",!0)]),e("div",Je,[Xe,e("div",Ke,[F(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":n[3]||(n[3]=s=>c(t).extremo=s)},null,512),[[pe,c(t).extremo]]),Qe,F(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":n[4]||(n[4]=s=>c(t).extremo=s)},null,512),[[pe,c(t).extremo]]),Ye]),U.value!=""?(g(),_("div",Ze,x(U.value),1)):O("",!0)])])]),e("div",et,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[ot,m(" Cancelar")],8,tt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[dt,m("Guardar")],8,at)])],32)])]),_:1},8,["show","max-width","closeable"]))}},st={class:"mt-2 bg-white p-4 shadow rounded-lg"},nt={class:"border-b border-gray-900/10 pb-12"},rt={class:"text-base font-semibold leading-7 text-gray-900"},lt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),ct={class:"flex flex-wrap -mx-4"},ut={class:"sm:col-span-2 px-4"},mt=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),gt={class:"mt-2"},pt=["id"],bt=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),ht=["value"],ft={key:0,class:"text-red-500 text-xs mt-1"},yt={class:"sm:col-span-2 px-4"},xt=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1),vt={class:"mt-2"},_t=["id"],Ut={key:0,class:"text-red-500 text-xs"},$t={class:"sm:col-span-2 px-4"},Ct=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Causa "),e("span",{class:"text-red-500"},"*")],-1),wt={class:"mt-2"},St=["id"],kt={key:0,class:"text-red-500 text-xs mt-1"},Rt={class:"sm:col-span-2 px-4"},Dt=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1),Et={class:"mt-2"},Ft=["id"],jt={class:"mt-6 flex items-center justify-end gap-x-6"},Ot=["id"],It=e("i",{class:"fa-solid fa-ban"},null,-1),Ht=["disabled"],Tt=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Mt={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:i}){const l=d,I=i,t=A({idCorte:l.corte.idCorte,unidad:l.corte.idUnidad,horaCorte:l.corte.horaCorte,causa:l.corte.corte,horaRegreso:l.corte.horaRegreso});P(()=>l.corte,async r=>{t.idCorte=r.idCorte,t.unidad=r.unidad,t.horaCorte=r.horaCorte,t.causa=r.causa,t.horaRegreso=r.horaRegreso},{deep:!0});const E=r=>r!=null,D=r=>typeof r=="string"&&r.trim()!=="",b=R(""),h=R(""),U=R("");R("");const f=async()=>{I("close"),t.reset()},k=async()=>{h.value=E(t.horaCorte)?"":"Seleccione la hora de corte",b.value=E(t.unidad)?"":"Seleccione una unidad",U.value=D(t.causa)?"":"Ingrese la causa del corte",!(h.value||b.value||U.value)&&t.post(X("principal.registarCorte"),{onSuccess:()=>{f(),h.value="",b.value="",U.value=""}})};return(r,n)=>(g(),V(K,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:f},{default:L(()=>[e("div",st,[e("form",{onSubmit:n[4]||(n[4]=J(s=>d.op==="1"?k():r.update(),["prevent"]))},[e("div",nt,[e("h2",rt,x(d.title),1),lt,e("div",ct,[e("div",ut,[mt,e("div",gt,[F(e("select",{name:"unidad",id:"unidad"+d.op,"onUpdate:modelValue":n[0]||(n[0]=s=>c(t).unidad=s),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[bt,(g(!0),_(N,null,B(d.unidadesConOperador,s=>(g(),_("option",{key:s.idUnidad,value:s.idUnidad},x(s.numeroUnidad),9,ht))),128))],8,pt),[[W,c(t).unidad]])]),b.value!=""?(g(),_("div",ft,x(b.value),1)):O("",!0)]),e("div",yt,[xt,e("div",vt,[F(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+d.op,"onUpdate:modelValue":n[1]||(n[1]=s=>c(t).horaCorte=s),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,_t),[[T,c(t).horaCorte]])]),h.value!=""?(g(),_("div",Ut,x(h.value),1)):O("",!0)]),e("div",$t,[Ct,e("div",wt,[F(e("input",{type:"text",name:"causa",id:"causa"+d.op,"onUpdate:modelValue":n[2]||(n[2]=s=>c(t).causa=s),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,St),[[T,c(t).causa]])]),U.value!=""?(g(),_("div",kt,x(U.value),1)):O("",!0)]),e("div",Rt,[Dt,e("div",Et,[F(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+d.op,"onUpdate:modelValue":n[3]||(n[3]=s=>c(t).horaRegreso=s),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ft),[[T,c(t).horaRegreso]])])])])]),e("div",jt,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[It,m(" Cancelar")],8,Ot),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[Tt,m("Guardar")],8,Ht)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Lt={class:"mt-2 bg-white p-4 shadow rounded-lg"},Nt={class:"border-b border-gray-900/10 pb-12"},Bt={class:"text-base font-semibold leading-7 text-gray-900"},Wt=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1),At={class:"flex flex-wrap -mx-4"},Vt={class:"sm:col-span-2 px-4"},zt=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),Gt={class:"mt-2"},qt=["id"],Pt=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Jt=["value"],Xt={key:0,class:"text-red-500 text-xs mt-1"},Kt={class:"sm:col-span-2 px-4"},Qt=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1),Yt={class:"mt-2"},Zt=["id"],eo={key:0,class:"text-red-500 text-xs mt-1"},to={class:"mt-6 flex items-center justify-end gap-x-6"},oo=["id"],ao=e("i",{class:"fa-solid fa-ban"},null,-1),io=["disabled"],so=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),no={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:i}){const l=d,I=i,t=A({idFormacionUnidades:l.formacionUnidades.idFormacionUnidades,unidad:l.formacionUnidades.idUnidad,horaRegreso:l.formacionUnidades.horaRegreso});P(()=>l.formacionUnidades,async f=>{t.idFormacionUnidades=f.idFormacionUnidades,t.unidad=f.unidad,t.horaRegreso=l.formacionUnidades.horaRegreso},{deep:!0});const E=f=>f!=null,D=R(""),b=R(""),h=async()=>{I("close"),t.reset()},U=async()=>{b.value=E(t.horaRegreso)?"":"Seleccione la hora de regreso",D.value=E(t.unidad)?"":"Seleccione una unidad",!(b.value||D.value)&&t.post(X("principal.registrarHoraRegreso"),{onSuccess:()=>{h(),b.value="",D.value=""}})};return(f,k)=>(g(),V(K,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:h},{default:L(()=>[e("div",Lt,[e("form",{onSubmit:k[2]||(k[2]=J(r=>d.op==="1"?U():f.update(),["prevent"]))},[e("div",Nt,[e("h2",Bt,x(d.title),1),Wt,e("div",At,[e("div",Vt,[zt,e("div",Gt,[F(e("select",{name:"unidad",id:"unidad"+d.op,"onUpdate:modelValue":k[0]||(k[0]=r=>c(t).unidad=r),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Pt,(g(!0),_(N,null,B(d.unidad,r=>(g(),_("option",{key:r.idUnidad,value:r.idUnidad},x(r.numeroUnidad),9,Jt))),128))],8,qt),[[W,c(t).unidad]])]),D.value!=""?(g(),_("div",Xt,x(D.value),1)):O("",!0)]),e("div",Kt,[Qt,e("div",Yt,[F(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+d.op,"onUpdate:modelValue":k[1]||(k[1]=r=>c(t).horaRegreso=r),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Zt),[[T,c(t).horaRegreso]])]),b.value!=""?(g(),_("div",eo,x(b.value),1)):O("",!0)])])]),e("div",to,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:h},[ao,m(" Cancelar")],8,oo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[so,m("Guardar")],8,io)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ro={class:"mt-2 bg-white p-4 shadow rounded-lg"},lo={class:"border-b border-gray-900/10 pb-12"},co={class:"text-base font-semibold leading-7 text-gray-900"},uo=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),mo={class:"flex flex-wrap -mx-4"},go={class:"sm:col-span-2 px-4"},po=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),bo={class:"mt-2"},ho=["id"],fo=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),yo=["value"],xo={key:0,class:"text-red-500 text-xs mt-1"},vo={class:"sm:col-span-2 px-4"},_o=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Castigo "),e("span",{class:"text-red-500"},"*")],-1),Uo={class:"mt-2"},$o=["id"],Co={key:0,class:"text-red-500 text-xs mt-1"},wo={class:"sm:col-span-2 px-4"},So=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),ko={class:"mt-2"},Ro=["id"],Do={key:0,class:"text-red-500 text-xs"},Eo={class:"sm:col-span-2 px-4"},Fo=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),jo={class:"mt-2"},Oo=["id"],Io={key:0,class:"text-red-500 text-xs"},Ho={class:"sm:col-span-2 px-4"},To=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1),Mo={class:"mt-2"},Lo=["id"],No={class:"mt-6 flex items-center justify-end gap-x-6"},Bo=["id"],Wo=e("i",{class:"fa-solid fa-ban"},null,-1),Ao=["disabled"],Vo=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),zo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:i}){const l=d,I=i,t=A({idCastigo:l.castigo.idCastigo,castigo:l.castigo.castigo,observaciones:l.castigo.observaciones,horaInicio:l.castigo.horaInicio,horaFin:l.castigo.horaFin,unidad:l.castigo.idUnidad});P(()=>l.castigo,async n=>{t.idCastigo=n.idCastigo,t.castigo=n.castigo,t.observaciones=n.observaciones,t.horaInicio=n.horaInicio,t.horaFin=l.horaFin,t.unidad=l.unidad},{deep:!0});const E=n=>n!=null,D=n=>typeof n=="string"&&n.trim()!=="",b=R(""),h=R(""),U=R(""),f=R(""),k=async()=>{I("close"),t.reset()},r=async()=>{h.value=E(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",b.value=E(t.unidad)?"":"Seleccione una unidad",U.value=D(t.castigo)?"":"Ingrese motivo del castigo",f.value=E(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(h.value||b.value||U.value||f.value)&&t.post(X("principal.registrarCastigo"),{onSuccess:()=>{k(),h.value="",b.value="",U.value="",f.value=""}})};return(n,s)=>(g(),V(K,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:k},{default:L(()=>[e("div",ro,[e("form",{onSubmit:s[5]||(s[5]=J(C=>d.op==="1"?r():n.update(),["prevent"]))},[e("div",lo,[e("h2",co,x(d.title),1),uo,e("div",mo,[e("div",go,[po,e("div",bo,[F(e("select",{name:"unidad",id:"unidad"+d.op,"onUpdate:modelValue":s[0]||(s[0]=C=>c(t).unidad=C),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[fo,(g(!0),_(N,null,B(d.unidad,C=>(g(),_("option",{key:C.idUnidad,value:C.idUnidad},x(C.numeroUnidad),9,yo))),128))],8,ho),[[W,c(t).unidad]])]),b.value!=""?(g(),_("div",xo,x(b.value),1)):O("",!0)]),e("div",vo,[_o,e("div",Uo,[F(e("input",{type:"text",name:"castigo",id:"castigo"+d.op,"onUpdate:modelValue":s[1]||(s[1]=C=>c(t).castigo=C),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,$o),[[T,c(t).castigo]])]),U.value!=""?(g(),_("div",Co,x(U.value),1)):O("",!0)]),e("div",wo,[So,e("div",ko,[F(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+d.op,"onUpdate:modelValue":s[2]||(s[2]=C=>c(t).horaInicio=C),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ro),[[T,c(t).horaInicio]])]),h.value!=""?(g(),_("div",Do,x(h.value),1)):O("",!0)]),e("div",Eo,[Fo,e("div",jo,[F(e("input",{type:"time",name:"horaFin",id:"horaFin"+d.op,"onUpdate:modelValue":s[3]||(s[3]=C=>c(t).horaFin=C),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Oo),[[T,c(t).horaFin]])]),f.value!=""?(g(),_("div",Io,x(f.value),1)):O("",!0)]),e("div",Ho,[To,e("div",Mo,[F(e("input",{type:"text",name:"observaciones",id:"observaciones"+d.op,"onUpdate:modelValue":s[4]||(s[4]=C=>c(t).observaciones=C),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Lo),[[T,c(t).observaciones]])])])])]),e("div",No,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:k},[Wo,m(" Cancelar")],8,Bo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[Vo,m("Guardar")],8,Ao)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Go={class:"mt-2 bg-white p-4 shadow rounded-lg"},qo={class:"border-b border-gray-900/10 pb-12"},Po={class:"text-base font-semibold leading-7 text-gray-900"},Jo=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),Xo={class:"flex flex-wrap -mx-4"},Ko={class:"sm:col-span-2 px-4"},Qo=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),Yo={class:"mt-2"},Zo=["id"],ea=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),ta=["value"],oa={key:0,class:"text-red-500 text-xs mt-1"},aa={class:"sm:col-span-2 px-4"},da=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1),ia={class:"mt-2"},sa=["id"],na=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1),ra=["value"],la={key:0,class:"text-red-500 text-xs mt-1"},ca={class:"sm:col-span-2 px-4"},ua=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1),ma={class:"mt-2"},ga=["id"],pa={key:0,class:"text-red-500 text-xs"},ba={class:"sm:col-span-2 px-4"},ha=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1),fa={class:"mt-2"},ya=["id"],xa={class:"mt-6 flex items-center justify-end gap-x-6"},va=["id"],_a=e("i",{class:"fa-solid fa-ban"},null,-1),Ua=["disabled"],$a=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Ca={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:i}){const l=d,I=i,t=A({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,tipoUltimaCorrida:l.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:l.ultimaCorrida.horaInicioUC,horaFinUC:l.ultimaCorrida.horaFinUC});P(()=>l.ultimaCorrida,async r=>{t.idUltimaCorrida=r.idUltimaCorrida,t.tipoUltimaCorrida=r.tipoUltimaCorrida,t.horaInicioUC=r.horaInicioUC,t.horaFinUC=r.horaFinUC},{deep:!0});const E=r=>r!=null,D=r=>r!=null,b=R(""),h=R(""),U=R(""),f=async()=>{I("close"),t.reset()},k=async()=>{h.value=E(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",b.value=E(t.unidad)?"":"Seleccione una unidad",U.value=D(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(h.value||b.value||U.value)&&t.post(X("principal.registrarUC"),{onSuccess:()=>{f(),h.value="",b.value="",U.value=""}})};return(r,n)=>(g(),V(K,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:f},{default:L(()=>[e("div",Go,[e("form",{onSubmit:n[4]||(n[4]=J(s=>d.op==="1"?k():r.update(),["prevent"]))},[e("div",qo,[e("h2",Po,x(d.title),1),Jo,e("div",Xo,[e("div",Ko,[Qo,e("div",Yo,[F(e("select",{name:"unidad",id:"unidad"+d.op,"onUpdate:modelValue":n[0]||(n[0]=s=>c(t).unidad=s),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ea,(g(!0),_(N,null,B(d.unidad,s=>(g(),_("option",{key:s.idUnidad,value:s.idUnidad},x(s.numeroUnidad),9,ta))),128))],8,Zo),[[W,c(t).unidad]])]),b.value!=""?(g(),_("div",oa,x(b.value),1)):O("",!0)]),e("div",aa,[da,e("div",ia,[F(e("select",{name:"tipoCorrida",id:"tipoCorrida"+d.op,"onUpdate:modelValue":n[1]||(n[1]=s=>c(t).tipoUltimaCorrida=s),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[na,(g(!0),_(N,null,B(d.tipoUltimaCorrida,s=>(g(),_("option",{key:s.idTipoUltimaCorrida,value:s.idTipoUltimaCorrida},x(s.tipoUltimaCorrida),9,ra))),128))],8,sa),[[W,c(t).tipoUltimaCorrida]])]),U.value!=""?(g(),_("div",la,x(U.value),1)):O("",!0)]),e("div",ca,[ua,e("div",ma,[F(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+d.op,"onUpdate:modelValue":n[2]||(n[2]=s=>c(t).horaInicioUC=s),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ga),[[T,c(t).horaInicioUC]])]),h.value!=""?(g(),_("div",pa,x(h.value),1)):O("",!0)]),e("div",ba,[ha,e("div",fa,[F(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+d.op,"onUpdate:modelValue":n[3]||(n[3]=s=>c(t).horaFinUC=s),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ya),[[T,c(t).horaFinUC]])])])])]),e("div",xa,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:f},[_a,m(" Cancelar")],8,va),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[$a,m("Guardar")],8,Ua)])],32)])]),_:1},8,["show","max-width","closeable"]))}},wa={class:"mt-2 bg-white p-4 shadow rounded-lg"},Sa={class:"border-b border-gray-900/10 pb-12"},ka={class:"text-base font-semibold leading-7 text-gray-900"},Ra=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[m("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),m(" son obligatorios. ")],-1),Da={class:"flex flex-wrap -mx-4"},Ea={class:"sm:col-span-2 px-4"},Fa=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Unidad "),e("span",{class:"text-red-500"},"*")],-1),ja={class:"mt-2"},Oa=["id"],Ia=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1),Ha=["value"],Ta={key:0,class:"text-red-500 text-xs mt-1"},Ma={class:"sm:col-span-2 px-4"},La=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[m("Hora fin "),e("span",{class:"text-red-500"},"*")],-1),Na={class:"mt-2"},Ba=["id"],Wa={key:0,class:"text-red-500 text-xs mt-1"},Aa={class:"mt-6 flex items-center justify-end gap-x-6"},Va=["id"],za=e("i",{class:"fa-solid fa-ban"},null,-1),Ga=["disabled"],qa=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),Pa={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:i}){const l=d,I=i,t=A({idUltimaCorrida:l.ultimaCorrida.idUltimaCorrida,unidad:l.ultimaCorrida.idUnidad,horaFinUC:l.ultimaCorrida.horaFinUC});P(()=>l.ultimaCorrida,async f=>{t.idUltimaCorrida=f.idUltimaCorrida,t.horaFinUC=f.horaFinUC},{deep:!0});const E=f=>f!=null,D=R(""),b=R(""),h=async()=>{I("close"),t.reset()},U=async()=>{b.value=E(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",D.value=E(t.unidad)?"":"Seleccione una unidad",!(b.value||D.value)&&t.post(X("principal.regresoUC"),{onSuccess:()=>{h(),b.value="",D.value=""}})};return(f,k)=>(g(),V(K,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:h},{default:L(()=>[e("div",wa,[e("form",{onSubmit:k[2]||(k[2]=J(r=>d.op==="1"?U():f.update(),["prevent"]))},[e("div",Sa,[e("h2",ka,x(d.title),1),Ra,e("div",Da,[e("div",Ea,[Fa,e("div",ja,[F(e("select",{name:"unidad",id:"unidad"+d.op,"onUpdate:modelValue":k[0]||(k[0]=r=>c(t).unidad=r),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Ia,(g(!0),_(N,null,B(d.unidad,r=>(g(),_("option",{key:r.idUnidad,value:r.idUnidad},x(r.numeroUnidad),9,Ha))),128))],8,Oa),[[W,c(t).unidad]])]),D.value!=""?(g(),_("div",Ta,x(D.value),1)):O("",!0)]),e("div",Ma,[La,e("div",Na,[F(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+d.op,"onUpdate:modelValue":k[1]||(k[1]=r=>c(t).horaFinUC=r),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ba),[[T,c(t).horaFinUC]])]),D.value!=""?(g(),_("div",Wa,x(D.value),1)):O("",!0)])])]),e("div",Aa,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:h},[za,m(" Cancelar")],8,Va),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[qa,m("Guardar")],8,Ga)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Ja={class:"mt-2 bg-white p-4 shadow rounded-lg"},Xa={class:"text-base font-semibold leading-7 text-gray-900"},Ka={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},Qa={class:"sm:col-span-2 px-4"},Ya=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),Za={class:"mt-2"},ed=e("option",{disabled:""},"Seleccione una o más unidades",-1),td=["value"],od={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ad={class:"sm:col-span-2 px-4"},dd=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1),id={class:"mt-2"},sd=e("option",{disabled:""},"Seleccione una o más unidades",-1),nd=["value"],rd={key:0,class:"text-red-500 text-xs mt-1 mb-4"},ld={class:"mt-6 flex items-center justify-end gap-x-6"},cd=["id"],ud=e("i",{class:"fa-solid fa-ban"},null,-1),md=["disabled"],gd=e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),pd={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:i}){const l=d,I=i,t=A({idRolServicio:l.rolServicio.idRolServicio,unidad:[],trabajaDomingo:l.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});P(()=>l.rolServicio,async n=>{t.idRolServicio=n.idRolServicio,t.trabajaDomingo=n.trabajaDomingo},{deep:!0});const E=async()=>{I("close"),t.reset()},D=(n,s)=>n.length>0||s.length>0,b=R(""),h=async()=>{b.value=D(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!b.value&&t.post(X("principal.trabDomingo"),{data:t.data,onSuccess:()=>{E(),b.value=""}})},U=()=>{const n=new Date,s=n.getDay(),C=s===0?7:s,z=new Date(n);return z.setDate(n.getDate()-C),z.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},f=()=>{const n=new Date,C=7-n.getDay(),z=new Date(n);return z.setDate(n.getDate()+C),z.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},k=U(),r=f();return(n,s)=>(g(),V(K,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:E},{default:L(()=>[e("div",Ja,[e("form",{onSubmit:s[2]||(s[2]=J(C=>d.op==="1"?h():n.update(),["prevent"]))},[e("h2",Xa,x(d.title),1),e("p",Ka,[m("Seleccione las unidades que trabajaron el : "),e("strong",null,x(c(k)),1),m(". ")]),e("div",Qa,[Ya,e("div",Za,[F(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":s[0]||(s[0]=C=>c(t).unidadesSi=C),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[ed,(g(!0),_(N,null,B(d.unidad,C=>(g(),_("option",{key:C.idUnidad,value:C.idUnidad},x(C.numeroUnidad),9,td))),128))],512),[[W,c(t).unidadesSi]])])]),e("p",od,[m("Seleccione las unidades que trabajarán el próximo: "),e("strong",null,x(c(r)),1),m(". ")]),e("div",ad,[dd,e("div",id,[F(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":s[1]||(s[1]=C=>c(t).unidadesNo=C),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[sd,(g(!0),_(N,null,B(d.unidad,C=>(g(),_("option",{key:C.idUnidad,value:C.idUnidad},x(C.numeroUnidad),9,nd))),128))],512),[[W,c(t).unidadesNo]])])]),b.value?(g(),_("div",rd,x(b.value),1)):O("",!0),e("div",ld,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:E},[ud,m(" Cancelar")],8,cd),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:c(t).processing},[gd,m("Guardar")],8,md)])],32)])]),_:1},8,["show","max-width","closeable"]))}},bd={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},hd=e("h2",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1),fd=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1),yd={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},xd=e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),vd=e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),_d=e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),Ud=e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),$d=e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),Cd={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},wd=e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),Sd=e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),kd={class:"overflow-x-auto"},Rd={class:"text-sm leading-normal border-b border-gray-300"},Dd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Ed={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},Fd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),jd=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Od=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1),Id=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1),Hd=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1),Td=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1),Md=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1),Ld=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Trab. DOMINGO "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Extremo "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo de Corrida "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. finaliza "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1),G="xl",q=!0,Pd={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(d){Z.use(be),Z.use(be);const i=d,l=new Date().toLocaleDateString(),I=t(new Date().getDay());function t(p){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][p]}Ue(()=>i.entrada.filter(p=>new Date(p.fechaRegistro).toLocaleDateString()===l));const E=()=>{$e(()=>{const y=$("#formacionTablaId").DataTable().rows({search:"applied"}).data(),w=a=>{if(!a)return"";const[v,H]=a.split(":");return`${v}:${H}`},j=y.toArray().map(a=>{var Q,Y,te,oe,ae,de,ie,se,ne,re,le,ce,ue,me,ge;const v=i.ultimaCorrida.find(S=>S.idUnidad===a.idUnidad),H=i.tipoUltimaCorrida.find(S=>S.idTipoUltimaCorrida===(v==null?void 0:v.idTipoUltimaCorrida));return{ID:a.idUnidad,Ruta:(Q=i.ruta.find(S=>S.idRuta===a.idRuta))==null?void 0:Q.nombreRuta,"Trab. Domingo":(Y=i.rolServicio.find(S=>S.idRolServicio===a.idUnidad))==null?void 0:Y.trabajaDomingo,Unidad:(te=i.unidad.find(S=>S.idUnidad===a.idUnidad))==null?void 0:te.numeroUnidad,"Socio/Prestador":((oe=i.directivo.find(S=>S.idDirectivo===a.idDirectivo))==null?void 0:oe.nombre_completo)||"","Hr. Entrada":w((ae=i.entrada.find(S=>S.idUnidad===a.idUnidad))==null?void 0:ae.horaEntrada),"Tipo Entrada":(de=i.entrada.find(S=>S.idUnidad===a.idUnidad))==null?void 0:de.tipoEntrada,Extremo:(ie=i.entrada.find(S=>S.idUnidad===a.idUnidad))==null?void 0:ie.extremo,"Hr. Corte":w((se=i.corte.find(S=>S.idUnidad===a.idUnidad))==null?void 0:se.horaCorte),Causa:(ne=i.corte.find(S=>S.idUnidad===a.idUnidad))==null?void 0:ne.causa,"Hr. Regreso":w((re=i.corte.find(S=>S.idUnidad===a.idUnidad))==null?void 0:re.horaRegreso),"Tipo De Corrida":H==null?void 0:H.tipoUltimaCorrida,"Hr. Inicio UC":w(v==null?void 0:v.horaInicioUC),"Hr. Regreso UC":w(v==null?void 0:v.horaFinUC),"Hr. Inicio":w((le=i.castigo.find(S=>S.idUnidad===a.idUnidad))==null?void 0:le.horaInicio),"Hr. Finaliza":w((ce=i.castigo.find(S=>S.idUnidad===a.idUnidad))==null?void 0:ce.horaFin),Motivo:(ue=i.castigo.find(S=>S.idUnidad===a.idUnidad))==null?void 0:ue.castigo,"Otras Observaciones":(me=i.castigo.find(S=>S.idUnidad===a.idUnidad))==null?void 0:me.observaciones,Operador:(ge=i.operador.find(S=>S.idOperador===a.idOperador))==null?void 0:ge.nombre_completo}}),u=ee.json_to_sheet(j),o=ee.book_new();ee.book_append_sheet(o,u,"Formación De Unidades"),we(o,"Formación De Unidades.xlsx")})},D=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>E()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],b=[{data:null,render:function(p,y,w,j){return j.row+1}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.ruta.find(a=>a.idRuta===u.idRuta);return o?o.nombreRuta:""}else return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.rolServicio.filter(a=>a.idUnidad===u.idUnidad);return o.length>0?(o.sort((a,v)=>new Date(v.created_at)-new Date(a.created_at)),o[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);return u?u.numeroUnidad:""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.directivo.find(a=>a.idDirectivo===u.idDirectivo);return o?o.nombre_completo:""}else return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.entrada.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(v=>v.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.entrada.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(v=>v.tipoEntrada).join(", ")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.entrada.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0)return o.map(v=>v.extremo).join(", ")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.corte.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((v,H)=>`
            <div style="${o.length>1&&H!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${v.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.corte.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((v,H)=>`
            <div style="${o.length>1&&H!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${v.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.corte.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0)return o.map((v,H)=>{const Q=v.horaRegreso?v.horaRegreso.substring(0,5):"";return`
            <div style="${o.length>1&&H!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${Q}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.ultimaCorrida.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0){const a=i.tipoUltimaCorrida.find(v=>v.idTipoUltimaCorrida===o[0].idTipoUltimaCorrida);if(a)return a.tipoUltimaCorrida}}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.ultimaCorrida.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0){const a=o[0].horaInicioUC;return a?a.substring(0,5):""}}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.ultimaCorrida.filter(a=>a.idUnidad===u.idUnidad&&new Date(a.created_at).toLocaleDateString()===l);if(o.length>0){const a=o[0].horaFinUC;if(a)return a.substring(0,5)}}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(a=>({horaInicio:a.horaInicio?a.horaInicio.substring(0,5):""}));return o.map((a,v)=>`
          <div style="${o.length>1&&v!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${a.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(a=>({horaFin:a.horaFin?a.horaFin.substring(0,5):""}));return o.map((a,v)=>`
          <div style="${o.length>1&&v!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${a.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(a=>a.castigo||"");return o.map((a,v)=>`<div style="${o.length>1&&v!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${a}</div>`).join("")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.castigo.filter(o=>o.idUnidad===p&&new Date(o.created_at).toLocaleDateString()===l);if(u.length>0){const o=u.map(a=>a.observaciones||"");return o.map((a,v)=>`<div style="${o.length>1&&v!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${a}</div>`).join("")}return""}},{data:"idUnidad",render:function(p,y,w,j){const u=i.unidad.find(o=>o.idUnidad===p);if(u){const o=i.operador.find(a=>a.idOperador===u.idOperador);return o?o.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],h=R(!1),U=R(!1),f=R(!1),k=R(!1),r=R(!1),n=R(!1),s=R(!1);R(!1),A({});const C=()=>{h.value=!1},z=()=>{U.value=!1},he=()=>{f.value=!1},fe=()=>{k.value=!1},ye=()=>{r.value=!1},xe=()=>{n.value=!1},ve=()=>{s.value=!1};return(p,y)=>(g(),V(_e,{title:"Formar Unidades",usuario:i.usuario},{default:L(()=>[e("div",bd,[hd,fd,M(Ce),e("div",yd,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:y[0]||(y[0]=w=>h.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[xd,m(" Registrar Entrada ")]),e("button",{class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:y[1]||(y[1]=w=>U.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[vd,m(" Registrar Corte ")]),e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:y[2]||(y[2]=w=>k.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[_d,m(" Registrar Regreso ")]),e("button",{class:"bg-yellow-500 hover:bg-yellow-500 text-white font-semibold py-2 px-4 rounded",onClick:y[3]||(y[3]=w=>f.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Ud,m(" Registrar castigo ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:y[4]||(y[4]=w=>r.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[$d,m(" Registrar UC ")])]),e("div",Cd,[e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:y[5]||(y[5]=w=>n.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[wd,m(" Regreso UC ")]),e("button",{class:"bg-teal-500 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded",onClick:y[6]||(y[6]=w=>s.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},[Sd,m(" Rol domingo ")])]),e("div",kd,[M(c(Z),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:b,data:d.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[D],paging:!1,lengthMenu:[]}},{default:L(()=>[e("thead",null,[e("tr",Rd,[Dd,e("th",Ed,"FECHA: "+x(c(I)+", "+c(l)),1),Fd,jd,Od,Id,Hd,Td,Md]),Ld])]),_:1},8,["data","options"])])]),M(it,{show:h.value,"max-width":G,closeable:q,onClose:C,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:i.entrada,unidad:i.unidad,unidadesConOperador:i.unidadesConOperador},null,8,["show","entrada","unidad","unidadesConOperador"]),M(Mt,{show:U.value,"max-width":G,closeable:q,onClose:z,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:i.corte,unidad:i.unidad,unidadesConOperador:i.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),M(no,{show:k.value,"max-width":G,closeable:q,onClose:fe,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:i.unidad},null,8,["show","unidad"]),M(zo,{show:f.value,"max-width":G,closeable:q,onClose:he,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:i.unidad,castigo:i.castigo},null,8,["show","unidad","castigo"]),M(Ca,{show:r.value,"max-width":G,closeable:q,onClose:ye,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:i.ultimaCorrida,tipoUltimaCorrida:i.tipoUltimaCorrida,unidad:i.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),M(Pa,{show:n.value,"max-width":G,closeable:q,onClose:xe,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:i.ultimaCorrida,unidad:i.unidad},null,8,["show","ultimaCorrida","unidad"]),M(pd,{show:s.value,"max-width":G,closeable:q,onClose:ve,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:i.rolServicio,unidad:i.unidad},null,8,["show","rolServicio","unidad"])]),_:1},8,["usuario"]))}};export{Pd as default};
