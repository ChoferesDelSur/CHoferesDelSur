import{u as W,i as V,r as D,o as C,j as G,e as N,a as e,g as K,t as S,w as H,d as l,k as A,b as B,L as Y,c as j,l as T,y as xe,f,z as X,n as ae,F as le,m as ue,p as ce,C as se,D as ye,q as Oe,M as he,x as je}from"./app-Ulf1_P01.js";import"./buttons.print-NLOxmzBh.js";import{_ as Fe}from"./Mensaje-BXyOukiH.js";import"./jspdf.plugin.autotable-CqtI2_So.js";import{S as oe}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{u as ne,w as Ie}from"./xlsx-DjuO7_Ju.js";import{_ as He}from"./ServicioLayout-UzWqJf9A.js";import{_ as Z}from"./Modal-B4a8FicP.js";/* empty css                   *//* empty css                                                */const Te={class:"mt-2 bg-white p-4 shadow rounded-lg"},Me={class:"border-b border-gray-900/10 pb-12"},Be={class:"text-base font-semibold leading-7 text-gray-900"},Le={class:"flex flex-wrap -mx-4"},Ae={class:"md:col-span-2"},_e={class:"sm:col-span-2",hidden:""},ze={class:"mt-1"},Ne=["id"],Ve={class:"sm:col-span-2 w-56 px-4"},We={class:"mt-2"},Ge={key:0,class:"text-red-500 text-xs mt-1"},Pe={class:"sm:col-span-2 px-4"},qe={class:"mt-2"},Je=["id"],Ke={key:0,class:"text-red-500 text-xs"},Xe={class:"sm:col-span-2 px-4"},Ze={class:"mt-2"},Qe={key:0,class:"text-red-500 text-xs"},Ye={class:"mt-6 flex items-center justify-end gap-x-6"},et=["id"],tt=["disabled"],ot={__name:"FormularioRegHoraEntrada",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},entrada:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:s}){const u=d,M=s,t=W({idEntrada:u.entrada.idEntrada,unidad:u.entrada.idUnidad,horaEntrada:u.entrada.horaEntrada,extremo:u.entrada.extremo});V(()=>u.entrada,async c=>{t.idEntrada=c.idEntrada,t.unidad=c.unidad,t.horaEntrada=c.horaEntrada,t.extremo=c.extremo},{deep:!0});const O=c=>c!=null,k=c=>c!=null,y=D(""),h=D(""),U=D(""),v=async()=>{M("close"),t.reset()},p=async()=>{h.value=O(t.horaEntrada)?"":"Seleccione la hora de entrada",y.value=O(t.unidad)?"":"Seleccione una unidad",U.value=k(t.extremo)?"":"Seleccione una opción",!(h.value||y.value||U.value)&&t.post(X("servicio.registarHoraEntrada"),{onSuccess:()=>{v(),h.value="",y.value="",U.value=""}})};return(c,a)=>(C(),G(Z,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:v},{default:N(()=>[e("div",Te,[e("form",{onSubmit:a[5]||(a[5]=K(r=>d.op==="1"?p():c.update(),["prevent"]))},[e("div",Me,[e("h2",Be,S(d.title),1),a[12]||(a[12]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene todos los campos para poder registrar la hora de Entrada de una unidad ",-1)),e("div",Le,[e("div",Ae,[e("div",_e,[a[6]||(a[6]=e("label",{for:"idOperador",class:"block text-sm font-medium leading-6 text-gray-900"},"idEntrada",-1)),e("div",ze,[H(e("input",{type:"number",name:"idEntrada","onUpdate:modelValue":a[0]||(a[0]=r=>l(t).idEntrada=r),placeholder:"Ingrese id de hora de entrada",id:"idEntrada"+d.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ne),[[A,l(t).idEntrada]])])])]),e("div",Ve,[a[7]||(a[7]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",We,[B(l(Y),{modelValue:l(t).unidad,"onUpdate:modelValue":a[1]||(a[1]=r=>l(t).unidad=r),options:d.unidadesConOperador.map(r=>({label:r.numeroUnidad,value:r.idUnidad})),placeholder:"Seleccione la unidad",reduce:r=>r.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),y.value!=""?(C(),j("div",Ge,S(y.value),1)):T("",!0)]),e("div",Pe,[a[8]||(a[8]=e("label",{for:"horaEntrada",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de entrada",-1)),e("div",qe,[H(e("input",{type:"time",name:"horaEntrada",id:"horaEntrada"+d.op,"onUpdate:modelValue":a[2]||(a[2]=r=>l(t).horaEntrada=r),placeholder:"Seleccione la hora de entrada",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Je),[[A,l(t).horaEntrada]])]),h.value!=""?(C(),j("div",Ke,S(h.value),1)):T("",!0)]),e("div",Xe,[a[11]||(a[11]=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"¿Es de extremo?",-1)),e("div",Ze,[H(e("input",{type:"radio",id:"si",value:"SI","onUpdate:modelValue":a[3]||(a[3]=r=>l(t).extremo=r)},null,512),[[xe,l(t).extremo]]),a[9]||(a[9]=e("label",{for:"si",class:"radio-label"}," Sí",-1)),H(e("input",{type:"radio",id:"no",value:"NO","onUpdate:modelValue":a[4]||(a[4]=r=>l(t).extremo=r)},null,512),[[xe,l(t).extremo]]),a[10]||(a[10]=e("label",{for:"no",class:"radio-label"}," No",-1))]),U.value!=""?(C(),j("div",Qe,S(U.value),1)):T("",!0)])])]),e("div",Ye,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:v},a[13]||(a[13]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,et),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},a[14]||(a[14]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,tt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},at={class:"mt-2 bg-white p-4 shadow rounded-lg"},rt={class:"border-b border-gray-900/10 pb-12"},it={class:"text-base font-semibold leading-7 text-gray-900"},dt={class:"flex flex-wrap -mx-4"},st={class:"sm:col-span-2 w-56 px-4"},nt={class:"mt-2"},lt={key:0,class:"text-red-500 text-xs mt-1"},ut={class:"sm:col-span-2 px-4"},ct={class:"mt-2"},mt=["id"],gt={key:0,class:"text-red-500 text-xs"},pt={class:"sm:col-span-2 px-4"},bt={class:"mt-2"},ft=["id"],xt={key:0,class:"text-red-500 text-xs mt-1"},yt={class:"sm:col-span-2 px-4"},ht={class:"mt-2"},vt=["id"],Ut={class:"mt-6 flex items-center justify-end gap-x-6"},Ct=["id"],St=["disabled"],wt={__name:"FormularioRegCorte",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},corte:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:s}){const u=d,M=s,t=W({idCorte:u.corte.idCorte,unidad:u.corte.idUnidad,horaCorte:u.corte.horaCorte,causa:u.corte.corte,horaRegreso:u.corte.horaRegreso});V(()=>u.corte,async c=>{t.idCorte=c.idCorte,t.unidad=c.unidad,t.horaCorte=c.horaCorte,t.causa=c.causa,t.horaRegreso=c.horaRegreso},{deep:!0});const O=c=>c!=null,k=c=>typeof c=="string"&&c.trim()!=="",y=D(""),h=D(""),U=D("");D("");const v=async()=>{M("close"),t.reset()},p=async()=>{h.value=O(t.horaCorte)?"":"Seleccione la hora de corte",y.value=O(t.unidad)?"":"Seleccione una unidad",U.value=k(t.causa)?"":"Ingrese la causa del corte",!(h.value||y.value||U.value)&&t.post(X("servicio.registarCorte"),{onSuccess:()=>{v(),h.value="",y.value="",U.value=""}})};return(c,a)=>(C(),G(Z,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:v},{default:N(()=>[e("div",at,[e("form",{onSubmit:a[4]||(a[4]=K(r=>d.op==="1"?p():c.update(),["prevent"]))},[e("div",rt,[e("h2",it,S(d.title),1),a[9]||(a[9]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar la hora de corte de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",dt,[e("div",st,[a[5]||(a[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",nt,[B(l(Y),{modelValue:l(t).unidad,"onUpdate:modelValue":a[0]||(a[0]=r=>l(t).unidad=r),options:d.unidadesConOperador.map(r=>({label:r.numeroUnidad,value:r.idUnidad})),placeholder:"Seleccione la unidad",reduce:r=>r.value,class:"w-full"},null,8,["modelValue","options","reduce"])]),y.value!=""?(C(),j("div",lt,S(y.value),1)):T("",!0)]),e("div",ut,[a[6]||(a[6]=e("label",{for:"horaCorte",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de corte "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ct,[H(e("input",{type:"time",name:"horaCorte",id:"horaCorte"+d.op,"onUpdate:modelValue":a[1]||(a[1]=r=>l(t).horaCorte=r),placeholder:"Seleccione la hora de corte",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,mt),[[A,l(t).horaCorte]])]),h.value!=""?(C(),j("div",gt,S(h.value),1)):T("",!0)]),e("div",pt,[a[7]||(a[7]=e("label",{for:"causa",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Causa "),e("span",{class:"text-red-500"},"*")],-1)),e("div",bt,[H(e("input",{type:"text",name:"causa",id:"causa"+d.op,"onUpdate:modelValue":a[2]||(a[2]=r=>l(t).causa=r),placeholder:"Ingrese la causa del corte",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ft),[[A,l(t).causa]])]),U.value!=""?(C(),j("div",xt,S(U.value),1)):T("",!0)]),e("div",yt,[a[8]||(a[8]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora de regreso",-1)),e("div",ht,[H(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+d.op,"onUpdate:modelValue":a[3]||(a[3]=r=>l(t).horaRegreso=r),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,vt),[[A,l(t).horaRegreso]])])])])]),e("div",Ut,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:v},a[10]||(a[10]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Ct),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},a[11]||(a[11]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,St)])],32)])]),_:1},8,["show","max-width","closeable"]))}},$t={class:"mt-2 bg-white p-4 shadow rounded-lg"},Rt={class:"border-b border-gray-900/10 pb-12"},kt={class:"text-base font-semibold leading-7 text-gray-900"},Dt={class:"flex flex-wrap -mx-4"},Et={class:"sm:col-span-2 w-56 px-4"},Ot={class:"mt-2"},jt={key:0,class:"text-red-500 text-xs mt-1"},Ft={class:"sm:col-span-2 px-4"},It={class:"mt-2"},Ht=["id"],Tt={key:0,class:"text-red-500 text-xs mt-1"},Mt={class:"mt-6 flex items-center justify-end gap-x-6"},Bt=["id"],Lt=["disabled"],At={__name:"FormularioRegRegreso",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},formacionUnidades:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:s}){const u=d,M=s,t=W({idFormacionUnidades:u.formacionUnidades.idFormacionUnidades,unidad:u.formacionUnidades.idUnidad,horaRegreso:u.formacionUnidades.horaRegreso});V(()=>u.formacionUnidades,async v=>{t.idFormacionUnidades=v.idFormacionUnidades,t.unidad=v.unidad,t.horaRegreso=u.formacionUnidades.horaRegreso},{deep:!0});const O=v=>v!=null,k=D(""),y=D(""),h=async()=>{M("close"),t.reset()},U=async()=>{y.value=O(t.horaRegreso)?"":"Seleccione la hora de regreso",k.value=O(t.unidad)?"":"Seleccione una unidad",!(y.value||k.value)&&t.post(X("servicio.registrarHoraRegreso"),{onSuccess:()=>{h(),y.value="",k.value=""}})};return(v,p)=>(C(),G(Z,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:h},{default:N(()=>[e("div",$t,[e("form",{onSubmit:p[2]||(p[2]=K(c=>d.op==="1"?U():v.update(),["prevent"]))},[e("div",Rt,[e("h2",kt,S(d.title),1),p[5]||(p[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder registrar la hora de regreso del corte de una unidad. ",-1)),e("div",Dt,[e("div",Et,[p[3]||(p[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f(" Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ot,[B(l(Y),{options:d.unidad,label:"numeroUnidad",modelValue:l(t).unidad,"onUpdate:modelValue":p[0]||(p[0]=c=>l(t).unidad=c),reduce:c=>c.idUnidad,class:ae({"border-red-500":k.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),k.value?(C(),j("div",jt,S(k.value),1)):T("",!0)]),e("div",Ft,[p[4]||(p[4]=e("label",{for:"horaRegreso",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de regreso "),e("span",{class:"text-red-500"},"*")],-1)),e("div",It,[H(e("input",{type:"time",name:"horaRegreso",id:"horaRegreso"+d.op,"onUpdate:modelValue":p[1]||(p[1]=c=>l(t).horaRegreso=c),placeholder:"Seleccione la hora de regreso",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ht),[[A,l(t).horaRegreso]])]),y.value!=""?(C(),j("div",Tt,S(y.value),1)):T("",!0)])])]),e("div",Mt,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:h},p[6]||(p[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Bt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},p[7]||(p[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Lt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},_t={class:"mt-2 bg-white p-4 shadow rounded-lg"},zt={class:"border-b border-gray-900/10 pb-12"},Nt={class:"text-base font-semibold leading-7 text-gray-900"},Vt={class:"flex flex-wrap -mx-4"},Wt={class:"sm:col-span-2 w-56 px-4"},Gt={class:"mt-2"},Pt={key:0,class:"text-red-500 text-xs mt-1"},qt={class:"sm:col-span-2 px-4"},Jt={class:"mt-2"},Kt=["id"],Xt={key:0,class:"text-red-500 text-xs mt-1"},Zt={class:"sm:col-span-2 px-4"},Qt={class:"mt-2"},Yt=["id"],eo={key:0,class:"text-red-500 text-xs"},to={class:"sm:col-span-2 px-4"},oo={class:"mt-2"},ao=["id"],ro={key:0,class:"text-red-500 text-xs"},io={class:"sm:col-span-2 px-4"},so={class:"mt-2"},no=["id"],lo={class:"mt-6 flex items-center justify-end gap-x-6"},uo=["id"],co=["disabled"],mo={__name:"FormularioCastigo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},castigo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:s}){const u=d,M=s,t=W({idCastigo:u.castigo.idCastigo,castigo:u.castigo.castigo,observaciones:u.castigo.observaciones,horaInicio:u.castigo.horaInicio,horaFin:u.castigo.horaFin,unidad:u.castigo.idUnidad});V(()=>u.castigo,async a=>{t.idCastigo=a.idCastigo,t.castigo=a.castigo,t.observaciones=a.observaciones,t.horaInicio=a.horaInicio,t.horaFin=u.horaFin,t.unidad=u.unidad},{deep:!0});const O=a=>a!=null,k=a=>typeof a=="string"&&a.trim()!=="",y=D(""),h=D(""),U=D(""),v=D(""),p=async()=>{M("close"),t.reset()},c=async()=>{h.value=O(t.horaInicio)?"":"Seleccione la hora de inicio del castigo",y.value=O(t.unidad)?"":"Seleccione una unidad",U.value=k(t.castigo)?"":"Ingrese motivo del castigo",v.value=O(t.horaFin)?"":"Seleccione la hora de fin del castigo",!(h.value||y.value||U.value||v.value)&&t.post(X("servicio.registrarCastigo"),{onSuccess:()=>{p(),h.value="",y.value="",U.value="",v.value=""}})};return(a,r)=>(C(),G(Z,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:p},{default:N(()=>[e("div",_t,[e("form",{onSubmit:r[5]||(r[5]=K(b=>d.op==="1"?c():a.update(),["prevent"]))},[e("div",zt,[e("h2",Nt,S(d.title),1),r[11]||(r[11]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar el castigo. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",Vt,[e("div",Wt,[r[6]||(r[6]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Gt,[B(l(Y),{options:d.unidad,modelValue:l(t).unidad,"onUpdate:modelValue":r[0]||(r[0]=b=>l(t).unidad=b),reduce:b=>b.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ae({"border-red-500":y.value})},null,8,["options","modelValue","reduce","class"])]),y.value!=""?(C(),j("div",Pt,S(y.value),1)):T("",!0)]),e("div",qt,[r[7]||(r[7]=e("label",{for:"castigo",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Castigo "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Jt,[H(e("input",{type:"text",name:"castigo",id:"castigo"+d.op,"onUpdate:modelValue":r[1]||(r[1]=b=>l(t).castigo=b),placeholder:"Ingrese el motivo del castigo",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Kt),[[A,l(t).castigo]])]),U.value!=""?(C(),j("div",Xt,S(U.value),1)):T("",!0)]),e("div",Zt,[r[8]||(r[8]=e("label",{for:"horaInicio",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Qt,[H(e("input",{type:"time",name:"horaInicio",id:"horaInicio"+d.op,"onUpdate:modelValue":r[2]||(r[2]=b=>l(t).horaInicio=b),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Yt),[[A,l(t).horaInicio]])]),h.value!=""?(C(),j("div",eo,S(h.value),1)):T("",!0)]),e("div",to,[r[9]||(r[9]=e("label",{for:"horaFin",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",oo,[H(e("input",{type:"time",name:"horaFin",id:"horaFin"+d.op,"onUpdate:modelValue":r[3]||(r[3]=b=>l(t).horaFin=b),placeholder:"Seleccione la horade finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ao),[[A,l(t).horaFin]])]),v.value!=""?(C(),j("div",ro,S(v.value),1)):T("",!0)]),e("div",io,[r[10]||(r[10]=e("label",{for:"observaciones",class:"block text-sm font-medium leading-6 text-gray-900"},"Observaciones",-1)),e("div",so,[H(e("input",{type:"text",name:"observaciones",id:"observaciones"+d.op,"onUpdate:modelValue":r[4]||(r[4]=b=>l(t).observaciones=b),placeholder:"Ingrese sus observaciones",class:"block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,no),[[A,l(t).observaciones]])])])])]),e("div",lo,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:p},r[12]||(r[12]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,uo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},r[13]||(r[13]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,co)])],32)])]),_:1},8,["show","max-width","closeable"]))}},go={class:"mt-2 bg-white p-4 shadow rounded-lg"},po={class:"border-b border-gray-900/10 pb-12"},bo={class:"text-base font-semibold leading-7 text-gray-900"},fo={class:"flex flex-wrap -mx-4"},xo={class:"sm:col-span-2 w-56 px-4"},yo={class:"mt-2"},ho={key:0,class:"text-red-500 text-xs mt-1"},vo={class:"sm:col-span-2 px-4"},Uo={class:"mt-2"},Co=["id"],So=["value"],wo={key:0,class:"text-red-500 text-xs mt-1"},$o={class:"sm:col-span-2 px-4"},Ro={class:"mt-2"},ko=["id"],Do={key:0,class:"text-red-500 text-xs"},Eo={class:"sm:col-span-2 px-4"},Oo={class:"mt-2"},jo=["id"],Fo={class:"mt-6 flex items-center justify-end gap-x-6"},Io=["id"],Ho=["disabled"],To={__name:"FormularioRegUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:s}){const u=d,M=s,t=W({idUltimaCorrida:u.ultimaCorrida.idUltimaCorrida,unidad:u.ultimaCorrida.idUnidad,tipoUltimaCorrida:u.ultimaCorrida.idTipoUltimaCorrida,horaInicioUC:u.ultimaCorrida.horaInicioUC,horaFinUC:u.ultimaCorrida.horaFinUC});V(()=>u.ultimaCorrida,async c=>{t.idUltimaCorrida=c.idUltimaCorrida,t.tipoUltimaCorrida=c.tipoUltimaCorrida,t.horaInicioUC=c.horaInicioUC,t.horaFinUC=c.horaFinUC},{deep:!0});const O=c=>c!=null,k=c=>c!=null,y=D(""),h=D(""),U=D(""),v=async()=>{M("close"),t.reset()},p=async()=>{h.value=O(t.horaInicioUC)?"":"Seleccione la hora de inicio de la última corrida",y.value=O(t.unidad)?"":"Seleccione una unidad",U.value=k(t.tipoUltimaCorrida)?"":"Seleccione al un tipo de corrida",!(h.value||y.value||U.value)&&t.post(X("servicio.registrarUC"),{onSuccess:()=>{v(),h.value="",y.value="",U.value=""}})};return(c,a)=>(C(),G(Z,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:v},{default:N(()=>[e("div",go,[e("form",{onSubmit:a[4]||(a[4]=K(r=>d.op==="1"?p():c.update(),["prevent"]))},[e("div",po,[e("h2",bo,S(d.title),1),a[10]||(a[10]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar la última corrida de una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",fo,[e("div",xo,[a[5]||(a[5]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",yo,[B(l(Y),{options:d.unidad,modelValue:l(t).unidad,"onUpdate:modelValue":a[0]||(a[0]=r=>l(t).unidad=r),reduce:r=>r.idUnidad,label:"numeroUnidad",placeholder:"Seleccione la unidad",class:ae({"border-red-500":y.value})},null,8,["options","modelValue","reduce","class"])]),y.value?(C(),j("div",ho,S(y.value),1)):T("",!0)]),e("div",vo,[a[7]||(a[7]=e("label",{for:"tipoCorrida",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Tipo de corrida "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Uo,[H(e("select",{name:"tipoCorrida",id:"tipoCorrida"+d.op,"onUpdate:modelValue":a[1]||(a[1]=r=>l(t).tipoUltimaCorrida=r),placeholder:"Seleccione el tipo de la ultima corrida",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[a[6]||(a[6]=e("option",{value:"",disabled:"",selected:""},"Seleccione el tipo de corrida",-1)),(C(!0),j(le,null,ue(d.tipoUltimaCorrida,r=>(C(),j("option",{key:r.idTipoUltimaCorrida,value:r.idTipoUltimaCorrida},S(r.tipoUltimaCorrida),9,So))),128))],8,Co),[[ce,l(t).tipoUltimaCorrida]])]),U.value!=""?(C(),j("div",wo,S(U.value),1)):T("",!0)]),e("div",$o,[a[8]||(a[8]=e("label",{for:"horaInicioUC",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora de inicio "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ro,[H(e("input",{type:"time",name:"horaInicioUC",id:"horaInicioUC"+d.op,"onUpdate:modelValue":a[2]||(a[2]=r=>l(t).horaInicioUC=r),placeholder:"Seleccione la hora de inicio",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ko),[[A,l(t).horaInicioUC]])]),h.value!=""?(C(),j("div",Do,S(h.value),1)):T("",!0)]),e("div",Eo,[a[9]||(a[9]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},"Hora fin",-1)),e("div",Oo,[H(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+d.op,"onUpdate:modelValue":a[3]||(a[3]=r=>l(t).horaFinUC=r),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,jo),[[A,l(t).horaFinUC]])])])])]),e("div",Fo,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:v},a[11]||(a[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Io),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},a[12]||(a[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Ho)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Mo={class:"mt-2 bg-white p-4 shadow rounded-lg"},Bo={class:"border-b border-gray-900/10 pb-12"},Lo={class:"text-base font-semibold leading-7 text-gray-900"},Ao={class:"flex flex-wrap -mx-4"},_o={class:"sm:col-span-2 w-56 px-4"},zo={class:"mt-2"},No={key:0,class:"text-red-500 text-xs mt-1"},Vo={class:"sm:col-span-2 px-4"},Wo={class:"mt-2"},Go=["id"],Po={key:0,class:"text-red-500 text-xs mt-1"},qo={class:"mt-6 flex items-center justify-end gap-x-6"},Jo=["id"],Ko=["disabled"],Xo={__name:"FormularioRegresoUC",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},ultimaCorrida:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:s}){const u=d,M=s,t=W({idUltimaCorrida:u.ultimaCorrida.idUltimaCorrida,unidad:u.ultimaCorrida.idUnidad,horaFinUC:u.ultimaCorrida.horaFinUC});V(()=>u.ultimaCorrida,async v=>{t.idUltimaCorrida=v.idUltimaCorrida,t.horaFinUC=v.horaFinUC},{deep:!0});const O=v=>v!=null,k=D(""),y=D(""),h=async()=>{M("close"),t.reset()},U=async()=>{y.value=O(t.horaFinUC)?"":"Seleccione la hora de finalizacion de la última corrida",k.value=O(t.unidad)?"":"Seleccione una unidad",!(y.value||k.value)&&t.post(X("servicio.regresoUC"),{onSuccess:()=>{h(),y.value="",k.value=""}})};return(v,p)=>(C(),G(Z,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:h},{default:N(()=>[e("div",Mo,[e("form",{onSubmit:p[2]||(p[2]=K(c=>d.op==="1"?U():v.update(),["prevent"]))},[e("div",Bo,[e("h2",Lo,S(d.title),1),p[5]||(p[5]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[f("Rellene el formulario para poder registrar la hora de regreso de la última corrida de la unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),f(" son obligatorios. ")],-1)),e("div",Ao,[e("div",_o,[p[3]||(p[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",zo,[B(l(Y),{options:d.unidad,modelValue:l(t).unidad,"onUpdate:modelValue":p[0]||(p[0]=c=>l(t).unidad=c),label:"numeroUnidad",reduce:c=>c.idUnidad,class:ae({"border-red-500":k.value}),placeholder:"Seleccione la unidad"},null,8,["options","modelValue","reduce","class"])]),k.value!==""?(C(),j("div",No,S(k.value),1)):T("",!0)]),e("div",Vo,[p[4]||(p[4]=e("label",{for:"horaFinUC",class:"block text-sm font-medium leading-6 text-gray-900"},[f("Hora fin "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Wo,[H(e("input",{type:"time",name:"horaFinUC",id:"horaFinUC"+d.op,"onUpdate:modelValue":p[1]||(p[1]=c=>l(t).horaFinUC=c),placeholder:"Seleccione la hora de finalización",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Go),[[A,l(t).horaFinUC]])]),k.value!=""?(C(),j("div",Po,S(k.value),1)):T("",!0)])])]),e("div",qo,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:h},p[6]||(p[6]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,Jo),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},p[7]||(p[7]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,Ko)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Zo={class:"mt-2 bg-white p-4 shadow rounded-lg"},Qo={class:"text-base font-semibold leading-7 text-gray-900"},Yo={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ea={class:"sm:col-span-2 px-4"},ta={class:"mt-2"},oa=["value"],aa={class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},ra={class:"sm:col-span-2 px-4"},ia={class:"mt-2"},da=["value"],sa={key:0,class:"text-red-500 text-xs mt-1 mb-4"},na={class:"mt-6 flex items-center justify-end gap-x-6"},la=["id"],ua=["disabled"],ca={__name:"FormularioDomingo",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},rolServicio:{type:Object,default:()=>({})},unidad:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(d,{emit:s}){const u=d,M=s,t=W({idRolServicio:u.rolServicio.idRolServicio,unidad:[],trabajaDomingo:u.rolServicio.trabajaDomingo,unidadesSi:[],unidadesNo:[]});V(()=>u.rolServicio,async r=>{t.idRolServicio=r.idRolServicio,t.trabajaDomingo=r.trabajaDomingo},{deep:!0});const O=async()=>{M("close"),t.reset()},k=(r,b)=>r.length>0||b.length>0,y=D(""),h=async()=>{y.value=k(t.unidadesSi,t.unidadesNo)?"":"Seleccione al menos una unidad en cualquiera de los select.",!y.value&&t.post(X("servicio.trabDomingo"),{data:t.data,onSuccess:()=>{O(),y.value=""}})},U=()=>{const r=new Date,b=r.getDay(),I=b===0?7:b,z=new Date(r);return z.setDate(r.getDate()-I),z.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},v=()=>{const r=new Date,I=7-r.getDay(),z=new Date(r);return z.setDate(r.getDate()+I),z.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},p=U(),c=v();function a(r){return r.sort((b,I)=>{const z=parseInt(b.numeroUnidad.split("-")[1],10),re=parseInt(I.numeroUnidad.split("-")[1],10);return z-re})}return V(()=>u.unidad,r=>{t.unidad=a([...r])},{immediate:!0}),(r,b)=>(C(),G(Z,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:O},{default:N(()=>[e("div",Zo,[e("form",{onSubmit:b[2]||(b[2]=K(I=>d.op==="1"?h():r.update(),["prevent"]))},[e("h2",Qo,S(d.title),1),e("p",Yo,[b[3]||(b[3]=f("Seleccione las unidades que trabajaron el : ")),e("strong",null,S(l(p)),1),b[4]||(b[4]=f(". "))]),e("div",ea,[b[6]||(b[6]=e("label",{for:"unidadesSi",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ta,[H(e("select",{name:"unidadesSi",id:"unidadesSi","onUpdate:modelValue":b[0]||(b[0]=I=>l(t).unidadesSi=I),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[b[5]||(b[5]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(C(!0),j(le,null,ue(l(t).unidad,I=>(C(),j("option",{key:I.idUnidad,value:I.idUnidad},S(I.numeroUnidad),9,oa))),128))],512),[[ce,l(t).unidadesSi]])])]),e("p",aa,[b[7]||(b[7]=f("Seleccione las unidades que trabajarán el próximo: ")),e("strong",null,S(l(c)),1),b[8]||(b[8]=f(". "))]),e("div",ra,[b[10]||(b[10]=e("label",{for:"unidadesNo",class:"block text-sm font-medium leading-6 text-gray-900"},"Unidad",-1)),e("div",ia,[H(e("select",{name:"unidadesNo",id:"unidadesNo","onUpdate:modelValue":b[1]||(b[1]=I=>l(t).unidadesNo=I),multiple:"",size:"10",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[b[9]||(b[9]=e("option",{disabled:""},"Seleccione una o más unidades",-1)),(C(!0),j(le,null,ue(l(t).unidad,I=>(C(),j("option",{key:I.idUnidad,value:I.idUnidad},S(I.numeroUnidad),9,da))),128))],512),[[ce,l(t).unidadesNo]])])]),y.value?(C(),j("div",sa,S(y.value),1)):T("",!0),e("div",na,[e("button",{type:"button",id:"cerrar"+d.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:O},b[11]||(b[11]=[e("i",{class:"fa-solid fa-ban"},null,-1),f(" Cancelar")]),8,la),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},b[12]||(b[12]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),f("Guardar")]),8,ua)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ma={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},ga={class:"py-0 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-2"},pa={class:"py-1 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0 mb-1"},ba={class:"overflow-x-auto"},fa={class:"text-sm leading-normal border-b border-gray-300"},xa={class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"2"},q="xl",J=!0,Da={__name:"FormarUnidades",props:{message:{String,default:""},color:{String,default:""},ruta:{type:Object},unidad:{type:Object},unidadesConOperador:{type:Object},operador:{type:Object},directivo:{type:Object},rolServicio:{type:Object},castigo:{type:Object},entrada:{type:Object},corte:{type:Object},ultimaCorrida:{type:Object},tipoUltimaCorrida:{type:Object},usuario:{type:Object}},setup(d){se.use(ye),se.use(ye);const s=d,u=new Date().toLocaleDateString(),M=t(new Date().getDay());function t(x){return["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][x]}Oe(()=>s.entrada.filter(x=>new Date(x.fechaRegistro).toLocaleDateString()===u));const O=()=>{je(()=>{const i=$("#formacionTablaId").DataTable().rows({search:"applied",page:"current"}).data();if(!i.length){console.warn("No hay datos para exportar.");return}const w=new Date().toISOString().split("T")[0],F=Object.fromEntries(s.ruta.map(g=>[g.idRuta,g.nombreRuta])),m=Object.fromEntries(s.rolServicio.map(g=>[g.idUnidad,g.trabajaDomingo])),o=Object.fromEntries(s.unidad.map(g=>[g.idUnidad,g.numeroUnidad])),n=Object.fromEntries(s.directivo.map(g=>[g.idDirectivo,g.nombre_completo])),E=Object.fromEntries(s.entrada.map(g=>[g.idUnidad,{horaEntrada:g.horaEntrada,tipoEntrada:g.tipoEntrada,extremo:g.extremo,created_at:g.created_at}]));Object.fromEntries(s.corte.map(g=>[g.idUnidad,[]]));const _=Object.fromEntries(s.ultimaCorrida.map(g=>[g.idUnidad,{tipoCorrida:g.idTipoUltimaCorrida,horaInicioUC:g.horaInicioUC,horaFinUC:g.horaFinUC,created_at:g.created_at}]));Object.fromEntries(s.castigo.map(g=>[g.idUnidad,[]]));const ee=Object.fromEntries(s.operador.map(g=>[g.idOperador,g.nombre_completo])),me=Object.fromEntries(s.tipoUltimaCorrida.map(g=>[g.idTipoUltimaCorrida,g.tipoUltimaCorrida])),P=g=>{if(!g)return"";const[R,Q]=g.split(":");return`${R}:${Q}`},$e=i.toArray().reduce((g,R)=>{var be,fe;const Q=E[R.idUnidad]||{},Ee=s.corte.filter(L=>L.idUnidad===R.idUnidad&&L.created_at.split("T")[0]===w),te=_[R.idUnidad]||{},pe=s.castigo.filter(L=>L.idUnidad===R.idUnidad&&L.created_at.split("T")[0]===w);m[R.idUnidad];const ie=((be=Q.created_at)==null?void 0:be.split("T")[0])===w,de=((fe=te.created_at)==null?void 0:fe.split("T")[0])===w;return pe.length>0,g[R.idUnidad]||(g[R.idUnidad]={ID:R.idUnidad,Ruta:F[R.idRuta]||"N/A","Trab. Domingo":m[R.idUnidad]||"Sin Asignar",Unidad:o[R.idUnidad]||"","Socio/Prestador":n[R.idDirectivo]||"","Hr. Entrada":ie&&P(Q.horaEntrada)||"","Tipo Entrada":ie&&Q.tipoEntrada||"",Extremo:ie&&Q.extremo||"","Hr. Corte":"",Causa:"","Hr. Regreso":"","Tipo De Corrida":de&&me[te.tipoCorrida]||"","Hr. Inicio UC":de&&P(te.horaInicioUC)||"","Hr. Regreso UC":de&&P(te.horaFinUC)||"","Hr. Inicio":"","Hr. Finaliza":"",Motivo:"","Otras Observaciones":"",Operador:ee[R.idOperador]||"Sin Asignar"}),Ee.forEach(L=>{g[R.idUnidad]["Hr. Corte"]+=(g[R.idUnidad]["Hr. Corte"]?", ":"")+P(L.horaCorte),g[R.idUnidad].Causa+=(g[R.idUnidad].Causa?", ":"")+L.causa,g[R.idUnidad]["Hr. Regreso"]+=(g[R.idUnidad]["Hr. Regreso"]?", ":"")+P(L.horaRegreso)}),pe.forEach(L=>{g[R.idUnidad]["Hr. Inicio"]+=(g[R.idUnidad]["Hr. Inicio"]?", ":"")+P(L.horaInicio),g[R.idUnidad]["Hr. Finaliza"]+=(g[R.idUnidad]["Hr. Finaliza"]?", ":"")+P(L.horaFin),g[R.idUnidad].Motivo+=(g[R.idUnidad].Motivo?", ":"")+L.castigo,g[R.idUnidad]["Otras Observaciones"]+=(g[R.idUnidad]["Otras Observaciones"]?", ":"")+L.observaciones}),g},{}),Re=Object.values($e),ke=ne.json_to_sheet(Re),ge=ne.book_new();ne.book_append_sheet(ge,ke,"Formación De Unidades");const De=new Date().toISOString().split("T")[0];Ie(ge,`Formación_De_Unidades_${De}.xlsx`)})},k=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Formación De Unidades",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>O()},{title:"Formación De Unidades",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}}],y=[{data:null,render:function(x,i,w,F){return F.row+1}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.ruta.find(n=>n.idRuta===m.idRuta);return o?o.nombreRuta:""}else return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.rolServicio.filter(n=>n.idUnidad===m.idUnidad);return o.length>0?(o.sort((n,E)=>new Date(E.created_at)-new Date(n.created_at)),o[0].trabajaDomingo):'<span style="color: red;">Sin asignar</span>'}else return"Unidad no encontrada"}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);return m?m.numeroUnidad:""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.directivo.find(n=>n.idDirectivo===m.idDirectivo);return o?o.nombre_completo:""}else return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.entrada.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0)return o.map(E=>E.horaEntrada.substring(0,5)).join(", ")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.entrada.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0)return o.map(E=>E.tipoEntrada).join(", ")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.entrada.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0)return o.map(E=>E.extremo).join(", ")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.corte.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0)return o.map((E,_)=>`
            <div style="${o.length>1&&_!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${E.horaCorte.substring(0,5)}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.corte.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0)return o.map((E,_)=>`
            <div style="${o.length>1&&_!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${E.causa}</div>
            </div>
          `).join("")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.corte.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0)return o.map((E,_)=>{const ee=E.horaRegreso?E.horaRegreso.substring(0,5):"";return`
            <div style="${o.length>1&&_!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
              <div>${ee}</div>
            </div>
          `}).join("")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.ultimaCorrida.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0){const n=s.tipoUltimaCorrida.find(E=>E.idTipoUltimaCorrida===o[0].idTipoUltimaCorrida);if(n)return n.tipoUltimaCorrida}}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.ultimaCorrida.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0){const n=o[0].horaInicioUC;return n?n.substring(0,5):""}}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.ultimaCorrida.filter(n=>n.idUnidad===m.idUnidad&&new Date(n.created_at).toLocaleDateString()===u);if(o.length>0){const n=o[0].horaFinUC;if(n)return n.substring(0,5)}}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.castigo.filter(o=>o.idUnidad===x&&new Date(o.created_at).toLocaleDateString()===u);if(m.length>0){const o=m.map(n=>({horaInicio:n.horaInicio?n.horaInicio.substring(0,5):""}));return o.map((n,E)=>`
          <div style="${o.length>1&&E!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${n.horaInicio}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.castigo.filter(o=>o.idUnidad===x&&new Date(o.created_at).toLocaleDateString()===u);if(m.length>0){const o=m.map(n=>({horaFin:n.horaFin?n.horaFin.substring(0,5):""}));return o.map((n,E)=>`
          <div style="${o.length>1&&E!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">
            <div>${n.horaFin}</div>
          </div>
        `).join("")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.castigo.filter(o=>o.idUnidad===x&&new Date(o.created_at).toLocaleDateString()===u);if(m.length>0){const o=m.map(n=>n.castigo||"");return o.map((n,E)=>`<div style="${o.length>1&&E!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${n}</div>`).join("")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.castigo.filter(o=>o.idUnidad===x&&new Date(o.created_at).toLocaleDateString()===u);if(m.length>0){const o=m.map(n=>n.observaciones||"");return o.map((n,E)=>`<div style="${o.length>1&&E!==o.length-1?"border-bottom: 1px solid #b2b2b2;":""}">${n}</div>`).join("")}return""}},{data:"idUnidad",render:function(x,i,w,F){const m=s.unidad.find(o=>o.idUnidad===x);if(m){const o=s.operador.find(n=>n.idOperador===m.idOperador);return o?o.nombre_completo:'<span style="color: red;">Sin asignar</span>'}else return""}}],h=D(!1),U=D(!1),v=D(!1),p=D(!1),c=D(!1),a=D(!1),r=D(!1);D(!1),W({});const b=()=>{h.value=!1},I=()=>{U.value=!1},z=()=>{v.value=!1},re=()=>{p.value=!1},ve=()=>{c.value=!1},Ue=()=>{a.value=!1},Ce=()=>{r.value=!1},Se=()=>{oe.fire({title:"¿Seguro de actualizar el Rol de Domingo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(x=>{x.isConfirmed&&he.Inertia.post(route("servicio.cambiarRolServicio"),{},{onError:i=>{oe.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de servicio",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de servicio:",i)}})})},we=()=>{oe.fire({title:"¿Seguro de actualizar el Rol de Ruta?",text:'Las unidades que están en la ruta "LIBRAMIENTO - PLAZA DEL VALLE" se cambiarán a la ruta "ESMERALDA - COL. JARDIN" y viceversa',icon:"warning",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#d33",confirmButtonText:"Sí, Actualizar",cancelButtonText:"Cancelar"}).then(x=>{x.isConfirmed&&he.Inertia.post(route("servicio.actualizarRolRuta"),{_method:"PUT"},{onError:i=>{oe.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el rol de rutas",confirmButtonText:"OK"}),console.error("Error al actualizar el rol de rutas:",i)}})})};return(x,i)=>(C(),G(He,{title:"Formar Unidades",usuario:s.usuario},{default:N(()=>[e("div",ma,[i[25]||(i[25]=e("h2",{class:"font-bold text-center text-xl pt-0"}," Formar Unidades",-1)),i[26]||(i[26]=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-1.5"},null,-1)),B(Fe),e("div",ga,[e("button",{class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",onClick:i[0]||(i[0]=w=>h.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[7]||(i[7]=[e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1),f(" Registrar Entrada ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:i[1]||(i[1]=w=>U.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[8]||(i[8]=[e("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1),f(" Registrar Corte ")])),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",onClick:i[2]||(i[2]=w=>p.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[9]||(i[9]=[e("i",{class:"fa fa-history","aria-hidden":"true"},null,-1),f(" Registrar Regreso ")])),e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded",onClick:i[3]||(i[3]=w=>v.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[10]||(i[10]=[e("i",{class:"fa fa-bullhorn","aria-hidden":"true"},null,-1),f(" Registrar castigo ")])),e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:i[4]||(i[4]=w=>c.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[11]||(i[11]=[e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1),f(" Registrar UC ")]))]),e("div",pa,[e("button",{class:"bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded",onClick:i[5]||(i[5]=w=>a.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[12]||(i[12]=[e("i",{class:"fa fa-arrow-circle-left","aria-hidden":"true"},null,-1),f(" Regreso UC ")])),e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:i[6]||(i[6]=w=>r.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},i[13]||(i[13]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),f(" Rol Domingo ")])),e("button",{class:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",onClick:Se},i[14]||(i[14]=[e("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1),f(" Actualizar Rol Servicio ")])),e("button",{class:"bg-cyan-500 hover:bg-cyan-600 text-white font-semibold py-2 px-4 rounded",onClick:we},i[15]||(i[15]=[e("i",{class:"fa fa-map","aria-hidden":"true"},null,-1),f(" Actualizar Rol Rutas ")]))]),e("div",ba,[B(l(se),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"formacionTablaId",name:"formacionTablaId",columns:y,data:d.unidad,options:{responsive:!1,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)"},buttons:[k],paging:!1,lengthMenu:[]}},{default:N(()=>[e("thead",null,[e("tr",fa,[i[16]||(i[16]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),e("th",xa,"FECHA: "+S(l(M)+", "+l(u)),1),i[17]||(i[17]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),i[18]||(i[18]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1)),i[19]||(i[19]=e("th",{class:"py-2 px-4 bg-green-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300 text-left",colspan:"3"},"ENTRADA",-1)),i[20]||(i[20]=e("th",{class:"py-2 px-4 bg-red-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"CORTE",-1)),i[21]||(i[21]=e("th",{class:"py-2 px-4 bg-blue-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"3"},"ÚLTIMAS CORRIDAS",-1)),i[22]||(i[22]=e("th",{class:"py-2 px-4 bg-yellow-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300",colspan:"4"},"CASTIGO",-1)),i[23]||(i[23]=e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"},null,-1))]),i[24]||(i[24]=e("tr",{class:"text-sm leading-normal border-b border-gray-300"},[e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," ID "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Ruta "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Trab. DOMINGO "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Unidad "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Socio / Prestador "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo entrada "),e("th",{class:"py-2 px-4 bg-green-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Extremo "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. Corte "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Causa "),e("th",{class:"py-2 px-4 bg-red-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Tipo de Corrida "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-blue-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. regreso "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. inicio "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Hr. finaliza "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Motivo "),e("th",{class:"py-2 px-4 bg-yellow-100 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Otras observaciones "),e("th",{class:"py-2 px-4 bg-sky-200 font-bold uppercase text-sm text-grey-600 border-r border-grey-300"}," Operador ")],-1))])]),_:1},8,["data","options"])])]),B(ot,{show:h.value,"max-width":q,closeable:J,onClose:b,title:"Registrar hora de entrada",op:"1",modal:"modalCreate",entrada:s.entrada,unidad:s.unidad,unidadesConOperador:s.unidadesConOperador},null,8,["show","entrada","unidad","unidadesConOperador"]),B(wt,{show:U.value,"max-width":q,closeable:J,onClose:I,title:"Registrar hora de corte",op:"1",modal:"modalCreate",corte:s.corte,unidad:s.unidad,unidadesConOperador:s.unidadesConOperador},null,8,["show","corte","unidad","unidadesConOperador"]),B(At,{show:p.value,"max-width":q,closeable:J,onClose:re,title:"Registrar hora de regreso de corte",op:"1",modal:"modalCreate",unidad:s.unidad},null,8,["show","unidad"]),B(mo,{show:v.value,"max-width":q,closeable:J,onClose:z,title:"Registrar un castigo",op:"1",modal:"modalCreate",unidad:s.unidad,castigo:s.castigo},null,8,["show","unidad","castigo"]),B(To,{show:c.value,"max-width":q,closeable:J,onClose:ve,title:"Registrar última corrida",op:"1",modal:"modalCreate",ultimaCorrida:s.ultimaCorrida,tipoUltimaCorrida:s.tipoUltimaCorrida,unidad:s.unidad},null,8,["show","ultimaCorrida","tipoUltimaCorrida","unidad"]),B(Xo,{show:a.value,"max-width":q,closeable:J,onClose:Ue,title:"Registrar hora de regreso de última corrida",op:"1",modal:"modalCreate",ultimaCorrida:s.ultimaCorrida,unidad:s.unidad},null,8,["show","ultimaCorrida","unidad"]),B(ca,{show:r.value,"max-width":q,closeable:J,onClose:Ce,title:"Registrar las unidades que trabajaran domingo",op:"1",modal:"modalCreate",rolServicio:s.rolServicio,unidad:s.unidad},null,8,["show","rolServicio","unidad"])]),_:1},8,["usuario"]))}};export{Da as default};
