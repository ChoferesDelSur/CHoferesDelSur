import{_ as se}from"./PrincipalLayout-BqyyXlZl.js";import{e as L,x as V,r as k,o as u,a as q,w as M,b as e,g as H,t as v,k as y,j as D,u as l,v as G,h as x,i as j,F as I,y as A,z as T,C as Y,D as ee,f as ne,d as N,A as te}from"./app-DKY7pHet.js";import"./buttons.print-cnAWLXhX.js";import{S as J}from"./sweetalert2.esm.all-BGf-Fe8G.js";import{_ as X}from"./Modal-BynIwB2A.js";import{_ as re}from"./Mensaje-DAM774KY.js";import{E as le}from"./jspdf.plugin.autotable-CneeF7WA.js";import{u as K,w as ue}from"./xlsx-DjuO7_Ju.js";/* empty css                                                */const ce={class:"mt-2 bg-white p-4 shadow rounded-lg"},me={class:"border-b border-gray-900/10 pb-12"},pe={class:"text-base font-semibold leading-7 text-gray-900"},ge={class:"flex flex-wrap -mx-4"},be={class:"sm:col-span-2"},fe={class:"sm:col-span-1",hidden:""},xe={class:"mt-2"},ye=["id"],ve={class:"sm:col-span-2 px-4"},he={class:"mt-2"},Ue=["id"],we={key:0,class:"text-red-500 text-xs mt-1"},$e={class:"sm:col-span-2 px-4"},Se={class:"mt-2"},ke=["id"],Oe=["value"],De={key:0,class:"text-red-500 text-xs mt-1"},_e={class:"sm:col-span-2 px-4"},Ee={class:"mt-2"},Ce=["id"],je=["value"],Re={class:"sm:col-span-2 px-4"},Be={class:"mt-2"},Ie=["id"],Ae=["value"],Te={key:0,class:"text-red-500 text-xs mt-1"},Ne={class:"mt-6 flex items-center justify-end gap-x-6"},Me=["id"],Fe=["disabled"],We={__name:"FormularioUnidades",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},ruta:{type:Object,default:()=>({})},directivo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:n}){const g=o,C=n,t=L({idUnidad:g.unidad.idUnidad,numeroUnidad:g.unidad.numeroUnidad,ruta:g.unidad.idRuta,operador:g.unidad.idOperador,directivo:g.directivo.idDirectivo});V(()=>g.unidad,async i=>{t.idUnidad=i.idUnidad,t.numeroUnidad=i.numeroUnidad,t.ruta=i.idRuta,t.operador=i.idOperador,t.directivo=i.idDirectivo},{deep:!0});const c=k(""),m=k("");k("");const b=k(""),h=async()=>{C("close"),t.reset()},_=i=>typeof i=="string"&&i.trim()!=="",E=i=>i!=null,r=async()=>{c.value=_(t.numeroUnidad)?"":"Ingrese el número de la unidad",m.value=E(t.ruta)?"":"Selecciones la ruta",b.value=E(t.directivo)?"":"Seleccione el dueño de la unidad",!(c.value||m.value||b.value)&&t.post(route("principal.addUnidad"),{onSuccess:()=>{h(),c.value="",m.value="",b.value=""}})};return(i,d)=>(u(),q(X,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:h},{default:M(()=>[e("div",ce,[e("form",{onSubmit:H(r,["prevent"])},[e("div",me,[e("h2",pe,v(o.title),1),d[13]||(d[13]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},[y("Rellene el formulario para poder registrar una unidad. Los campos con "),e("span",{class:"text-red-500"},"*"),y(" son obligatorios ")],-1)),e("div",ge,[e("div",be,[e("div",fe,[d[5]||(d[5]=e("label",{for:"idUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idUnidad",-1)),e("div",xe,[D(e("input",{type:"number",name:"idUnidad","onUpdate:modelValue":d[0]||(d[0]=a=>l(t).idUnidad=a),placeholder:"Ingrese id de la unidad",id:"idUnidad"+o.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,ye),[[G,l(t).idUnidad]])])])]),e("div",ve,[d[6]||(d[6]=e("label",{for:"numeroUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Número de unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",he,[D(e("input",{type:"text",name:"numeroUnidad",id:"numeroUnidad"+o.op,"onUpdate:modelValue":d[1]||(d[1]=a=>l(t).numeroUnidad=a),placeholder:"Ingrese el número de la unidad",class:"block w-60 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ue),[[G,l(t).numeroUnidad]])]),c.value!=""?(u(),x("div",we,v(c.value),1)):j("",!0)]),e("div",$e,[d[8]||(d[8]=e("label",{for:"ruta",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Ruta "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Se,[D(e("select",{name:"ruta",id:"ruta"+o.op,"onUpdate:modelValue":d[2]||(d[2]=a=>l(t).ruta=a),placeholder:"Seleccione la ruta",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[d[7]||(d[7]=e("option",{value:"",disabled:"",selected:""},"Seleccione la ruta",-1)),(u(!0),x(I,null,A(o.ruta,a=>(u(),x("option",{key:a.idRuta,value:a.idRuta},v(a.nombreRuta),9,Oe))),128))],8,ke),[[T,l(t).ruta]])]),m.value!=""?(u(),x("div",De,v(m.value),1)):j("",!0)]),e("div",_e,[d[10]||(d[10]=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},"Operador",-1)),e("div",Ee,[D(e("select",{name:"operador",id:"operador"+o.op,"onUpdate:modelValue":d[3]||(d[3]=a=>l(t).operador=a),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[d[9]||(d[9]=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador para esta unidad",-1)),(u(!0),x(I,null,A(o.operadoresDisp,a=>(u(),x("option",{key:a.idOperador,value:a.idOperador},v(a.nombre_completo),9,je))),128))],8,Ce),[[T,l(t).operador]])])]),e("div",Re,[d[12]||(d[12]=e("label",{for:"directivo",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Dueño de la unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Be,[D(e("select",{name:"directivo",id:"directivo"+o.op,"onUpdate:modelValue":d[4]||(d[4]=a=>l(t).directivo=a),placeholder:"Seleccione al dueño de la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[d[11]||(d[11]=e("option",{value:"",disabled:"",selected:""},"Seleccione al dueño de la unidad",-1)),(u(!0),x(I,null,A(o.directivo,a=>(u(),x("option",{key:a.idDirectivo,value:a.idDirectivo},v(a.nombre_completo),9,Ae))),128))],8,Ie),[[T,l(t).directivo]])]),b.value!=""?(u(),x("div",Te,v(b.value),1)):j("",!0)])])]),e("div",Ne,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:h},d[14]||(d[14]=[e("i",{class:"fa-solid fa-ban"},null,-1),y(" Cancelar")]),8,Me),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},d[15]||(d[15]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),y("Guardar")]),8,Fe)])],32)])]),_:1},8,["show","max-width","closeable"]))}},ze={class:"mt-2 bg-white p-4 shadow rounded-lg"},Le={class:"border-b border-gray-900/10 pb-12"},qe={class:"text-base font-semibold leading-7 text-gray-900"},Pe={class:"flex flex-wrap -mx-4"},Qe={class:"sm:col-span-2 px-4"},Ge={class:"mt-2"},Ve=["id"],He=["value"],Xe={key:0,class:"text-red-500 text-xs mt-1"},Ye={class:"sm:col-span-2 px-4"},Je={class:"mt-2"},Ke=["id"],Ze=["value"],et={key:0,class:"text-red-500 text-xs mt-1"},tt={class:"mt-6 flex items-center justify-end gap-x-6"},dt=["id"],at=["disabled"],ot={__name:"FormularioAsignarOperador",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},unidadesDisp:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:n}){const g=o,C=n,t=L({idUnidad:g.unidad.idUnidad,unidad:g.unidad.idUnidad,operador:g.unidad.idOperador});V(()=>g.unidad,async r=>{t.idUnidad=r.idUnidad,t.unidad=r.idUnidad,t.operador=r.idOperador},{deep:!0});const c=k(""),m=k(""),b=async()=>{C("close"),t.reset()},h=r=>r!=null,_=async()=>{c.value=h(t.unidad)?"":"Seleccione la unidad",m.value=h(t.operador)?"":"Seleccione el operador",!(c.value||m.value)&&t.post(route("principal.asignarOperador"),{onSuccess:()=>{b(),c.value="",m.value=""}})},E=async()=>{if(numeroUnidadError.value=h(t.unidad)?"":"Seleccione la unidad",m.value=h(t.operador)?"":"Seleccione el operador",!(c.value||m.value)){var r=document.getElementById("idUnidad2").value;console.log("idUnidad:"+r),t.put(route("principal.actualizarUnidad",r),{onSuccess:()=>{b(),console.log("idUnidad Editando:"+r),c.value="",m.value=""}})}};return(r,i)=>(u(),q(X,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:b},{default:M(()=>[e("div",ze,[e("form",{onSubmit:i[2]||(i[2]=H(d=>o.op==="1"?_():E(),["prevent"]))},[e("div",Le,[e("h2",qe,v(o.title),1),i[7]||(i[7]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Rellene el formulario para poder asignar un operador a una unidad. ",-1)),e("div",Pe,[e("div",Qe,[i[4]||(i[4]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ge,[D(e("select",{name:"unidad",id:"unidad"+o.op,"onUpdate:modelValue":i[0]||(i[0]=d=>l(t).unidad=d),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[i[3]||(i[3]=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1)),(u(!0),x(I,null,A(o.unidadesDisp,d=>(u(),x("option",{key:d.idUnidad,value:d.idUnidad},v(d.numeroUnidad),9,He))),128))],8,Ve),[[T,l(t).unidad]])]),c.value!=""?(u(),x("div",Xe,v(c.value),1)):j("",!0)]),e("div",Ye,[i[6]||(i[6]=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Operador "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Je,[D(e("select",{name:"operador",id:"operador"+o.op,"onUpdate:modelValue":i[1]||(i[1]=d=>l(t).operador=d),placeholder:"Seleccione al operador",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[i[5]||(i[5]=e("option",{value:"",disabled:"",selected:""},"Seleccione al operador para esta unidad",-1)),(u(!0),x(I,null,A(o.operadoresDisp,d=>(u(),x("option",{key:d.idOperador,value:d.idOperador},v(d.nombre_completo),9,Ze))),128))],8,Ke),[[T,l(t).operador]])]),m.value!=""?(u(),x("div",et,v(m.value),1)):j("",!0)])])]),e("div",tt,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:b},i[8]||(i[8]=[e("i",{class:"fa-solid fa-ban"},null,-1),y(" Cancelar")]),8,dt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},i[9]||(i[9]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),y("Guardar")]),8,at)])],32)])]),_:1},8,["show","max-width","closeable"]))}},it={class:"mt-2 bg-white p-4 shadow rounded-lg"},st={class:"border-b border-gray-900/10 pb-12"},nt={class:"text-base font-semibold leading-7 text-gray-900"},rt={class:"flex flex-wrap -mx-4"},lt={class:"sm:col-span-2 px-4"},ut={class:"mt-2"},ct=["id"],mt=["value"],pt={key:0,class:"text-red-500 text-xs mt-1"},gt={class:"mt-6 flex items-center justify-end gap-x-6"},bt=["id"],ft=["disabled"],xt={__name:"FormularioQuitarOperador",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},unidadesConOperador:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:n}){const g=o,C=n,t=L({idUnidad:g.unidad.idUnidad,unidad:g.unidad.idUnidad,operador:g.unidad.idOperador});V(()=>g.unidad,async r=>{t.idUnidad=r.idUnidad,t.unidad=r.idUnidad,t.operador=r.idOperador},{deep:!0});const c=k(""),m=k(""),b=async()=>{C("close"),t.reset()},h=r=>r!=null,_=async()=>{c.value=h(t.unidad)?"":"Seleccione la unidad",!c.value&&t.post(route("principal.quitarOperador"),{onSuccess:()=>{b(),c.value=""}})},E=async()=>{if(numeroUnidadError.value=h(t.unidad)?"":"Seleccione la unidad",m.value=h(t.operador)?"":"Seleccione el operador",!(c.value||m.value)){var r=document.getElementById("idUnidad2").value;console.log("idUnidad:"+r),t.put(route("principal.actualizarUnidad",r),{onSuccess:()=>{b(),console.log("idUnidad Editando:"+r),c.value="",m.value=""}})}};return(r,i)=>(u(),q(X,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:b},{default:M(()=>[e("div",it,[e("form",{onSubmit:i[1]||(i[1]=H(d=>o.op==="1"?_():E(),["prevent"]))},[e("div",st,[e("h2",nt,v(o.title),1),i[4]||(i[4]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Seleccione la unidad a la que le quiere quitar el operador. ",-1)),e("div",rt,[e("div",lt,[i[3]||(i[3]=e("label",{for:"unidad",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ut,[D(e("select",{name:"unidad",id:"unidad"+o.op,"onUpdate:modelValue":i[0]||(i[0]=d=>l(t).unidad=d),placeholder:"Seleccione la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[i[2]||(i[2]=e("option",{value:"",disabled:"",selected:""},"Seleccione la unidad",-1)),(u(!0),x(I,null,A(o.unidadesConOperador,d=>(u(),x("option",{key:d.idUnidad,value:d.idUnidad},v(d.numeroUnidad),9,mt))),128))],8,ct),[[T,l(t).unidad]])]),c.value!=""?(u(),x("div",pt,v(c.value),1)):j("",!0)])])]),e("div",gt,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:b},i[5]||(i[5]=[e("i",{class:"fa-solid fa-ban"},null,-1),y(" Cancelar")]),8,bt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},i[6]||(i[6]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),y("Guardar")]),8,ft)])],32)])]),_:1},8,["show","max-width","closeable"]))}},yt={class:"mt-2 bg-white p-4 shadow rounded-lg"},vt={class:"border-b border-gray-900/10 pb-12"},ht={class:"text-base font-semibold leading-7 text-gray-900"},Ut={class:"flex flex-wrap -mx-4"},wt={class:"sm:col-span-2"},$t={class:"sm:col-span-1",hidden:""},St={class:"mt-2"},kt=["id"],Ot={class:"sm:col-span-2 px-4"},Dt={class:"mt-2"},_t=["id"],Et={key:0,class:"text-red-500 text-xs mt-1"},Ct={class:"sm:col-span-2 px-4"},jt={class:"mt-2"},Rt=["id"],Bt=["value"],It={key:0,class:"text-red-500 text-xs mt-1"},At={class:"sm:col-span-2 px-4"},Tt={class:"mt-2"},Nt={class:"block rounded-md py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6"},Mt={class:"sm:col-span-2 px-4"},Ft={class:"mt-2"},Wt=["id"],zt=["value"],Lt={key:0,class:"text-red-500 text-xs mt-1"},qt={class:"mt-6 flex items-center justify-end gap-x-6"},Pt=["id"],Qt=["disabled"],Gt={__name:"FormularioActualizarUnidades",props:{show:{type:Boolean,default:!1,hora:String},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},operadoresDisp:{type:Object,default:()=>({})},ruta:{type:Object,default:()=>({})},directivo:{type:Object,default:()=>({})},title:{type:String},modal:{type:String},op:{type:String}},emits:["close"],setup(o,{emit:n}){const g=o,C=n,t=L({_method:"PUT",idUnidad:g.unidad.idUnidad,numeroUnidad:g.unidad.numeroUnidad,ruta:g.unidad.idRuta,operador:g.unidad.idOperador,directivo:g.unidad.idDirectivo});V(()=>g.unidad,async d=>{t.idUnidad=d.idUnidad,t.numeroUnidad=d.numeroUnidad,t.ruta=d.idRuta,t.operador=d.idOperador,t.directivo=d.idDirectivo},{deep:!0});const c=k(""),m=k("");k("");const b=k(""),h=async()=>{C("close"),t.reset()},_=d=>typeof d=="string"&&d.trim()!=="",E=d=>d!=null,r=async()=>{c.value=_(t.numeroUnidad)?"":"Ingrese el número de la unidad",m.value=E(t.ruta)?"":"Selecciones la ruta",b.value=E(t.directivo)?"":"Seleccione el dueño de la unidad",!(c.value||m.value||b.value)&&t.post(route("principal.actualizarUnidad",t.idUnidad),{onSuccess:()=>{h(),c.value="",m.value="",b.value=""}})},i=d=>{const a=g.operador.find(U=>U.idOperador===d);return a?a.nombre_completo:"Operador no encontrado"};return(d,a)=>(u(),q(X,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:h},{default:M(()=>[e("div",yt,[e("form",{onSubmit:H(r,["prevent"])},[e("div",vt,[e("h2",ht,v(o.title),1),a[11]||(a[11]=e("p",{class:"mt-1 text-sm leading-6 text-gray-600 mb-4"},"Modifique los datos según sea necesario y guarde los cambios. ",-1)),e("div",Ut,[e("div",wt,[e("div",$t,[a[4]||(a[4]=e("label",{for:"idUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},"idUnidad",-1)),e("div",St,[D(e("input",{type:"number",name:"idUnidad","onUpdate:modelValue":a[0]||(a[0]=U=>l(t).idUnidad=U),placeholder:"Ingrese id de la unidad",id:"idUnidad"+o.op,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,kt),[[G,l(t).idUnidad]])])])]),e("div",Ot,[a[5]||(a[5]=e("label",{for:"numeroUnidad",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Número de unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Dt,[D(e("input",{type:"text",name:"numeroUnidad",id:"numeroUnidad"+o.op,"onUpdate:modelValue":a[1]||(a[1]=U=>l(t).numeroUnidad=U),placeholder:"Ingrese el número de la unidad",class:"block w-60 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,_t),[[G,l(t).numeroUnidad]])]),c.value!=""?(u(),x("div",Et,v(c.value),1)):j("",!0)]),e("div",Ct,[a[7]||(a[7]=e("label",{for:"ruta",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Ruta "),e("span",{class:"text-red-500"},"*")],-1)),e("div",jt,[D(e("select",{name:"ruta",id:"ruta"+o.op,"onUpdate:modelValue":a[2]||(a[2]=U=>l(t).ruta=U),placeholder:"Seleccione la ruta",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[a[6]||(a[6]=e("option",{value:"",disabled:"",selected:""},"Seleccione la ruta",-1)),(u(!0),x(I,null,A(o.ruta,U=>(u(),x("option",{key:U.idRuta,value:U.idRuta},v(U.nombreRuta),9,Bt))),128))],8,Rt),[[T,l(t).ruta]])]),m.value!=""?(u(),x("div",It,v(m.value),1)):j("",!0)]),e("div",At,[a[8]||(a[8]=e("label",{for:"operador",class:"block text-sm font-medium leading-6 text-gray-900"},"Operador",-1)),e("div",Tt,[e("p",Nt,v(i(l(t).operador)),1)])]),e("div",Mt,[a[10]||(a[10]=e("label",{for:"directivo",class:"block text-sm font-medium leading-6 text-gray-900"},[y("Dueño de la unidad "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ft,[D(e("select",{name:"directivo",id:"directivo"+o.op,"onUpdate:modelValue":a[3]||(a[3]=U=>l(t).directivo=U),placeholder:"Seleccione al dueño de la unidad",class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[a[9]||(a[9]=e("option",{value:"",disabled:"",selected:""},"Seleccione al dueño de la unidad",-1)),(u(!0),x(I,null,A(o.directivo,U=>(u(),x("option",{key:U.idDirectivo,value:U.idDirectivo},v(U.nombre_completo),9,zt))),128))],8,Wt),[[T,l(t).directivo]])]),b.value!=""?(u(),x("div",Lt,v(b.value),1)):j("",!0)])])]),e("div",qt,[e("button",{type:"button",id:"cerrar"+o.op,class:"text-sm font-semibold leading-6 bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 text-white py-2 px-4 rounded","data-bs.dismiss":"modal",onClick:h},a[12]||(a[12]=[e("i",{class:"fa-solid fa-ban"},null,-1),y(" Cancelar")]),8,Pt),e("button",{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",disabled:l(t).processing},a[13]||(a[13]=[e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1),y("Guardar")]),8,Qt)])],32)])]),_:1},8,["show","max-width","closeable"]))}},Vt={class:"mt-0 bg-white p-4 shadow rounded-lg h-5/6"},Ht={class:"py-3 flex flex-col md:flex-row md:items-start md:space-x-3 space-y-3 md:space-y-0"},P="xl",Q=!0,od={__name:"Unidades",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object},ruta:{type:Object},operador:{type:Object},directivo:{type:Object},operadoresDisp:{type:Object},unidadesDisp:{type:Object},unidadesConOperador:{type:Object},usuario:{type:Object}},setup(o){Y.use(ee),Y.use(ee);const n=o,g=(p="Documento")=>{const s=new le("landscape");s.setFontSize(12),s.text(p,14,22);const f=new Date().toLocaleDateString();s.setFontSize(8),s.text(`Fecha: ${f}`,260,22);const S=["ID","Número De Unidad","Operador","Ruta","Dueño De La Uniad"],w=[];te(()=>{$("#unidadesTablaId").DataTable().rows({search:"applied"}).data().each(R=>{var W,B,Z;w.push([R.idUnidad,R.numeroUnidad,((W=n.operador.find(z=>z.idOperador===R.idOperador))==null?void 0:W.nombre_completo)||"",((B=n.ruta.find(z=>z.idRuta===R.idRuta))==null?void 0:B.nombreRuta)||"",((Z=n.directivo.find(z=>z.idDirectivo===R.idDirectivo))==null?void 0:Z.nombre_completo)||""])}),s.autoTable({head:[S],body:w,startY:24}),s.save(`${p}.pdf`)})},C=()=>{te(()=>{const f=$("#unidadesTablaId").DataTable().rows({search:"applied"}).data().toArray().map(O=>{var F,R,W;return{ID:O.idUnidad,"Número De Unidad":O.numeroUnidad,Operador:((F=n.operador.find(B=>B.idOperador===O.idOperador))==null?void 0:F.nombre_completo)||"",Ruta:((R=n.ruta.find(B=>B.idRuta===O.idRuta))==null?void 0:R.nombreRuta)||"","Dueño De La Unidad":((W=n.directivo.find(B=>B.idDirectivo===O.idDirectivo))==null?void 0:W.nombre_completo)||""}}),S=K.json_to_sheet(f),w=K.book_new();K.book_append_sheet(w,S,"Unidades Registrados"),ue(w,"Unidades Registrados.xlsx")})},t=[{extend:"copyHtml5",text:'<i class="fa-solid fa-copy"></i> Copiar',className:"bg-cyan-500 hover:bg-cyan-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[0,2]},button:!0},{title:"Unidades Registradas",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-600 hover:bg-green-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",action:()=>C()},{title:"Unidades Registradas",text:'<i class="fa-solid fa-file-pdf"></i> PDF',className:"bg-red-500 hover:bg-red-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",orientation:"landscape",action:()=>g(n.title||"Unidades Registradas")},{title:"Unidades Registradas",extend:"print",text:'<i class="fa-solid fa-print"></i> Imprimir',className:"bg-blue-500 hover:bg-blue-600 text-white py-1/2 px-3 rounded mb-2 jump-icon",exportOptions:{columns:[2,3,4,5,6]}}],c=[{data:null,render:function(p,s,f,S){return""}},{data:null,render:function(p,s,f,S){return`<input type="checkbox" class="unidades-checkboxes" data-id="${f.idUnidad}" ">`}},{data:null,render:function(p,s,f,S){return S.row+1}},{data:"numeroUnidad"},{data:"idOperador",render:function(p,s,f,S){if(p){const w=n.operador.find(O=>O.idOperador===p);return w?w.nombre_completo:""}else return'<span style="color: red;">Sin asignar</span>'}},{data:"idRuta",render:function(p,s,f,S){const w=n.ruta.find(O=>O.idRuta===p);return w?w.nombreRuta:""}},{data:"idDirectivo",render:function(p,s,f,S){const w=n.directivo.find(O=>O.idDirectivo===p);return w?w.nombre_completo:""}},{data:null,render:function(p,s,f,S){return`<button class="editar-button" data-id="${f.idUnidad}" style="display: flex; justify-content: center;"><i class="fa fa-pencil"></i></button>`}}],m=k(!1),b=k(!1),h=k(!1),_=k(!1),E=L({_method:"DELETE"}),r=k([]);var i={};const d=p=>{i=p,_.value=!0},a=()=>{m.value=!1},U=()=>{b.value=!1},de=()=>{h.value=!1},ae=()=>{_.value=!1},oe=p=>{r.value.includes(p)?r.value=r.value.filter(f=>f!==p):r.value.push(p);const s=document.getElementById("eliminarABtn");r.value.length>0?s.removeAttribute("disabled"):s.setAttribute("disabled","")};ne(()=>{document.getElementById("unidadesTablaId").addEventListener("click",p=>{const s=p.target;if(s.classList.contains("unidades-checkboxes")){const f=parseInt(s.getAttribute("data-id"));if(n.unidad){const S=n.unidad.find(w=>w.idUnidad===f);S?oe(S):console.log("No se tiene unidad")}}}),$("#unidadesTablaId").on("click",".editar-button",function(){const p=$(this).data("id"),s=n.unidad.find(f=>f.idUnidad===p);d(s)})});const ie=()=>{const p=J.mixin({buttonsStyling:!0}),s=r.value.map(f=>f.numeroUnidad).join(", ");p.fire({title:"¿Estas seguro que deseas eliminar la(s) unidad(es) seleccionada(s)?",html:`Unidades seleccionadas: ${s}`,icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Confirmar',cancelButtonText:'<i class="fa-solid fa-ban"></i> Cancelar'}).then(async f=>{if(f.isConfirmed)try{const w=r.value.map(F=>F.idUnidad).join(",");await E.post(route("principal.eliminarUnidad",w)),r.value=[];const O=document.getElementById("eliminarABtn");r.value.length>0?O.removeAttribute("disabled"):O.setAttribute("disabled",""),J.fire({title:"Unidad(es) eliminado(s) correctamente",icon:"success"}),window.flash={message:"Unidad(es) eliminado(s) correctamente",color:"green"}}catch(S){console.log("Error al eliminar varias unidades: "+S),J.fire({title:"Error",text:"Hubo un error al eliminar las unidades. Por favor, inténtalo de nuevo más tarde.",icon:"error"})}})};return(p,s)=>(u(),q(se,{title:"Formar Unidades",usuario:n.usuario},{default:M(()=>[e("div",Vt,[s[8]||(s[8]=e("h2",{class:"font-bold text-center text-xl pt-0"},"Unidades",-1)),s[9]||(s[9]=e("div",{class:"my-1"},null,-1)),s[10]||(s[10]=e("div",{class:"bg-gradient-to-r from-cyan-300 to-cyan-500 h-px mb-3"},null,-1)),N(re),e("div",Ht,[e("button",{class:"bg-green-500 hover:bg-green-500 text-white font-semibold py-2 px-4 rounded",onClick:s[0]||(s[0]=f=>m.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},s[3]||(s[3]=[e("i",{class:"fa fa-plus mr-2"},null,-1),y("Agregar Unidad ")])),e("button",{id:"eliminarABtn",disabled:"",class:"bg-red-500 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded",onClick:ie},s[4]||(s[4]=[e("i",{class:"fa fa-trash mr-2"},null,-1),y("Borrar Unidad ")])),e("button",{class:"bg-cyan-500 hover:bg-cyan-500 text-white font-semibold py-2 px-4 rounded",onClick:s[1]||(s[1]=f=>b.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},s[5]||(s[5]=[e("i",{class:"fa fa-male","aria-hidden":"true"},null,-1),y(" Asignar Operador ")])),e("button",{class:"bg-orange-500 hover:bg-orange-500 text-white font-semibold py-2 px-4 rounded",onClick:s[2]||(s[2]=f=>h.value=!0),"data-bs-toggle":"modal","data-bs-target":"#modalCreate"},s[6]||(s[6]=[e("i",{class:"fa fa-male","aria-hidden":"true"},null,-1),y(" Quitar Operador ")]))]),e("div",null,[N(l(Y),{class:"w-full table-auto text-sm display nowrap stripe compact cell-border order-column",id:"unidadesTablaId",name:"unidadesTablaId",columns:c,data:o.unidad,options:{responsive:!0,autoWidth:!1,dom:"Bftrip",language:{search:"Buscar",zeroRecords:"No hay registros para mostrar",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"Ultimo"}},buttons:[t]}},{default:M(()=>s[7]||(s[7]=[e("thead",null,[e("tr",{class:"text-sm leading-normal"},[e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," ID "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Número de Unidad "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Operador "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Ruta "),e("th",{class:"py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-light border-b border-grey-light"}," Dueño de la unidad ")])],-1)])),_:1},8,["data","options"])])]),N(We,{show:m.value,"max-width":P,closeable:Q,onClose:a,title:"Añadir unidad",op:"1",modal:"modalCreate",unidad:n.unidad,ruta:n.ruta,operadoresDisp:n.operadoresDisp,directivo:n.directivo},null,8,["show","unidad","ruta","operadoresDisp","directivo"]),N(Gt,{show:_.value,"max-width":P,closeable:Q,onClose:ae,title:"Editar unidad",op:"2",modal:"modalEdit",unidad:l(i),ruta:n.ruta,operador:n.operador,operadoresDisp:n.operadoresDisp,directivo:n.directivo},null,8,["show","unidad","ruta","operador","operadoresDisp","directivo"]),N(ot,{show:b.value,"max-width":P,closeable:Q,onClose:U,title:"Asignar operador",op:"1",modal:"modalCreate",unidad:n.unidad,unidadesDisp:n.unidadesDisp,operadoresDisp:n.operadoresDisp},null,8,["show","unidad","unidadesDisp","operadoresDisp"]),N(xt,{show:h.value,"max-width":P,closeable:Q,onClose:de,title:"Quitar operador",op:"1",modal:"modalCreate",unidad:n.unidad,unidadesConOperador:n.unidadesConOperador,operadoresDisp:n.operadoresDisp},null,8,["show","unidad","unidadesConOperador","operadoresDisp"])]),_:1},8,["usuario"]))}};export{od as default};
