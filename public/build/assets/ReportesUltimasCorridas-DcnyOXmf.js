import{r as q,I as Q,o as i,c as d,m as f,a as n,t as h,w as v,p as x,F as b,d as u,J as O,l as W,n as z,f as X,E as Z}from"./app-Dl5_rpfc.js";import{S as U}from"./sweetalert2.all-hMiNay9h.js";import{u as P,w as ee}from"./xlsx-769MyM77.js";import{E as oe}from"./jspdf.plugin.autotable-BqYcvtrv.js";/* empty css                                                               */const ue={class:"text-lg font-bold"},me=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),ge={class:"flex flex-wrap gap-4 mb-3"},pe=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1),fe=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1),he=n("option",{value:"todas"},"Todas las unidades",-1),be=["value"],ve={class:"flex flex-wrap gap-4 mb-3"},xe={class:"flex flex-wrap space-x-3 mb-2"},_e=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),$e=["onUpdate:modelValue"],ye=n("option",{value:"semana"},"Semanal",-1),Se=n("option",{value:"mes"},"Mensual",-1),we=n("option",{value:"anio"},"Anual",-1),Ae=[ye,Se,we],ke=["value"],Ne=["value"],Ue=["value"],Ce={class:"flex flex-wrap space-x-3"},Ee=["onClick"],ae=2024,fa={__name:"ReportesEntrada",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(r,o)=>{let t="";o.tipo==="semana"?t=route("reportes.entradasSemana",{idUnidad:r,semana:o.valor}):o.tipo==="mes"||typeof o=="number"?t=route("reportes.entradasMes",{idUnidad:r,mes:o.valor}):o.tipo==="anio"&&(t=route("reportes.entradasAnio",{idUnidad:r,anio:o.valor}));try{const e=await Z.get(t);C.value=e.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(r,o,t,e)=>{if(!t||!e.tipo||!e.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:r.periodoSeleccionado,valor:""};r.periodoSeleccionado==="semana"?a.valor=m:r.periodoSeleccionado==="mes"?a.valor=g:r.periodoSeleccionado==="anio"&&(a.valor=p);try{await B(t,a),r.titulo==="Entradas"?o==="pdf"?j(r.titulo,a):o==="excel"?Y(r.titulo,a):o==="imprimir"&&imprimirReporte(r.titulo,a):U.fire({title:`Generar el reporte "${r.titulo}" en ${o}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(r,o)=>{const t=o.tipo==="semana"?`Semana ${o.valor}`:o.tipo==="mes"?R[o.valor-1]:o.valor,e=`${r}-${t}.pdf`,a=new oe("landscape");a.setFontSize(12),a.text(`Reporte de ${r} - Período: ${t}`,14,20);const c=[{header:"Ruta",dataKey:"ruta"},{header:"Fecha",dataKey:"fecha"},{header:"Numero Unidad",dataKey:"numeroUnidad"},{header:"Socio/Prestador",dataKey:"socioPrestador"},{header:"Hora Entrada",dataKey:"horaEntrada"},{header:"Tipo Entrada",dataKey:"tipoEntrada"},{header:"Extremo",dataKey:"extremo"},{header:"Operador",dataKey:"operador"}],S=C.value.map(l=>{var y,k,N,w;return{ruta:((k=(y=l.unidad)==null?void 0:y.ruta)==null?void 0:k.nombreRuta)||"N/A",fecha:l.created_at?new Date(l.created_at).toLocaleDateString():"N/A",numeroUnidad:((N=l.unidad)==null?void 0:N.numeroUnidad)||"N/A",socioPrestador:(w=l.unidad)!=null&&w.directivo?`${l.unidad.directivo.nombre_completo}`:"N/A",horaEntrada:l.horaEntrada?l.horaEntrada.substring(0,5):"N/A",tipoEntrada:l.tipoEntrada||"Tarde",extremo:l.extremo||"N/A",operador:l.operador?`${l.operador.nombre_completo}`:"N/A"}});a.autoTable({head:[c.map(l=>l.header)],body:S.map(l=>c.map(y=>l[y.dataKey])),startY:24,styles:{fontSize:10,cellPadding:4,halign:"center"}});const s=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});a.setFontSize(10),a.text(`Fecha de creación: ${s}`,14,a.internal.pageSize.height-10),a.save(e)},Y=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=`${r}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"]];C.value.forEach(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaEntrada?s.horaEntrada.substring(0,5):"N/A",T=s.tipoEntrada,D=s.extremo||"N/A",F=s.operador?`${s.operador.nombre_completo}`:"N/A";a.push([l,y,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(a);P.book_append_sheet(c,S,"Reporte_Entradas"),ee(c,e)},L=[{titulo:"Entradas",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(r,o)=>o+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-ae+1},(r,o)=>ae+o);let m=1,g=1,p=V;return(r,o)=>(i(),d(b,null,f(L,t=>n("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",ue,h(t.titulo),1),me,n("div",ge,[pe,n("div",null,[n("div",null,[v(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":o[0]||(o[0]=e=>E.unidad=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[fe,he,(i(!0),d(b,null,f(K.unidad,e=>(i(),d("option",{key:e.idUnidad,value:e.idUnidad},h(e.numeroUnidad),9,be))),128))],512),[[x,E.unidad]])])])]),n("div",ve,[n("div",xe,[_e,v(n("select",{"onUpdate:modelValue":e=>t.periodoSeleccionado=e,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},Ae,8,$e),[[x,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>O(m)?m.value=e:m=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(e,a)=>(i(),d("option",{key:a,value:e},"Semana "+h(e),9,ke))),128))],512)),[[x,u(m)]]):t.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>O(g)?g.value=e:g=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(e,a)=>n("option",{key:a,value:a+1},h(e),9,Ne)),64))],512)),[[x,u(g)]]):t.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":o[3]||(o[3]=e=>O(p)?p.value=e:p=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),e=>(i(),d("option",{key:e,value:e},h(e),9,Ue))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",Ce,[(i(),d(b,null,f(G,e=>n("button",{key:e.tipo,class:z(e.clase),onClick:a=>M(t,e.tipo,E.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(e.icono+" mr-2 jump-icon")},null,2),X(" "+h(e.texto),1)],10,Ee)),64))])])),64))}},Re={class:"text-lg font-bold"},Te=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),De={class:"flex flex-wrap gap-4 mb-3"},Fe=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1),Oe=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1),Pe=n("option",{value:"todas"},"Todas las unidades",-1),Ve=["value"],je={class:"flex flex-wrap gap-4 mb-3"},ze={class:"flex flex-wrap space-x-3 mb-2"},Ke=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),Be=["onUpdate:modelValue"],Me=n("option",{value:"semana"},"Semanal",-1),Ye=n("option",{value:"mes"},"Mensual",-1),Le=n("option",{value:"anio"},"Anual",-1),Ge=[Me,Ye,Le],He=["value"],Ie=["value"],Je=["value"],qe={class:"flex flex-wrap space-x-3"},Qe=["onClick"],ne=2024,ha={__name:"ReportesCortes",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(r,o)=>{let t="";o.tipo==="semana"?t=route("reportes.cortesSemana",{idUnidad:r,semana:o.valor}):o.tipo==="mes"||typeof o=="number"?t=route("reportes.cortesMes",{idUnidad:r,mes:o.valor}):o.tipo==="anio"&&(t=route("reportes.cortesAnio",{idUnidad:r,anio:o.valor}));try{const e=await Z.get(t);C.value=e.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(r,o,t,e)=>{if(!t||!e.tipo||!e.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:r.periodoSeleccionado,valor:""};r.periodoSeleccionado==="semana"?a.valor=m:r.periodoSeleccionado==="mes"?a.valor=g:r.periodoSeleccionado==="anio"&&(a.valor=p);try{await B(t,a),r.titulo==="Cortes"?o==="pdf"?j(r.titulo,a):o==="excel"?Y(r.titulo,a):o==="imprimir"&&imprimirReporte(r.titulo,a):U.fire({title:`Generar el reporte "${r.titulo}" en ${o}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=new oe("landscape");e.setFontSize(12),e.text(`Reporte de ${r} - Período: ${t}`,14,20);const a=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),c=C.value.map(l=>{var $,_,J;const y=($=l.unidad)!=null&&$.ruta?l.unidad.ruta.nombreRuta:"N/A",k=l.created_at?new Date(l.created_at).toLocaleDateString():"N/A",N=((_=l.unidad)==null?void 0:_.numeroUnidad)||"N/A",w=(J=l.unidad)!=null&&J.directivo?`${l.unidad.directivo.nombre_completo}`:"N/A",T=l.horaCorte?l.horaCorte.substring(0,5):"N/A",D=l.causa||"N/A",F=l.horaRegreso?l.horaRegreso.substring(0,5):"Sin Regreso",A=l.operador?`${l.operador.nombre_completo}`:"N/A";return[y,k,N,w,T,D,F,A]}),S=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];e.autoTable({head:S,body:c,startY:24});const s=e.internal.getNumberOfPages();e.setFontSize(10);for(let l=1;l<=s;l++)e.setPage(l),e.text(`Fecha de creación: ${a}`,14,e.internal.pageSize.height-10);e.save(`${r}-${t}.pdf`)},Y=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=`${r}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];C.value.forEach(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaCorte?s.horaCorte.substring(0,5):"N/A",T=s.causa||"N/A",D=s.horaRegreso?s.horaRegreso.substring(0,5):"Sin Regreso",F=s.operador?`${s.operador.nombre_completo}`:"N/A";a.push([l,y,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(a);P.book_append_sheet(c,S,"Reporte_Cortes"),ee(c,e)},L=[{titulo:"Cortes",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(r,o)=>o+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-ne+1},(r,o)=>ne+o);let m=1,g=1,p=V;return(r,o)=>(i(),d(b,null,f(L,t=>n("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",Re,h(t.titulo),1),Te,n("div",De,[Fe,n("div",null,[n("div",null,[v(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":o[0]||(o[0]=e=>E.unidad=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Oe,Pe,(i(!0),d(b,null,f(K.unidad,e=>(i(),d("option",{key:e.idUnidad,value:e.idUnidad},h(e.numeroUnidad),9,Ve))),128))],512),[[x,E.unidad]])])])]),n("div",je,[n("div",ze,[Ke,v(n("select",{"onUpdate:modelValue":e=>t.periodoSeleccionado=e,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},Ge,8,Be),[[x,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>O(m)?m.value=e:m=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(e,a)=>(i(),d("option",{key:a,value:e},"Semana "+h(e),9,He))),128))],512)),[[x,u(m)]]):t.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>O(g)?g.value=e:g=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(e,a)=>n("option",{key:a,value:a+1},h(e),9,Ie)),64))],512)),[[x,u(g)]]):t.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":o[3]||(o[3]=e=>O(p)?p.value=e:p=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),e=>(i(),d("option",{key:e,value:e},h(e),9,Je))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",qe,[(i(),d(b,null,f(G,e=>n("button",{key:e.tipo,class:z(e.clase),onClick:a=>M(t,e.tipo,E.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(e.icono+" mr-2 jump-icon")},null,2),X(" "+h(e.texto),1)],10,Qe)),64))])])),64))}},We={class:"text-lg font-bold"},Xe=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),Ze={class:"flex flex-wrap gap-4 mb-3"},eo=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1),oo=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1),to=n("option",{value:"todas"},"Todas las unidades",-1),ao=["value"],no={class:"flex flex-wrap gap-4 mb-3"},so={class:"flex flex-wrap space-x-3 mb-2"},ro=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),io=["onUpdate:modelValue"],lo=n("option",{value:"semana"},"Semanal",-1),co=n("option",{value:"mes"},"Mensual",-1),uo=n("option",{value:"anio"},"Anual",-1),mo=[lo,co,uo],go=["value"],po=["value"],fo=["value"],ho={class:"flex flex-wrap space-x-3"},bo=["onClick"],se=2024,ba={__name:"ReportesCortesConRegreso",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(r,o)=>{let t="";o.tipo==="semana"?t=route("reportes.cortesCRSemana",{idUnidad:r,semana:o.valor}):o.tipo==="mes"||typeof o=="number"?t=route("reportes.cortesCRMes",{idUnidad:r,mes:o.valor}):o.tipo==="anio"&&(t=route("reportes.cortesCRAnio",{idUnidad:r,anio:o.valor}));try{const e=await Z.get(t);C.value=e.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(r,o,t,e)=>{if(!t||!e.tipo||!e.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:r.periodoSeleccionado,valor:""};r.periodoSeleccionado==="semana"?a.valor=m:r.periodoSeleccionado==="mes"?a.valor=g:r.periodoSeleccionado==="anio"&&(a.valor=p);try{await B(t,a),r.titulo==="Cortes Con Regreso"?o==="pdf"?j(r.titulo,a):o==="excel"?Y(r.titulo,a):o==="imprimir"&&imprimirReporte(r.titulo,a):U.fire({title:`Generar el reporte "${r.titulo}" en ${o}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=new oe("landscape");e.setFontSize(12),e.text(`Reporte de ${r} - Período: ${t}`,14,20);const a=C.value.map(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaCorte?s.horaCorte.substring(0,5):"N/A",T=s.causa||"N/A",D=s.horaRegreso?s.horaRegreso.substring(0,5):"Sin Regreso",F=s.operador?`${s.operador.nombre_completo}`:"N/A";return[l,y,k,N,w,T,D,F]});e.autoTable({head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]],body:a,startY:24,styles:{fontSize:10}});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});e.setFontSize(10),e.text(`Fecha de creación: ${c}`,14,e.internal.pageSize.height-10);const S=`${r}-${t}.pdf`;e.save(S)},Y=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=`${r}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];C.value.forEach(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaCorte?s.horaCorte.substring(0,5):"N/A",T=s.causa||"N/A",D=s.horaRegreso?s.horaRegreso.substring(0,5):"Sin Regreso",F=s.operador?`${s.operador.nombre_completo}`:"N/A";a.push([l,y,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(a);P.book_append_sheet(c,S,"Reporte_Cortes_CR"),ee(c,e)},L=[{titulo:"Cortes Con Regreso",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(r,o)=>o+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-se+1},(r,o)=>se+o);let m=1,g=1,p=V;return(r,o)=>(i(),d(b,null,f(L,t=>n("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",We,h(t.titulo),1),Xe,n("div",Ze,[eo,n("div",null,[n("div",null,[v(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":o[0]||(o[0]=e=>E.unidad=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[oo,to,(i(!0),d(b,null,f(K.unidad,e=>(i(),d("option",{key:e.idUnidad,value:e.idUnidad},h(e.numeroUnidad),9,ao))),128))],512),[[x,E.unidad]])])])]),n("div",no,[n("div",so,[ro,v(n("select",{"onUpdate:modelValue":e=>t.periodoSeleccionado=e,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},mo,8,io),[[x,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>O(m)?m.value=e:m=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(e,a)=>(i(),d("option",{key:a,value:e},"Semana "+h(e),9,go))),128))],512)),[[x,u(m)]]):t.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>O(g)?g.value=e:g=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(e,a)=>n("option",{key:a,value:a+1},h(e),9,po)),64))],512)),[[x,u(g)]]):t.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":o[3]||(o[3]=e=>O(p)?p.value=e:p=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),e=>(i(),d("option",{key:e,value:e},h(e),9,fo))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",ho,[(i(),d(b,null,f(G,e=>n("button",{key:e.tipo,class:z(e.clase),onClick:a=>M(t,e.tipo,E.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(e.icono+" mr-2 jump-icon")},null,2),X(" "+h(e.texto),1)],10,bo)),64))])])),64))}},vo={class:"text-lg font-bold"},xo=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),_o={class:"flex flex-wrap gap-4 mb-3"},$o=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1),yo=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1),So=n("option",{value:"todas"},"Todas las unidades",-1),wo=["value"],Ao={class:"flex flex-wrap gap-4 mb-3"},ko={class:"flex flex-wrap space-x-3 mb-2"},No=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),Uo=["onUpdate:modelValue"],Co=n("option",{value:"semana"},"Semanal",-1),Eo=n("option",{value:"mes"},"Mensual",-1),Ro=n("option",{value:"anio"},"Anual",-1),To=[Co,Eo,Ro],Do=["value"],Fo=["value"],Oo=["value"],Po={class:"flex flex-wrap space-x-3"},Vo=["onClick"],re=2024,va={__name:"ReportesCortesSinRegreso",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(r,o)=>{let t="";o.tipo==="semana"?t=route("reportes.cortesSRSemana",{idUnidad:r,semana:o.valor}):o.tipo==="mes"||typeof o=="number"?t=route("reportes.cortesSRMes",{idUnidad:r,mes:o.valor}):o.tipo==="anio"&&(t=route("reportes.cortesSRAnio",{idUnidad:r,anio:o.valor}));try{const e=await Z.get(t);C.value=e.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(r,o,t,e)=>{if(!t||!e.tipo||!e.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:r.periodoSeleccionado,valor:""};r.periodoSeleccionado==="semana"?a.valor=m:r.periodoSeleccionado==="mes"?a.valor=g:r.periodoSeleccionado==="anio"&&(a.valor=p);try{await B(t,a),r.titulo==="Cortes Sin Regreso"?o==="pdf"?j(r.titulo,a):o==="excel"?Y(r.titulo,a):o==="imprimir"&&imprimirReporte(r.titulo,a):U.fire({title:`Generar el reporte "${r.titulo}" en ${o}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=C.value.map(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaCorte?s.horaCorte.substring(0,5):"N/A",T=s.causa||"N/A",D=s.horaRegreso?s.horaRegreso.substring(0,5):"Sin Regreso",F=s.operador?`${s.operador.nombre_completo}`:"N/A";return[l,y,k,N,w,T,D,F]}),a=new oe("landscape");a.setFontSize(12),a.text(`Reporte de ${r} - Período: ${t}`,14,20),a.autoTable({head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]],body:e,startY:24,styles:{fontSize:10,halign:"center"}});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});a.setFontSize(10),a.text(`Fecha de creación: ${c}`,14,a.internal.pageSize.height-10);const S=`${r}-${t}.pdf`;a.save(S)},Y=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=`${r}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Corte","Causa","Hora Regreso","Operador"]];C.value.forEach(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaCorte?s.horaCorte.substring(0,5):"N/A",T=s.causa||"N/A",D=s.horaRegreso?s.horaRegreso.substring(0,5):"Sin Regreso",F=s.operador?`${s.operador.nombre_completo}`:"N/A";a.push([l,y,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(a);P.book_append_sheet(c,S,"Reporte_Cortes_SR"),ee(c,e)},L=[{titulo:"Cortes Sin Regreso",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(r,o)=>o+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-re+1},(r,o)=>re+o);let m=1,g=1,p=V;return(r,o)=>(i(),d(b,null,f(L,t=>n("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",vo,h(t.titulo),1),xo,n("div",_o,[$o,n("div",null,[n("div",null,[v(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":o[0]||(o[0]=e=>E.unidad=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[yo,So,(i(!0),d(b,null,f(K.unidad,e=>(i(),d("option",{key:e.idUnidad,value:e.idUnidad},h(e.numeroUnidad),9,wo))),128))],512),[[x,E.unidad]])])])]),n("div",Ao,[n("div",ko,[No,v(n("select",{"onUpdate:modelValue":e=>t.periodoSeleccionado=e,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},To,8,Uo),[[x,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>O(m)?m.value=e:m=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(e,a)=>(i(),d("option",{key:a,value:e},"Semana "+h(e),9,Do))),128))],512)),[[x,u(m)]]):t.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>O(g)?g.value=e:g=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(e,a)=>n("option",{key:a,value:a+1},h(e),9,Fo)),64))],512)),[[x,u(g)]]):t.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":o[3]||(o[3]=e=>O(p)?p.value=e:p=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),e=>(i(),d("option",{key:e,value:e},h(e),9,Oo))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",Po,[(i(),d(b,null,f(G,e=>n("button",{key:e.tipo,class:z(e.clase),onClick:a=>M(t,e.tipo,E.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(e.icono+" mr-2 jump-icon")},null,2),X(" "+h(e.texto),1)],10,Vo)),64))])])),64))}},jo={class:"text-lg font-bold"},zo=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),Ko={class:"flex flex-wrap gap-4 mb-3"},Bo=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1),Mo=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1),Yo=n("option",{value:"todas"},"Todas las unidades",-1),Lo=["value"],Go={class:"flex flex-wrap gap-4 mb-3"},Ho={class:"flex flex-wrap space-x-3 mb-2"},Io=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),Jo=["onUpdate:modelValue"],qo=n("option",{value:"semana"},"Semanal",-1),Qo=n("option",{value:"mes"},"Mensual",-1),Wo=n("option",{value:"anio"},"Anual",-1),Xo=[qo,Qo,Wo],Zo=["value"],et=["value"],ot=["value"],tt={class:"flex flex-wrap space-x-3"},at=["onClick"],ie=2024,xa={__name:"ReportesEntradasTardes",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(r,o)=>{let t="";o.tipo==="semana"?t=route("reportes.entradasTardesSemana",{idUnidad:r,semana:o.valor}):o.tipo==="mes"||typeof o=="number"?t=route("reportes.entradasTardesMes",{idUnidad:r,mes:o.valor}):o.tipo==="anio"&&(t=route("reportes.entradasTardesAnio",{idUnidad:r,anio:o.valor}));try{const e=await Z.get(t);C.value=e.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(r,o,t,e)=>{if(!t||!e.tipo||!e.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:r.periodoSeleccionado,valor:""};r.periodoSeleccionado==="semana"?a.valor=m:r.periodoSeleccionado==="mes"?a.valor=g:r.periodoSeleccionado==="anio"&&(a.valor=p);try{await B(t,a),r.titulo==="Entradas Tardes"?o==="pdf"?j(r.titulo,a):o==="excel"&&Y(r.titulo,a):U.fire({title:`Generar el reporte "${r.titulo}" en ${o}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(r,o)=>{const t=new oe("landscape");let e;o.tipo==="semana"?e=`Semana ${o.valor}`:o.tipo==="mes"?e=R[o.valor-1]:(o.tipo,e=o.valor),t.setFontSize(12),t.text(`Reporte de ${r} - Período: ${e}`,14,20);const a=C.value.map(l=>{var $,_,J;const y=($=l.unidad)!=null&&$.ruta?l.unidad.ruta.nombreRuta:"N/A",k=l.created_at?new Date(l.created_at).toLocaleDateString():"N/A",N=((_=l.unidad)==null?void 0:_.numeroUnidad)||"N/A",w=(J=l.unidad)!=null&&J.directivo?`${l.unidad.directivo.nombre_completo}`:"N/A",T=l.horaEntrada?l.horaEntrada.substring(0,5):"N/A",D=l.tipoEntrada||"Tarde",F=l.extremo||"N/A",A=l.operador?`${l.operador.nombre_completo}`:"N/A";return[y,k,N,w,T,D,F,A]}),c=["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"];t.autoTable({head:[c],body:a,startY:24,styles:{fontSize:10,cellPadding:4}});const S=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});t.setFontSize(10),t.text(`Fecha de creación: ${S}`,14,t.internal.pageSize.height-10);const s=`${r}-${e}.pdf`;t.save(s)},Y=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=`${r}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Entrada","Tipo Entrada","Extremo","Operador"]];C.value.forEach(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaEntrada?s.horaEntrada.substring(0,5):"N/A",T=s.tipoEntrada,D=s.extremo||"N/A",F=s.operador?`${s.operador.nombre_completo}`:"N/A";a.push([l,y,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(a);P.book_append_sheet(c,S,"Reporte_Entradas_Tardes"),ee(c,e)},L=[{titulo:"Entradas Tardes",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(r,o)=>o+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-ie+1},(r,o)=>ie+o);let m=1,g=1,p=V;return(r,o)=>(i(),d(b,null,f(L,t=>n("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",jo,h(t.titulo),1),zo,n("div",Ko,[Bo,n("div",null,[n("div",null,[v(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":o[0]||(o[0]=e=>E.unidad=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Mo,Yo,(i(!0),d(b,null,f(K.unidad,e=>(i(),d("option",{key:e.idUnidad,value:e.idUnidad},h(e.numeroUnidad),9,Lo))),128))],512),[[x,E.unidad]])])])]),n("div",Go,[n("div",Ho,[Io,v(n("select",{"onUpdate:modelValue":e=>t.periodoSeleccionado=e,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},Xo,8,Jo),[[x,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>O(m)?m.value=e:m=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(e,a)=>(i(),d("option",{key:a,value:e},"Semana "+h(e),9,Zo))),128))],512)),[[x,u(m)]]):t.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>O(g)?g.value=e:g=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(e,a)=>n("option",{key:a,value:a+1},h(e),9,et)),64))],512)),[[x,u(g)]]):t.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":o[3]||(o[3]=e=>O(p)?p.value=e:p=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),e=>(i(),d("option",{key:e,value:e},h(e),9,ot))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",tt,[(i(),d(b,null,f(G,e=>n("button",{key:e.tipo,class:z(e.clase),onClick:a=>M(t,e.tipo,E.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(e.icono+" mr-2 jump-icon")},null,2),X(" "+h(e.texto),1)],10,at)),64))])])),64))}},nt={class:"text-lg font-bold"},st=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),rt={class:"flex flex-wrap gap-4 mb-3"},it=n("h2",{class:"font-semibold text-l pt-0"},"Operador: ",-1),dt=n("option",{value:"",disabled:"",selected:""},"----------- Operador -----------",-1),lt=n("option",{value:"todas"},"Todos los operadores",-1),ct=["value"],ut={class:"flex flex-wrap gap-4 mb-3"},mt={class:"flex flex-wrap space-x-3 mb-2"},gt=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),pt=["onUpdate:modelValue"],ft=n("option",{value:"semana"},"Semanal",-1),ht=n("option",{value:"mes"},"Mensual",-1),bt=n("option",{value:"anio"},"Anual",-1),vt=[ft,ht,bt],xt=["value"],_t=["value"],$t=["value"],yt={class:"flex flex-wrap space-x-3"},St=["onClick"],de=2024,_a={__name:"ReportesDiasTrabajados",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(o,t)=>{let e="";t.tipo==="semana"?e=route("reportes.diasTrabajadosSemana",{idOperador:o,semana:t.valor}):t.tipo==="mes"?e=route("reportes.diasTrabajadosMes",{idOperador:o,mes:t.valor}):t.tipo==="anio"&&(e=route("reportes.diasTrabajadosAnio",{idOperador:o,anio:t.valor}));try{const a=await Z.get(e);C.value=a.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(o,t,e,a)=>{if(!e||!a.tipo||!a.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let c={tipo:o.periodoSeleccionado,valor:""};o.periodoSeleccionado==="semana"?c.valor=m:o.periodoSeleccionado==="mes"?c.valor=g:o.periodoSeleccionado==="anio"&&(c.valor=p);try{await B(e,c),o.titulo==="Días Trabajados"?t==="pdf"?Y(o.titulo,c):t==="excel"?L(o.titulo,c):t==="imprimir"&&imprimirReporte(o.titulo,c):U.fire({title:`Generar el reporte "${o.titulo}" en ${t}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(S){console.error(S),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(o,t)=>{switch(o){case"semana":return 7;case"mes":const e=parseInt(t,10),a=new Date().getFullYear();return new Date(a,e,0).getDate();case"anio":return 365;default:return 0}},Y=(o,t)=>{let e;t.tipo==="semana"?e=`Semana ${t.valor}`:t.tipo==="mes"?e=R[t.valor-1]:(t.tipo,e=t.valor);const a=j(t.tipo,t.valor),c=new oe("landscape");c.setFontSize(12),c.text(`Reporte de ${o} - Período: ${e}`,14,20);const S=[{header:"Nombre del operador",dataKey:"nombre"},{header:"Días trabajados",dataKey:"diasTrabajados"},{header:"Días no trabajados",dataKey:"diasNoTrabajados"},{header:"Total de días",dataKey:"totalDias"},{header:"Productividad (%)",dataKey:"productividad"}],s=C.value.map(k=>{const N=k.nombre_completo||"N/A",w=k.diasTrabajados||0,T=a-w,D=(w/a*100).toFixed(2);return{nombre:N,diasTrabajados:w,diasNoTrabajados:T,totalDias:a,productividad:`${D}%`}});c.autoTable({columns:S,body:s,startY:24,styles:{fontSize:10}});const l=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});c.setFontSize(10),c.text(`Fecha de creación: ${l}`,14,c.internal.pageSize.height-10);const y=`${o}-${e}.pdf`;c.save(y)},L=(o,t)=>{let e;t.tipo==="semana"?e=`Semana ${t.valor}`:t.tipo==="mes"?e=R[t.valor-1]:(t.tipo,e=t.valor);const a=`${o}-${e}.xlsx`,c=j(t.tipo,t.valor),S=[["Nombre del Operador","Días Trabajados","Días no Trabajados","Total de Días"]];C.value.forEach(y=>{const k=y.nombre_completo||"N/A",N=y.diasTrabajados||"N/A",w=c-(y.diasTrabajados||0),T=j(t.tipo,t.valor);S.push([k,N,w,T])});const s=P.book_new(),l=P.aoa_to_sheet(S);P.book_append_sheet(s,l,"Reporte_Dias_Trabajados"),ee(s,a)},G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(o,t)=>t+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-de+1},(o,t)=>de+t);let m=1,g=1,p=V;const r=[{titulo:"Días Trabajados",periodo:"semana",periodoSeleccionado:"semana"}];return(o,t)=>(i(),d(b,null,f(r,e=>n("div",{key:e.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",nt,h(e.titulo),1),st,n("div",rt,[it,n("div",null,[n("div",null,[v(n("select",{name:"operador",id:"operador","onUpdate:modelValue":t[0]||(t[0]=a=>E.operador=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[dt,lt,(i(!0),d(b,null,f(K.operador,a=>(i(),d("option",{key:a.idOperador,value:a.idOperador},h(a.nombre_completo),9,ct))),128))],512),[[x,E.operador]])])])]),n("div",ut,[n("div",mt,[gt,v(n("select",{"onUpdate:modelValue":a=>e.periodoSeleccionado=a,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},vt,8,pt),[[x,e.periodoSeleccionado]]),e.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":t[1]||(t[1]=a=>O(m)?m.value=a:m=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(a,c)=>(i(),d("option",{key:c,value:a},"Semana "+h(a),9,xt))),128))],512)),[[x,u(m)]]):e.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":t[2]||(t[2]=a=>O(g)?g.value=a:g=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(a,c)=>n("option",{key:c,value:c+1},h(a),9,_t)),64))],512)),[[x,u(g)]]):e.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":t[3]||(t[3]=a=>O(p)?p.value=a:p=a),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),a=>(i(),d("option",{key:a,value:a},h(a),9,$t))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",yt,[(i(),d(b,null,f(G,a=>n("button",{key:a.tipo,class:z(a.clase),onClick:c=>M(e,a.tipo,E.operador,{tipo:e.periodoSeleccionado,valor:e.periodoSeleccionado==="semana"?u(m):e.periodoSeleccionado==="mes"?u(g):e.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(a.icono+" mr-2 jump-icon")},null,2),X(" "+h(a.texto),1)],10,St)),64))])])),64))}},wt={class:"text-lg font-bold"},At=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),kt={class:"flex flex-wrap gap-4 mb-3"},Nt=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1),Ut=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1),Ct=n("option",{value:"todas"},"Todas las unidades",-1),Et=["value"],Rt={class:"flex flex-wrap gap-4 mb-3"},Tt={class:"flex flex-wrap space-x-3 mb-2"},Dt=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),Ft=["onUpdate:modelValue"],Ot=n("option",{value:"semana"},"Semanal",-1),Pt=n("option",{value:"mes"},"Mensual",-1),Vt=n("option",{value:"anio"},"Anual",-1),jt=[Ot,Pt,Vt],zt=["value"],Kt=["value"],Bt=["value"],Mt={class:"flex flex-wrap space-x-3"},Yt=["onClick"],le=2024,$a={__name:"ReportesCastigos",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(r,o)=>{let t="";o.tipo==="semana"?t=route("reportes.castigosSemana",{idUnidad:r,semana:o.valor}):o.tipo==="mes"||typeof o=="number"?t=route("reportes.castigosMes",{idUnidad:r,mes:o.valor}):o.tipo==="anio"&&(t=route("reportes.castigosAnio",{idUnidad:r,anio:o.valor}));try{const e=await Z.get(t);C.value=e.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(r,o,t,e)=>{if(!t||!e.tipo||!e.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:r.periodoSeleccionado,valor:""};r.periodoSeleccionado==="semana"?a.valor=m:r.periodoSeleccionado==="mes"?a.valor=g:r.periodoSeleccionado==="anio"&&(a.valor=p);try{await B(t,a),r.titulo==="Castigos"?o==="pdf"?j(r.titulo,a):o==="excel"?Y(r.titulo,a):o==="imprimir"&&imprimirReporte(r.titulo,a):U.fire({title:`Generar el reporte "${r.titulo}" en ${o}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(r,o)=>{const t=new oe({orientation:"landscape"});let e;o.tipo==="semana"?e=`Semana ${o.valor}`:o.tipo==="mes"?e=R[o.valor-1]:(o.tipo,e=o.valor),t.setFontSize(12),t.text(`Reporte de ${r} - Período: ${e}`,14,20);const a=["Ruta","Fecha","Número Unidad","Socio/Prestador","Hora Inicio","Castigo","Hora Fin","Observaciones","Operador"],c=C.value.map(l=>{var _,J,te;const y=(_=l.unidad)!=null&&_.ruta?l.unidad.ruta.nombreRuta:"N/A",k=l.created_at?new Date(l.created_at).toLocaleDateString():"N/A",N=((J=l.unidad)==null?void 0:J.numeroUnidad)||"N/A",w=(te=l.unidad)!=null&&te.directivo?`${l.unidad.directivo.nombre_completo}`:"N/A",T=l.horaInicio?l.horaInicio.substring(0,5):"N/A",D=l.castigo||"N/A",F=l.horaFin?l.horaFin.substring(0,5):"N/A",A=l.observaciones,$=l.operador?`${l.operador.nombre_completo}`:"N/A";return[y,k,N,w,T,D,F,A,$]});t.autoTable({head:[a],body:c,startY:24});const S=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});t.setFontSize(10),t.text(`Fecha de creación: ${S}`,14,t.internal.pageSize.height-10);const s=`${r}-${e}.pdf`;t.save(s)},Y=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=`${r}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Hora Inicio","Castigo","Hora Fin","Observaciones","Operador"]];C.value.forEach(s=>{var $,_,J;const l=($=s.unidad)!=null&&$.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=((_=s.unidad)==null?void 0:_.numeroUnidad)||"N/A",N=(J=s.unidad)!=null&&J.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.horaInicio?s.horaInicio.substring(0,5):"N/A",T=s.castigo||"N/A",D=s.horaFin?s.horaFin.substring(0,5):"N/A",F=s.observaciones,A=s.operador?`${s.operador.nombre_completo}`:"N/A";a.push([l,y,k,N,w,T,D,F,A])});const c=P.book_new(),S=P.aoa_to_sheet(a);P.book_append_sheet(c,S,"Reporte_Castigos"),ee(c,e)},L=[{titulo:"Castigos",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(r,o)=>o+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-le+1},(r,o)=>le+o);let m=1,g=1,p=V;return(r,o)=>(i(),d(b,null,f(L,t=>n("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",wt,h(t.titulo),1),At,n("div",kt,[Nt,n("div",null,[n("div",null,[v(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":o[0]||(o[0]=e=>E.unidad=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Ut,Ct,(i(!0),d(b,null,f(K.unidad,e=>(i(),d("option",{key:e.idUnidad,value:e.idUnidad},h(e.numeroUnidad),9,Et))),128))],512),[[x,E.unidad]])])])]),n("div",Rt,[n("div",Tt,[Dt,v(n("select",{"onUpdate:modelValue":e=>t.periodoSeleccionado=e,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},jt,8,Ft),[[x,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>O(m)?m.value=e:m=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(e,a)=>(i(),d("option",{key:a,value:e},"Semana "+h(e),9,zt))),128))],512)),[[x,u(m)]]):t.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>O(g)?g.value=e:g=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(e,a)=>n("option",{key:a,value:a+1},h(e),9,Kt)),64))],512)),[[x,u(g)]]):t.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":o[3]||(o[3]=e=>O(p)?p.value=e:p=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),e=>(i(),d("option",{key:e,value:e},h(e),9,Bt))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",Mt,[(i(),d(b,null,f(G,e=>n("button",{key:e.tipo,class:z(e.clase),onClick:a=>M(t,e.tipo,E.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(e.icono+" mr-2 jump-icon")},null,2),X(" "+h(e.texto),1)],10,Yt)),64))])])),64))}},Lt={class:"text-lg font-bold"},Gt=n("div",{class:"bg-gradient-to-r from-cyan-500 to-cyan-500 h-px mb-2"},null,-1),Ht={class:"flex flex-wrap gap-4 mb-3"},It=n("h2",{class:"font-semibold text-l pt-0"},"Buscar por: ",-1),Jt=n("option",{disabled:"",select:"",value:""},"----- Unidad ----- ",-1),qt=n("option",{value:"todas"},"Todas las unidades",-1),Qt=["value"],Wt={class:"flex flex-wrap gap-4 mb-3"},Xt={class:"flex flex-wrap space-x-3 mb-2"},Zt=n("h2",{class:"font-semibold text-l pt-0"},"Periodo: ",-1),ea=["onUpdate:modelValue"],oa=n("option",{value:"semana"},"Semanal",-1),ta=n("option",{value:"mes"},"Mensual",-1),aa=n("option",{value:"anio"},"Anual",-1),na=[oa,ta,aa],sa=["value"],ra=["value"],ia=["value"],da={class:"flex flex-wrap space-x-3"},la=["onClick"],ce=2024,ya={__name:"ReportesUltimasCorridas",props:{message:{String,default:""},color:{String,default:""},unidad:{type:Object,default:()=>({})},operador:{type:Object,default:()=>({})},tipoUltimaCorrida:{type:Object,default:()=>({})}},setup(K){const C=q([]),E=Q({unidad:null,operador:null}),B=async(r,o)=>{let t="";o.tipo==="semana"?t=route("reportes.UCSemana",{idUnidad:r,semana:o.valor}):o.tipo==="mes"||typeof o=="number"?t=route("reportes.UCMes",{idUnidad:r,mes:o.valor}):o.tipo==="anio"&&(t=route("reportes.UCAnio",{idUnidad:r,anio:o.valor}));try{const e=await Z.get(t);C.value=e.data}catch{U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},M=async(r,o,t,e)=>{if(!t||!e.tipo||!e.valor){U.fire({title:"Error",text:"Por favor seleccione los parámetros para poder generar el archivo.",icon:"error",confirmButtonText:"OK"});return}let a={tipo:r.periodoSeleccionado,valor:""};r.periodoSeleccionado==="semana"?a.valor=m:r.periodoSeleccionado==="mes"?a.valor=g:r.periodoSeleccionado==="anio"&&(a.valor=p);try{await B(t,a),r.titulo==="Últimas Corridas"?o==="pdf"?j(r.titulo,a):o==="excel"?Y(r.titulo,a):o==="imprimir"&&imprimirReporte(r.titulo,a):U.fire({title:`Generar el reporte "${r.titulo}" en ${o}`,text:"Lógica para generar este tipo de reporte aquí",icon:"info",confirmButtonText:"OK"})}catch(c){console.error(c),U.fire({title:"Error",text:"No se pudieron obtener los datos",icon:"error",confirmButtonText:"OK"})}},j=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=new oe({orientation:"landscape"});e.setFontSize(12),e.text(`Reporte de ${r} - Período: ${t}`,14,20);const a=C.value.map(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.tipo_ultima_corrida?s.tipo_ultima_corrida.tipoUltimaCorrida:"N/A",T=s.horaInicioUC?s.horaInicioUC.substring(0,5):"N/A",D=s.horaFinUC?s.horaFinUC.substring(0,5):"N/A",F=s.operador?`${s.operador.nombre_completo}`:"N/A";return[l,y,k,N,w,T,D,F]});e.autoTable({startY:24,head:[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Tipo Última Corrida","Hora Inicio","Hora Fin","Operador"]],body:a});const c=new Date().toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});e.setFontSize(10),e.text(`Fecha de creación: ${c}`,14,e.internal.pageSize.height-10);const S=`${r}-${t}.pdf`;e.save(S)},Y=(r,o)=>{let t;o.tipo==="semana"?t=`Semana ${o.valor}`:o.tipo==="mes"?t=R[o.valor-1]:(o.tipo,t=o.valor);const e=`${r}-${t}.xlsx`,a=[["Ruta","Fecha","Numero Unidad","Socio/Prestador","Tipo Última Corrida","Hora Inicio","Hora Fin","Operador"]];C.value.forEach(s=>{var A,$,_;const l=(A=s.unidad)!=null&&A.ruta?s.unidad.ruta.nombreRuta:"N/A",y=s.created_at?new Date(s.created_at).toLocaleDateString():"N/A",k=(($=s.unidad)==null?void 0:$.numeroUnidad)||"N/A",N=(_=s.unidad)!=null&&_.directivo?`${s.unidad.directivo.nombre_completo}`:"N/A",w=s.tipo_ultima_corrida?s.tipo_ultima_corrida.tipoUltimaCorrida:"N/A",T=s.horaInicioUC?s.horaInicioUC.substring(0,5):"N/A",D=s.horaFinUC?s.horaFinUC.substring(0,5):"N/A",F=s.operador?`${s.operador.nombre_completo}`:"N/A";a.push([l,y,k,N,w,T,D,F])});const c=P.book_new(),S=P.aoa_to_sheet(a);P.book_append_sheet(c,S,"Reporte_Últimas_Corridas"),ee(c,e)},L=[{titulo:"Últimas Corridas",periodo:"semana",periodoSeleccionado:"semana"}],G=[{tipo:"pdf",texto:"Generar PDF",clase:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-pdf"},{tipo:"excel",texto:"Generar Excel",clase:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded",icono:"fa-solid fa-file-excel"}],H=Array.from({length:52},(r,o)=>o+1),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],V=new Date().getFullYear(),I=Array.from({length:V-ce+1},(r,o)=>ce+o);let m=1,g=1,p=V;return(r,o)=>(i(),d(b,null,f(L,t=>n("div",{key:t.titulo,class:"mb-4 bg-zinc-100 rounded-lg p-4"},[n("h3",Lt,h(t.titulo),1),Gt,n("div",Ht,[It,n("div",null,[n("div",null,[v(n("select",{name:"unidad",id:"unidad","onUpdate:modelValue":o[0]||(o[0]=e=>E.unidad=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[Jt,qt,(i(!0),d(b,null,f(K.unidad,e=>(i(),d("option",{key:e.idUnidad,value:e.idUnidad},h(e.numeroUnidad),9,Qt))),128))],512),[[x,E.unidad]])])])]),n("div",Wt,[n("div",Xt,[Zt,v(n("select",{"onUpdate:modelValue":e=>t.periodoSeleccionado=e,class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},na,8,ea),[[x,t.periodoSeleccionado]]),t.periodoSeleccionado==="semana"?v((i(),d("select",{key:0,"onUpdate:modelValue":o[1]||(o[1]=e=>O(m)?m.value=e:m=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(H),(e,a)=>(i(),d("option",{key:a,value:e},"Semana "+h(e),9,sa))),128))],512)),[[x,u(m)]]):t.periodoSeleccionado==="mes"?v((i(),d("select",{key:1,"onUpdate:modelValue":o[2]||(o[2]=e=>O(g)?g.value=e:g=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(),d(b,null,f(R,(e,a)=>n("option",{key:a,value:a+1},h(e),9,ra)),64))],512)),[[x,u(g)]]):t.periodoSeleccionado==="anio"?v((i(),d("select",{key:2,"onUpdate:modelValue":o[3]||(o[3]=e=>O(p)?p.value=e:p=e),class:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(i(!0),d(b,null,f(u(I),e=>(i(),d("option",{key:e,value:e},h(e),9,ia))),128))],512)),[[x,u(p)]]):W("",!0)])]),n("div",da,[(i(),d(b,null,f(G,e=>n("button",{key:e.tipo,class:z(e.clase),onClick:a=>M(t,e.tipo,E.unidad,{tipo:t.periodoSeleccionado,valor:t.periodoSeleccionado==="semana"?u(m):t.periodoSeleccionado==="mes"?u(g):t.periodoSeleccionado==="anio"?u(p):""})},[n("i",{class:z(e.icono+" mr-2 jump-icon")},null,2),X(" "+h(e.texto),1)],10,la)),64))])])),64))}};export{fa as _,xa as a,ha as b,ba as c,va as d,ya as e,$a as f,_a as g};
